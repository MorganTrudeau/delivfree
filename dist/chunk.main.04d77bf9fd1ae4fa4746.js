(()=>{var e={48102:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>bd});var r=n(70390),a=n(13106),o=n(94112),i=n.n(o),s=n(10763);const l={common:{ok:"OK!",cancel:"Cancel",back:"Back",logOut:"Log Out",home:"Home",leaderboard:"Leaderboard",profile:"Profile",ranked_game:"Ranked Game",casual_game:"Training Game",versus:"Versus",loading:"Loading...",versus_instruction:"Show them your QR code or send them a link.",try_that_again:"Try that again",next_question:"Next Question",see_your_results:"See your results"},ios_terms:{payment_charge_text:"One time payment will be charged to your iTunes Account at confirmation of purchase.",auto_renew:"Subscription automatically renews unless auto-renew is turned off at least 24-hours before the end of the current period",account_will_charge:"Account will be charged for renewal within 24 hours of the end of the current period. The cost of subscription will be identified.",subs_may_managed:"Subscriptions may be managed by the user and auto-renewal may be turned off after purchase through the user's Account Settings.",free_trial_unused_portion:"Any unused portion of a free trial period, if offered, will be forfeited when the user purchases a subscription of Employee Link, where applicable.",privacy_policy:"Privacy Policy",terms_of_use:"Terms of Use"},trivia:{choose_category:"Choose a category",versus_heading:"Challenge someone",share_link_button:"Share a link"},welcomeScreen:{postscript:"Your first skill testing question is: Do you have an account? (If no, sign up)",readyForLaunch:"Your app, almost ready for launch!",exciting:"(ohh, this is exciting!)",letsGo:"Let's go!"},errorScreen:{title:"Something went wrong!",friendlySubtitle:"Sorry for the interruption. Please reset the app to try again.",reset:"Reset App",traceTitle:"Error from %{name} stack"},emptyStateComponent:{generic:{heading:"So empty... so sad",content:"No data found yet. Try clicking the button to refresh or reload the app.",button:"Let's try this again"}},errors:{heading:"Oops had an error...",invalidEmail:"Invalid email address.",auth_email_already_in_use:"Email address is already in use by another account.",auth_invalid_email:"Email address is badly formatted.",auth_user_not_found:"There is no account with this email.",auth_weak_password:"Password must be at least 6 characters.",auth_wrong_password:"Password is incorrect.","auth_requires-recent-login":"Please try logging in again","auth_network-request-failed":"Please check your internet and try again","already-request-failed":"You've already created an account",common:"Something went wrong. Please try again."},loginScreen:{signIn:"Log In",enterDetails:"Enter your details below to unlock top secret info. You'll never guess what we've got waiting. Or maybe you will; it's not rocket science here.",emailFieldLabel:"Email",passwordFieldLabel:"Password",emailFieldPlaceholder:"Enter your email address",passwordFieldPlaceholder:"Enter your password",tapToSignIn:"Tap to log in!",hint:"Hint: you can use any email address and your favorite password :)"},signUpScreen:{signIn:"Sign Up",enterDetails:"Enter your details below to unlock top secret info. You'll never guess what we've got waiting. Or maybe you will; it's not rocket science here.",emailFieldLabel:"Email",passwordFieldLabel:"Password",emailFieldPlaceholder:"Enter your email address",passwordFieldPlaceholder:"Create a password",tapToSignIn:"Tap to sign up!",hint:"Hint: you can use any email address and your favorite password :)"},demoNavigator:{componentsTab:"Components",debugTab:"Debug",communityTab:"Community",podcastListTab:"Podcast"},demoCommunityScreen:{title:"Connect with the community",tagLine:"Plug in to Infinite Red's community of React Native engineers and level up your app development with us!",joinUsOnSlackTitle:"Join us on Slack",joinUsOnSlack:"Wish there was a place to connect with React Native engineers around the world? Join the conversation in the Infinite Red Community Slack! Our growing community is a safe space to ask questions, learn from others, and grow your network.",joinSlackLink:"Join the Slack Community",makeIgniteEvenBetterTitle:"Make Ignite even better",makeIgniteEvenBetter:"Have an idea to make Ignite even better? We're happy to hear that! We're always looking for others who want to help us build the best React Native tooling out there. Join us over on GitHub to join us in building the future of Ignite.",contributeToIgniteLink:"Contribute to Ignite",theLatestInReactNativeTitle:"The latest in React Native",theLatestInReactNative:"We're here to keep you current on all React Native has to offer.",reactNativeRadioLink:"React Native Radio",reactNativeNewsletterLink:"React Native Newsletter",reactNativeLiveLink:"React Native Live",chainReactConferenceLink:"Chain React Conference",hireUsTitle:"Hire Infinite Red for your next project",hireUs:"Whether it's running a full project or getting teams up to speed with our hands-on training, Infinite Red can help with just about any React Native project.",hireUsLink:"Send us a message"},demoShowroomScreen:{jumpStart:"Jump into a game",lorem2Sentences:"Nulla cupidatat deserunt amet quis aliquip nostrud do adipisicing. Adipisicing excepteur elit laborum Lorem adipisicing do duis.",demoHeaderTxExample:"Yay",demoViaTxProp:"Via `tx` Prop",demoViaSpecifiedTxProp:"Via `{{prop}}Tx` Prop"},demoDebugScreen:{howTo:"HOW TO",title:"Debug",tagLine:"Congratulations, you've got a very advanced React Native app template here.  Take advantage of this boilerplate!",reactotron:"Send to Reactotron",reportBugs:"Report Bugs",demoList:"Demo List",demoPodcastList:"Demo Podcast List",androidReactotronHint:"If this doesn't work, ensure the Reactotron desktop app is running, run adb reverse tcp:9090 tcp:9090 from your terminal, and reload the app.",iosReactotronHint:"If this doesn't work, ensure the Reactotron desktop app is running and reload app.",macosReactotronHint:"If this doesn't work, ensure the Reactotron desktop app is running and reload app.",webReactotronHint:"If this doesn't work, ensure the Reactotron desktop app is running and reload app.",windowsReactotronHint:"If this doesn't work, ensure the Reactotron desktop app is running and reload app."},demoPodcastListScreen:{title:"React Native Radio episodes",onlyFavorites:"Only Show Favorites",favoriteButton:"Favorite",unfavoriteButton:"Unfavorite",accessibility:{cardHint:"Double tap to listen to the episode. Double tap and hold to {{action}} this episode.",switch:"Switch on to only show favorites",favoriteAction:"Toggle Favorite",favoriteIcon:"Episode not favorited",unfavoriteIcon:"Episode favorited",publishLabel:"Published {{date}}",durationLabel:"Duration: {{hours}} hours {{minutes}} minutes {{seconds}} seconds"},noFavoritesEmptyState:{heading:"This looks a bit empty",content:"No favorites have been added yet. Tap the heart on an episode to add it to your favorites!"}}};i().fallbacks=!0,i().translations={en:l,"en-US":l},i().locale=a.locale;var u=a.isRTL;function c(e,t){return i().t(e,t)}s.default.allowRTL(u),s.default.forceRTL(u),n(26903).default.ignoreLogs(["Require cycle:"]);var d=n(69146),f=n(96540),m=n(69874),p=n(58168),A=n(10467),g=n(54756),h=n.n(g),v=n(50062);const C={persistNavigation:"dev",catchErrors:"always",exitRoutes:["Welcome","Tabs"]};var y={API_URL:"CHANGEME"};const b=(0,p.default)({},C,y);var E=n(98497),x=n(32779),w=n(98256),S=(0,w.createNavigationContainerRef)();function k(e){var t=e.routes[e.index];return t.state?k(t.state):t.name}function T(e){if("ios"!==x.default.OS){var t=(0,f.useRef)(e);(0,f.useEffect)((function(){t.current=e}),[e]),(0,f.useEffect)((function(){var e=function(){if(!S.isReady())return!1;var e=k(S.getRootState());return t.current(e)?(E.default.exitApp(),!0):!!S.canGoBack()&&(S.goBack(),!0)};return E.default.addEventListener("hardwareBackPress",e),function(){return E.default.removeEventListener("hardwareBackPress",e)}}),[])}}var R={neutral100:"#FFFFFF",neutral200:"#faf9f9",neutral300:"#F4F2F1",neutral400:"#D7CEC9",neutral500:"#B6ACA6",neutral600:"#978F8A",neutral700:"#564E4A",neutral800:"#191015",neutral900:"#000000",shade100:"#FFFFFF",shade200:"#F4F2F1",shade300:"#D7CEC9",shade400:"#B6ACA6",shade500:"#978F8A",shade600:"#564E4A",shade700:"#3C3836",shade800:"#191015",shade900:"#000000",primary100:"#f68d91",primary200:"#f4767b",primary300:"#f26065",primary400:"#f0494f",primary500:"#ee3239",primary600:"#ed1c24",secondary100:"#DCDDE9",secondary200:"#BCC0D6",secondary300:"#9196B9",secondary400:"#626894",secondary500:"#41476E",accent100:"#FFEED4",accent200:"#FFE1B2",accent300:"#FDD495",accent400:"#FBC878",accent500:"#FFBB50",angry100:"#e64b47",angry500:"#e01f1a",success100:"#82CDB1",overlay20:"rgba(25, 16, 21, 0.2)",overlay50:"rgba(25, 16, 21, 0.5)"},I={palette:R,transparent:"rgba(0, 0, 0, 0)",text:R.neutral800,textDim:R.neutral500,disabled:R.neutral300,background:R.neutral100,surface:R.neutral200,border:R.shade300,borderLight:R.shade200,tint:R.primary500,primary:R.primary600,separator:R.neutral300,success:R.success100,error:R.angry500,errorBackground:R.angry100,underlay:"rgba(0,0,0,0.1)"},D=x.default.select({default:{xxxs:2,xxs:4,xs:8,sm:12,md:16,lg:24,xl:32,xxl:48,xxxl:64},web:{xxxs:2,xxs:4,xs:8,sm:12,md:24,lg:24,xl:32,xxl:48,xxxl:64}}),L=n(14801),_={poppinsLight:L.Poppins_300Light,poppinsRegular:L.Poppins_400Regular,poppinsMedium:L.Poppins_500Medium,poppinsSemibold:L.Poppins_600SemiBold,poppinsBold:L.Poppins_700Bold},P={poppins:{light:"poppinsLight",normal:"poppinsRegular",medium:"poppinsMedium",semiBold:"poppinsSemibold",bold:"poppinsBold"}},O={fonts:P,primary:P.poppins,secondary:P.poppins},N=n(50944);n(43330);const M=N.default.messaging;var B={};const j={localNotificationSchedule:function(){},cancelLocalNotifications:function(){}};var W=n(68072);const z={NODE_ENV:"production",PUBLIC_URL:"",APP_MANIFEST:{name:"delivfree",slug:"delivfree",scheme:"delivfree",version:"1.0.0",orientation:"portrait",icon:"./assets/images/app-icon-all.png",splash:{image:"./assets/images/splash-logo-all.png",resizeMode:"contain",backgroundColor:"#191015"},updates:{fallbackToCacheTimeout:0},jsEngine:"hermes",web:{},sdkVersion:"49.0.0",platforms:["ios","android","web"]},EXPO_DEBUG:!1,PLATFORM:"web",WDS_SOCKET_PATH:"/_expo/ws",REACT_NATIVE_APP:"VENDOR"};var H=n(64996),F=function(){return console.log("Config",z),z.REACT_NATIVE_APP},U=function(){return"web"===x.default.OS&&M.isSupported()};var V=function(){var e=(0,A.default)(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n=3),e.prev=1,e.next=4,t();case 4:case 16:return e.abrupt("return",e.sent);case 7:if(e.prev=7,e.t0=e.catch(1),1!==n){e.next=11;break}throw e.t0;case 11:return console.log("Failed request attempt number",n),e.next=14,new Promise((function(e){return setTimeout(e,2e3)}));case 14:return e.next=16,V(t,n-1);case 17:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}(),K=function(e){void 0===e&&(e=9);return new Array(e).fill(0).map((function(e){return(65536*(1+Math.random())|0).toString(16).substring(1)})).join("")};function G(e){void 0===e&&(e=6);return new Array(e).fill(0).map((function(e){return Math.floor(Math.random()*Math.floor(10)).toString()})).join("")}var q=function(e,t,n,r){void 0===n&&(n={});try{return e.toLocaleString(r,(0,p.default)({style:"currency",currency:t||"USD",currencyDisplay:"narrowSymbol"},n))}catch(a){return e.toLocaleString(void 0,(0,p.default)({style:"currency",currency:t||"USD"},n))}},Q=function(e){var t,n;return{id:e.messageId||K(),title:(null==(t=e.notification)?void 0:t.title)||"",message:(null==(n=e.notification)?void 0:n.body)||"",data:e.data||{}}},Y=n(50988);n(81154);const X=N.default.firestore;var Z=n(14030),$=n(82960),J=n(12069),ee=n(69733),te={authToken:void 0,user:void 0,isAnonymous:!1,previousAuthToken:void 0},ne=(0,J.createSlice)({name:"auth",initialState:te,reducers:{setAuthToken:function(e,t){e.authToken=t.payload,t.payload&&(e.previousAuthToken=t.payload)},setAnonymous:function(e,t){e.isAnonymous=t.payload},setAuthUser:function(e,t){e.user=t.payload}}}),re=ne.actions,ae=re.setAuthToken,oe=re.setAnonymous,ie=re.setAuthUser;const se=ne.reducer;var le=(0,J.createAction)("REVERT_ALL"),ue=n(77885),ce={admin:!1,user:null,loaded:!1,deleteAccountLoading:!1,blockLoading:!1},de=(0,J.createSlice)({name:"user",initialState:ce,reducers:{setUser:function(e,t){e.user=t.payload,e.loaded=!0},setDeleteAccountLoading:function(e,t){e.deleteAccountLoading=t.payload},setBlockUserLoading:function(e,t){e.blockLoading=t.payload}},extraReducers:function(e){e.addCase(le,(function(){return ce}))}}),fe=de.actions,me=fe.setUser,pe=fe.setDeleteAccountLoading,Ae=(fe.setBlockUserLoading,(0,ue.default)((function(e){return{admin:e.admin,user:e.user,loaded:e.loaded}}),(function(e){return(0,p.default)({},ce,e)}),{whitelist:["badges"]}));const ge=de.reducer;var he={userType:void 0,webNotificationsEnabled:!1},ve=(0,J.createSlice)({name:"appConfig",initialState:he,reducers:{setUserType:function(e,t){e.userType=t.payload},setWebNotificationsEnabled:function(e,t){e.webNotificationsEnabled=t.payload}}}),Ce=ve.actions,ye=Ce.setUserType,be=Ce.setWebNotificationsEnabled;const Ee=ve.reducer;var xe=n(47068),we=n(90294),Se=(0,J.createAsyncThunk)("vendors/createVendor",function(){var e=(0,A.default)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X().collection("Vendors").doc(t.id).set(t);case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ke=(0,J.createAsyncThunk)("vendors/listenToVendor",(function(e,t){var n=t.dispatch;return X().collection("Vendors").doc(e).onSnapshot((function(e){return n(Ie(e.data()))}))})),Te={data:null},Re=(0,J.createSlice)({name:"vendor",initialState:Te,reducers:{setVendor:function(e,t){e.data=t.payload}},extraReducers:function(e){e.addCase(Se.fulfilled,(function(e,t){e.data=t.payload})),e.addCase(le,(function(){return Te}))}}),Ie=Re.actions.setVendor;const De=Re.reducer;var Le={data:{}},_e=(0,J.createSlice)({name:"customers",initialState:Le,reducers:{setCustomers:function(e,t){e.data=t.payload},addCustomer:function(e,t){var n;e.data=(0,p.default)({},e.data,((n={})[t.payload.id]=t.payload,n))}},extraReducers:function(e){e.addCase(le,(function(){return Le}))}}),Pe=_e.actions.setCustomers;const Oe=_e.reducer;var Ne={data:{}},Me=(0,J.createSlice)({name:"vendor",initialState:Ne,reducers:{setRestaurantLocations:function(e,t){e.data=t.payload}},extraReducers:function(e){e.addCase(le,(function(){return Ne}))}}),Be=Me.actions.setRestaurantLocations;const je=Me.reducer;var We={vendorSubscription:void 0,driverSubscription:void 0},ze=(0,J.createSlice)({name:"subscription",initialState:We,reducers:{setVendorSubscription:function(e,t){e.vendorSubscription=t.payload},setDriverSubscription:function(e,t){e.driverSubscription=t.payload}},extraReducers:function(e){e.addCase(le,(function(){return We}))}}),He=ze.actions,Fe=He.setVendorSubscription,Ue=He.setDriverSubscription;const Ve=ze.reducer;var Ke={data:null},Ge=(0,J.createSlice)({name:"driver",initialState:Ke,reducers:{setDriver:function(e,t){e.data=t.payload}},extraReducers:function(e){e.addCase(le,(function(){return Ke}))}}),qe=Ge.actions.setDriver;const Qe=Ge.reducer;var Ye={data:{}},Xe=(0,J.createSlice)({name:"vendorDrivers",initialState:Ye,reducers:{setDrivers:function(e,t){e.data=t.payload}},extraReducers:function(e){e.addCase(le,(function(){return Ye}))}}),Ze=Xe.actions.setDrivers;const $e=Xe.reducer;var Je={key:"2",storage:we.default,version:0,tranforms:[Ae]},et=(0,$.combineReducers)({auth:se,driver:Qe,user:ge,appConfig:Ee,vendor:De,customers:Oe,restaurantLocations:je,subscription:Ve,vendorDrivers:$e}),tt=(0,xe.persistReducer)(Je,et),nt=(x.default.OS,void 0),rt=(0,J.configureStore)({reducer:tt,devTools:!1,enhancers:nt,middleware:(0,J.getDefaultMiddleware)({serializableCheck:{ignoredActions:[xe.FLUSH,xe.REHYDRATE,xe.PAUSE,xe.PERSIST,xe.PURGE,xe.REGISTER]}})}),at=(0,xe.persistStore)(rt),ot=ee.useDispatch,it=ee.useSelector,st=function(){return window&&"Notification"in window?window.Notification.permission:null},lt="PREFERRED_NOTIFICATION_SETTING";(function(){var e=(0,A.default)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,we.default.getItem(lt);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.log("Failed to save preferred notification setting",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))})(),function(){var e=(0,A.default)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,we.default.setItem(lt,"TRUE");case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.log("Failed to save preferred notification setting",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))}();function ut(e){if(!e||!e.code)return c("errors.common");switch(e.code){case"auth/user-not-found":return c("errors.auth_user_not_found");case"auth/wrong-password":return c("errors.auth_wrong_password");case"auth/invalid-email":return c("errors.auth_invalid_email");case"auth/weak-password":return c("errors.auth_weak_password");case"auth/email-already-in-use":return c("errors.auth_email_already_in_use");case"auth/requires-recent-login":return c("errors.auth_requires-recent-login");case"auth/network-request-failed":return c("errors.auth_network-request-failed");case"auth/provider-already-linked":return c("errors.already-request-failed");default:return c("errors.common")}}var ct=n(15980),dt=n(3469),ft=5,mt=10,pt={xxxs:2,xxs:5,xs:10,sm:15,md:20,lg:25,xl:30,xxl:40,xxxl:60},At=n(46401),gt=1e3,ht=80,vt=350,Ct=["bottom","right","left"],yt=["top","right","left","bottom"],bt=["right","left"],Et=x.default.select({web:600,default:650}),xt=x.default.select({default:700,web:900}),wt=(At.default.get("window").width,{padding:D.lg,shadowOffset:{width:0,height:0},shadowRadius:10,shadowColor:"#000",shadowOpacity:.1,elevation:2,zIndex:2,width:"100%",maxWidth:xt,alignSelf:x.default.select({default:"center",web:"center"}),borderRadius:6,backgroundColor:I.background,borderColor:I.border,borderWidth:ct.default.hairlineWidth}),St={paddingHorizontal:D.md,paddingVertical:D.md,flexGrow:1},kt={flex:1,maxWidth:1300},Tt=(D.xl,{flexDirection:"row",alignItems:"center"}),Rt={flex:1},It={shadowOffset:{width:0,height:0},shadowRadius:4,shadowColor:"#000",shadowOpacity:.2,elevation:3},Dt={shadowOffset:{width:0,height:0},shadowRadius:4,shadowColor:"#fff",shadowOpacity:.2,elevation:3},Lt={borderTopWidth:ct.default.hairlineWidth,borderTopColor:I.border},_t={borderBottomWidth:ct.default.hairlineWidth,borderBottomColor:I.border},Pt=(I.textDim,O.primary.medium,{backgroundColor:I.palette.neutral200,paddingHorizontal:D.sm,paddingVertical:D.xs,borderRadius:mt,borderColor:I.border,borderWidth:ct.default.hairlineWidth}),Ot=(I.background,D.md,D.sm,D.sm,pt.lg,pt.lg,D.sm,D.xxs,(0,p.default)({},ct.default.absoluteFillObject,{borderRadius:mt})),Nt=[It,{borderRadius:mt,width:"100%",maxWidth:400,aspectRatio:2.8,backgroundColor:I.background}],Mt={paddingHorizontal:D.xs,backgroundColor:I.palette.neutral200,borderWidth:ct.default.hairlineWidth,borderRadius:ft,color:I.text,fontSize:16,minHeight:38,flexDirection:"column",justifyContent:"center",outlineStyle:"none",borderColor:I.border},Bt=n(98587),jt=n(79231),Wt=["weight","size","tx","txOptions","text","children","style"];function zt(e){var t=e.weight,n=e.size,r=e.tx,a=e.txOptions,o=e.text,i=e.children,s=e.style,l=(0,Bt.default)(e,Wt),u=r&&c(r,a)||o||i,d=e.preset&&Kt[e.preset]?e.preset:"default",m=[Gt,Kt[d],t&&Ft[t],n&&Ht[n],s];return f.createElement(jt.default,(0,p.default)({allowFontScaling:"heading"!==d},l,{style:m}),u)}var Ht={xxl:{fontSize:30,lineHeight:44},xl:{fontSize:24,lineHeight:34},lg:{fontSize:20,lineHeight:32},md:{fontSize:18,lineHeight:26},sm:{fontSize:16,lineHeight:24},xs:{fontSize:14,lineHeight:21},xxs:{fontSize:12,lineHeight:18}},Ft=Object.entries(O.primary).reduce((function(e,t){var n,r=t[0],a=t[1];return(0,p.default)({},e,((n={})[r]={fontFamily:a},n))}),{}),Ut=Object.entries(O.secondary).reduce((function(e,t){var n,r=t[0],a=t[1];return(0,p.default)({},e,((n={})[r]={fontFamily:a},n))}),{}),Vt=[Ht.sm,Ft.normal,{color:I.text}],Kt={default:Vt,semibold:[Vt,Ft.semiBold],bold:[Vt,Ft.bold],heading:[Vt,Ht.xxl,Ut.bold],subheading:[Vt,Ht.lg,Ft.medium],formLabel:[Vt,Ft.medium],formHelper:[Vt,Ht.sm,Ft.normal]},Gt=u?{writingDirection:"rtl"}:{},qt=n(76721),Qt=n(55447),Yt=["icon","color","size","style","containerStyle"];function Xt(e){var t=e.icon,n=e.color,r=void 0===n?I.text:n,a=e.size,o=void 0===a?pt.lg:a,i=e.style,s=e.containerStyle,l=(0,Bt.default)(e,Yt),u=!!l.onPress;return f.createElement(qt.default,(0,p.default)({disabled:!u,accessibilityRole:u?"imagebutton":void 0},l,{style:s}),f.createElement(Qt.default,{style:i,size:o,color:r,name:Zt[t]||t}))}var Zt={back:"arrow-left",bell:"bell-ring",caretLeft:"chevron-left",caretRight:"chevron-right",check:"check",clap:"hand-clap",community:"account-group",components:"code-array",debug:"bug",github:"github",heart:"heart",hidden:"eye-off",ladybug:"bug",lock:"lock",menu:"menu",more:"dots-horizontal",pin:"map-marker",podcast:"podcast",settings:"cog",slack:"slack",view:"eye",x:"close"},$t=["tx","text","txOptions","style","pressedStyle","textStyle","pressedTextStyle","children","RightAccessory","LeftAccessory"];function Jt(e){var t=e.tx,n=e.text,r=e.txOptions,a=e.style,o=e.pressedStyle,i=e.textStyle,s=e.pressedTextStyle,l=e.children,u=e.RightAccessory,c=e.LeftAccessory,d=(0,Bt.default)(e,$t),m=e.preset&&an[e.preset]?e.preset:"default";function A(e){var t=e.pressed;return[on[m],i,!!t&&[ln[m],s]]}return f.createElement(qt.default,(0,p.default)({style:function(e){var t=e.pressed;return[an[m],a,!!t&&[sn[m],o]]},accessibilityRole:"button"},d),(function(e){return f.createElement(f.Fragment,null,!!c&&("function"===typeof c?f.createElement(c,{style:rn,pressableState:e}):c),f.createElement(zt,{tx:t,text:n,txOptions:r,style:A(e)},l),!!u&&f.createElement(u,{style:nn,pressableState:e}))}))}var en={borderRadius:4,overflow:"hidden",paddingVertical:D.xs,paddingHorizontal:D.sm,backgroundColor:I.palette.neutral800,alignItems:"center",justifyContent:"center",flexDirection:"row"},tn={fontSize:15,lineHeight:20,fontFamily:O.primary.medium,textAlign:"center",flexShrink:1,flexGrow:0,zIndex:2},nn={marginStart:D.xs,zIndex:1},rn={marginEnd:D.xs,zIndex:1},an={default:[en,{borderWidth:1,borderColor:I.palette.primary200,backgroundColor:I.background}],filled:[en,{backgroundColor:I.palette.primary500,borderWidth:1,borderColor:I.palette.primary200}],reversed:[en,{backgroundColor:I.palette.neutral800,borderWidth:1,borderColor:I.palette.neutral800}]},on={default:tn,filled:[tn,{color:"#fff"}],reversed:[tn,{color:I.palette.neutral100}]},sn={default:{backgroundColor:I.palette.neutral300},filled:{backgroundColor:I.palette.primary600},reversed:{backgroundColor:I.palette.neutral700}},ln={default:{opacity:.9},filled:{opacity:.9},reversed:{opacity:.9}};ct.default.create({button:{paddingVertical:D.xs,paddingHorizontal:D.md,borderRadius:mt}});const un=function(e){var t=e.style,n=e.onEnable,r=e.onCancel;return f.createElement(dt.default,{style:[{backgroundColor:I.background,padding:D.lg,borderRadius:mt},It,t]},f.createElement(zt,{preset:"subheading"},"Enable Notifications"),f.createElement(zt,null,"Stay up to date with in-app notifications"),f.createElement(dt.default,{style:[Tt,{marginTop:D.md}]},f.createElement(Jt,{onPress:n,text:"Enable",style:{marginRight:D.md,flex:1},RightAccessory:function(e){var t=e.style;return f.createElement(Xt,{icon:"check-circle",style:t,color:I.primary})}}),f.createElement(Jt,{onPress:r,text:"Not now",style:{flex:1}})))};var cn=n(30083),dn=function(){var e=(0,f.useState)(At.default.get("window")),t=e[0],n=e[1];return(0,f.useEffect)((function(){At.default.addEventListener("change",(function(e){var t=e.window;n(t)}))}),[]),t},fn=n(69943),mn=n(66343),pn=n(58723),An=n(2822),gn=n(52423),hn=n(9620),vn=n(72499),Cn=function(e){var t=e.onPress,n=e.style;return f.createElement(qt.default,{onPress:t,style:[yn,n],hitSlop:D.sm},f.createElement(Xt,{icon:"close",size:pt.md}))},yn={position:"absolute",top:D.xs,right:D.xs},bn=vn.default(hn.default),En={code:"function anonymous(){const{index,interpolate,showAllAnimation,WEB_NOTIFICATION_HEIGHT,overlapIndex,notificationsLength,WEB_NOTIFICATION_WIDTH}=this.__closure;return{zIndex:9999-index,transform:[{translateY:interpolate(showAllAnimation.value,[0,1],[index*-(WEB_NOTIFICATION_HEIGHT+20)+overlapIndex*10,0])}],height:interpolate(showAllAnimation.value,[0,1],[notificationsLength>1?WEB_NOTIFICATION_HEIGHT+20:WEB_NOTIFICATION_HEIGHT,WEB_NOTIFICATION_HEIGHT]),width:interpolate(showAllAnimation.value,[0,1],[overlapIndex*-24+WEB_NOTIFICATION_WIDTH,WEB_NOTIFICATION_WIDTH]),marginBottom:interpolate(showAllAnimation.value,[0,1],[0,7])};}",location:"/Users/morgantrudeau/projects/delivfree/app/components/LocalWebNotifications/LocalWebNotification.tsx",sourceMap:'{"version":3,"names":["anonymous","index","interpolate","showAllAnimation","WEB_NOTIFICATION_HEIGHT","overlapIndex","notificationsLength","WEB_NOTIFICATION_WIDTH","__closure","zIndex","transform","translateY","value","height","width","marginBottom"],"sources":["/Users/morgantrudeau/projects/delivfree/app/components/LocalWebNotifications/LocalWebNotification.tsx"],"mappings":"AAkDI,SAAAA,UAAA,QAAAC,KAAA,CAAAC,WAAA,CAAAC,gBAAA,CAAAC,uBAAA,CAAAC,YAAA,CAAAC,mBAAA,CAAAC,sBAAA,OAAAC,SAAA,OAAO,CACLC,MAAM,CAAE,IAAI,CAAGR,KAAK,CACpBS,SAAS,CAAE,CACT,CACEC,UAAU,CAAET,WAAW,CACrBC,gBAAgB,CAACS,KAAK,CACtB,CAAC,CAAC,CAAE,CAAC,CAAC,CACN,CAACX,KAAK,CAAG,EAAEG,uBAAuB,CAAG,EAAE,CAAC,CAAGC,YAAY,CAAG,EAAE,CAAE,CAAC,CACjE,CACF,CAAC,CACF,CACDQ,MAAM,CAAEX,WAAW,CACjBC,gBAAgB,CAACS,KAAK,CACtB,CAAC,CAAC,CAAE,CAAC,CAAC,CACN,CACEN,mBAAmB,CAAG,CAAC,CACnBF,uBAAuB,CAAG,EAAE,CAC5BA,uBAAuB,CAC3BA,uBAAuB,CAE3B,CAAC,CACDU,KAAK,CAAEZ,WAAW,CAChBC,gBAAgB,CAACS,KAAK,CACtB,CAAC,CAAC,CAAE,CAAC,CAAC,CACN,CAACP,YAAY,CAAG,CAAC,EAAE,CAAGE,sBAAsB,CAAEA,sBAAsB,CACtE,CAAC,CACDQ,YAAY,CAAEb,WAAW,CAACC,gBAAgB,CAACS,KAAK,CAAE,CAAC,CAAC,CAAE,CAAC,CAAC,CAAE,CAAC,CAAC,CAAE,CAAC,CAAC,CAClE,CAAC"}',version:"3.5.4"},xn={code:"function anonymous(){const{hovered}=this.__closure;return{transform:[{scale:hovered.value}]};}",location:"/Users/morgantrudeau/projects/delivfree/app/components/LocalWebNotifications/LocalWebNotification.tsx",sourceMap:'{"version":3,"names":["anonymous","hovered","__closure","transform","scale","value"],"sources":["/Users/morgantrudeau/projects/delivfree/app/components/LocalWebNotifications/LocalWebNotification.tsx"],"mappings":"AAkGI,SAAAA,UAAA,QAAAC,OAAA,OAAAC,SAAA,OAAO,CAAEC,SAAS,CAAE,CAAC,CAAEC,KAAK,CAAEH,OAAO,CAACI,KAAM,CAAC,CAAE,CAAC"}',version:"3.5.4"};const wn=function(e){var t=e.notification,r=e.onPress,a=e.onClose,o=e.overlayOpacity,i=void 0===o?0:o,s=e.totalNotifications,l=e.showAllAnimation,u=e.isFirst,c=e.showAll,d=e.notificationsLength,m=e.index,p=Math.min(m,2),A=(0,pn.useAnimatedStyle)(function(){var e=[new n.g.Error,-8,-27],t=function(){return{zIndex:9999-m,transform:[{translateY:(0,An.interpolate)(l.value,[0,1],[-100*m+10*p,0])}],height:(0,An.interpolate)(l.value,[0,1],[d>1?100:ht,ht]),width:(0,An.interpolate)(l.value,[0,1],[-24*p+vt,vt]),marginBottom:(0,An.interpolate)(l.value,[0,1],[0,7])}};return t.__closure={index:m,interpolate:An.interpolate,showAllAnimation:l,WEB_NOTIFICATION_HEIGHT:ht,overlapIndex:p,notificationsLength:d,WEB_NOTIFICATION_WIDTH:vt},t.__initData=En,t.__workletHash=0xfbe1f93eb20,t.__stackDetails=e,t}(),[l]),g=(0,f.useMemo)((function(){return t.notification?(console.log(t.notification),t.notification):{body:"",title:""}}),[t]),h=g.body,v=g.title,C=(0,fn.useSharedValue)(0),y=function(e){return function(){(u||c)&&(C.value=(0,mn.withTiming)(e?1:0))}},b=(0,pn.useAnimatedStyle)(function(){var e=[new n.g.Error,-2,-27],t=function(){return{transform:[{scale:C.value}]}};return t.__closure={hovered:C},t.__initData=xn,t.__workletHash=8055330742891,t.__stackDetails=e,t}(),[C]);return f.createElement(bn,{onMouseEnter:y(!0),onMouseLeave:y(!1),activeOpacity:1,style:[It,{backgroundColor:I.background,padding:20,flexDirection:"row",alignItems:"center",justifyContent:"space-between",borderRadius:10,height:ht,width:vt},A],onPress:function(){return r(t)}},f.createElement(dt.default,{style:{flex:1}},f.createElement(zt,{preset:"bold",style:{marginBottom:3}},v),f.createElement(zt,{numberOfLines:1,ellipsizeMode:"tail",style:{flexShrink:1}},h),s>1&&u&&!c&&f.createElement(zt,{size:"xs",style:{marginTop:8,color:I.textDim}},s-1," more"," ",s>2?"notifications":"notification")),f.createElement(gn.AnimatedView,{style:[{position:"absolute",top:4,left:-5},b]},f.createElement(Cn,{onPress:function(){return a(t)},style:{alignSelf:"flex-start"}})),f.createElement(dt.default,{style:{backgroundColor:"black",opacity:i,position:"absolute",borderRadius:10,top:0,right:0,left:0,bottom:0},pointerEvents:"none"}))};var Sn={code:"function anonymous(){const{moreNotificationsTransition,interpolate}=this.__closure;return{opacity:moreNotificationsTransition.value,height:interpolate(moreNotificationsTransition.value,[0,1],[0,40])};}",location:"/Users/morgantrudeau/projects/delivfree/app/components/LocalWebNotifications/LocalWebNotificationList.tsx",sourceMap:'{"version":3,"names":["anonymous","moreNotificationsTransition","interpolate","__closure","opacity","value","height"],"sources":["/Users/morgantrudeau/projects/delivfree/app/components/LocalWebNotifications/LocalWebNotificationList.tsx"],"mappings":"AA0EI,SAAAA,UAAA,QAAAC,2BAAA,CAAAC,WAAA,OAAAC,SAAA,OAAO,CACLC,OAAO,CAAEH,2BAA2B,CAACI,KAAK,CAC1CC,MAAM,CAAEJ,WAAW,CAACD,2BAA2B,CAACI,KAAK,CAAE,CAAC,CAAC,CAAE,CAAC,CAAC,CAAE,CAAC,CAAC,CAAE,EAAE,CAAC,CACxE,CAAC"}',version:"3.5.4"},kn={code:"function anonymous(){const{interpolate,showAllTransition,staticUnderlayHeight,hasMoreNotifications,WEB_NOTIFICATION_HEIGHT,notifications,maxHeight}=this.__closure;return{height:interpolate(showAllTransition.value,[0,1],[staticUnderlayHeight+(hasMoreNotifications?WEB_NOTIFICATION_HEIGHT+20+Math.min(notifications.length-1,2)*10:WEB_NOTIFICATION_HEIGHT),Math.min(maxHeight,staticUnderlayHeight+(WEB_NOTIFICATION_HEIGHT+7)*notifications.length+-7)])};}",location:"/Users/morgantrudeau/projects/delivfree/app/components/LocalWebNotifications/LocalWebNotificationList.tsx",sourceMap:'{"version":3,"names":["anonymous","interpolate","showAllTransition","staticUnderlayHeight","hasMoreNotifications","WEB_NOTIFICATION_HEIGHT","notifications","maxHeight","__closure","height","value","Math","min","length"],"sources":["/Users/morgantrudeau/projects/delivfree/app/components/LocalWebNotifications/LocalWebNotificationList.tsx"],"mappings":"AAiFI,SAAAA,UAAA,QAAAC,WAAA,CAAAC,iBAAA,CAAAC,oBAAA,CAAAC,oBAAA,CAAAC,uBAAA,CAAAC,aAAA,CAAAC,SAAA,OAAAC,SAAA,OAAO,CACLC,MAAM,CAAER,WAAW,CACjBC,iBAAiB,CAACQ,KAAK,CACvB,CAAC,CAAC,CAAE,CAAC,CAAC,CACN,CACEP,oBAAoB,EACjBC,oBAAoB,CACjBC,uBAAuB,CACvB,EAAE,CACFM,IAAI,CAACC,GAAG,CAACN,aAAa,CAACO,MAAM,CAAG,CAAC,CAAE,CAAC,CAAC,CAAG,EAAE,CAC1CR,uBAAuB,CAAC,CAC9BM,IAAI,CAACC,GAAG,CACNL,SAAS,CACTJ,oBAAoB,CAClB,CAACE,uBAAuB,CAAG,CAAC,EAAIC,aAAa,CAACO,MAAM,CACpD,CAAC,CACL,CAAC,CAEL,CACF,CAAC"}',version:"3.5.4"};const Tn=function(e){var t=e.notifications,r=e.notificationPress,a=e.removeNotification,o=e.clearAll,i=e.style,s=dn().height-100,l=(0,f.useState)(!1),u=l[0],c=l[1],d=(0,fn.useSharedValue)(0),m=function(){d.value=(0,mn.withTiming)(0),c(!1)},p=t.length>1,A=20+(p?40:0),g=(0,f.useRef)(t.length),h=(0,fn.useSharedValue)(p?1:0);(1===g.current&&p||g.current>1&&t.length<=1)&&(h.value=(0,mn.withTiming)(p?1:0),u&&1===t.length&&m()),g.current=t.length;var v=(0,pn.useAnimatedStyle)(function(){var e=[new n.g.Error,-3,-27],t=function(){return{opacity:h.value,height:(0,An.interpolate)(h.value,[0,1],[0,40])}};return t.__closure={moreNotificationsTransition:h,interpolate:An.interpolate},t.__initData=Sn,t.__workletHash=6515309309772,t.__stackDetails=e,t}(),[h]),C=(0,pn.useAnimatedStyle)(function(){var e=[new n.g.Error,-8,-27],r=function(){return{height:(0,An.interpolate)(d.value,[0,1],[A+(p?100+10*Math.min(t.length-1,2):ht),Math.min(s,A+87*t.length+-7)])}};return r.__closure={interpolate:An.interpolate,showAllTransition:d,staticUnderlayHeight:A,hasMoreNotifications:p,WEB_NOTIFICATION_HEIGHT:ht,notifications:t,maxHeight:s},r.__initData=kn,r.__workletHash=2746931941498,r.__stackDetails=e,r}(),[d]);return f.createElement(dt.default,{style:[{margin:10},i],pointerEvents:t.length?"auto":"none"},!!t.length&&f.createElement(gn.AnimatedView,{style:[Dt,{borderRadius:10,backgroundColor:"rgba(255, 255, 255, 0.1)",position:"absolute",top:0,right:0,bottom:0,left:0,zIndex:1},C],pointerEvents:"none"}),f.createElement(cn.default,{style:{zIndex:2,flex:1,maxHeight:s},contentContainerStyle:{padding:10,alignItems:"center",zIndex:2,flexGrow:1}},f.createElement(gn.AnimatedView,{style:[{flexDirection:"row",justifyContent:"flex-end",alignItems:"flex-start",width:"100%",overflow:"hidden"},v]},f.createElement(Jt,{text:"Clear all",onPress:o,style:{marginRight:10,paddingVertical:D.xxs,minHeight:0}}),f.createElement(Jt,{text:u?"Show less":"Show all",onPress:u?m:function(){d.value=(0,mn.withTiming)(1),c(!0)},style:{paddingVertical:D.xxs,minHeight:0}})),t.map((function(e,n){if(!u&&n>3)return null;var o=u?0:.05*Math.min(n,2);return f.createElement(wn,{key:e.fcmMessageId+"-"+n,notification:e,onPress:r,onClose:a,overlayOpacity:o,totalNotifications:t.length,isFirst:0===n,showAll:u,index:n,notificationsLength:t.length,showAllAnimation:d})}))))};var Rn=(0,f.createContext)({configure:function(e){void 0===e&&(e={})},localNotification:function(e){}});const In=function(e){var t=e.children,n=it((function(e){return{webNotificationsEnabled:e.appConfig.webNotificationsEnabled,authToken:e.auth.authToken}}),ee.shallowEqual),r=n.webNotificationsEnabled,a=n.authToken,o=ot(),i=(0,f.useState)(),s=i[0],l=i[1],u=(0,f.useState)([]),c=u[0],d=u[1],m=(0,f.useState)(!1),p=m[0],g=m[1],v=function(){var e=(0,A.default)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U();case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:"granted"===(t=st())?r||o(be(!0)):"default"===t&&(p||g(!0));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,f.useEffect)((function(){a&&v()}),[a]);var C=function(e){console.log("remove",e),d((function(t){return t.filter((function(t){return t.fcmMessageId!==e.fcmMessageId}))}))},y=function(){var e=(0,A.default)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(!1),e.next=4,M().requestPermission();case 4:"granted"===st()&&o(be(!0)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Enable notifications error",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return f.createElement(Rn.Provider,{value:{configure:function(e){void 0===e&&(e={});var t=e.onNotification;l((function(){return t}))},localNotification:function(e){console.log("display local"),d((function(t){return[e].concat(t)}))}}},t,p&&f.createElement(un,{style:{position:"absolute",top:D.lg,right:D.lg},onEnable:y,onCancel:function(){g(!1)}}),f.createElement(Tn,{notifications:c,notificationPress:function(e){"function"===typeof s&&s(e),C(e)},removeNotification:C,clearAll:function(){d((function(){return[]}))},style:{position:"absolute",top:0,right:0}}))};var Dn="local_notifications",Ln=function(){var e=it((function(e){return e.auth.authToken})),t=(0,f.useRef)(),n=(0,f.useRef)(),r=(0,f.useRef)(),a=(0,f.useRef)(new Set),o=(0,f.useContext)(Rn);(0,f.useEffect)((function(){i()}),[e]);var i=function(){var t=(0,A.default)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("web"!==x.default.OS){t.next=6;break}return t.next=3,U();case 3:if(t.sent){t.next=6;break}return t.abrupt("return");case 6:e?s():y();case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),s=function(){var e=(0,A.default)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"android"===x.default.OS&&j.createChannel({channelId:Dn,channelName:"Local Notifications",channelDescription:"A channel to show local notifications",playSound:!1,soundName:"default",importance:B.HIGH,vibrate:!0},(function(e){console.log("Channel created",e)})),e.next=3,l();case 3:return e.next=5,c();case 5:return e.next=7,d();case 7:m(),v(),b();case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=(0,A.default)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"android"!==x.default.OS){e.next=6;break}return e.next=4,(0,Y.requestNotifications)(["alert","badge","sound"]);case 4:e.next=8;break;case 6:return e.next=8,M().requestPermission();case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("Request permission",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),u=function(){var t=(0,A.default)(h().mark((function t(n){var r,a;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("web"!==x.default.OS){t.next=4;break}t.t0="web",t.next=7;break;case 4:return t.next=6,(0,Z.getUniqueId)();case 6:t.t0=t.sent;case 7:if(a=t.t0,n){t.next=10;break}return t.abrupt("return");case 10:return t.abrupt("return",X().collection("DeviceTokens").doc(e).set(((r={})[a]=n,r),{merge:!0}));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),c=function(){var e=(0,A.default)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=0),e.prev=1,e.next=4,M().getToken();case 4:if(n=e.sent){e.next=9;break}throw new Error("missing_token");case 9:console.log("Messaging token found!"),u(n);case 11:e.next=20;break;case 13:if(e.prev=13,e.t0=e.catch(1),console.log("Manage token error",e.t0),!(t<4)){e.next=20;break}return e.next=19,new Promise((function(e){return setTimeout(e,2e3)}));case 19:return e.abrupt("return",c(t+1));case 20:"function"===typeof r.current&&r.current(),r.current=M().onTokenRefresh(u);case 22:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=(0,A.default)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("web"!==x.default.OS){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,M().getInitialNotification();case 4:(t=e.sent)&&C(Q(t));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){"function"===typeof t.current&&(console.log("Unsubscribing from foreground notifications"),t.current());try{t.current=M().onMessage(g),console.log("Subscribed to foreground notifications")}catch(e){return void console.log("Forground notification subscription error",e)}"web"===x.default.OS?o.configure({onNotification:function(e){var t=Q(e);C(t)}}):j.configure({onNotification:function(e){var t,n=function(e){var t=e.title,n=void 0===t?"":t,r=e.message,a=e.userInfo,o=e.data;return{id:e.id||o.id||K(),title:n,message:"string"===typeof r?r:"",data:o||a}}(e);(null!=(t=n.data)&&t.localNotification||e.foreground&&e.userInteraction)&&C(n),e.finish(W.default.FetchResult.NoData)},popInitialNotification:!1})},g=function(e){var t;if(e&&(null==(t=e.data)||!t["af-uinstall-tracking"])){var n=Q(e),r=n.data,i=n.message,s=n.title,l=n.id,u=x.default.select({default:e.messageId,web:e.fcmMessageId});if(console.log("REMOTE MESSAGE",e),u){if(a.current.has(u))return;a.current.add(u)}r.type&&["challenge-update"].includes(r.type)||("web"===x.default.OS?o.localNotification(e):j.localNotification({channelId:Dn,title:s,message:i,userInfo:(0,p.default)({},r,{id:l,localNotification:!0}),smallIcon:"ic_notification",color:I.palette.primary600}))}},v=function(){"web"!==x.default.OS&&("function"===typeof n.current&&n.current(),n.current=M().onNotificationOpenedApp((function(e){return C(Q(e))})))},C=function(){var e=(0,A.default)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.data.type;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){t.current&&t.current(),n.current&&n.current(),r.current&&r.current()},b=function(e){"ios"===x.default.OS&&W.default.getDeliveredNotifications((function(t){var n=[],r=!0;t.forEach((function(t){var a,o,i=t.userInfo.chatId;"string"===typeof i&&(i&&i===e?n.push(t.identifier):"announcement_added"!==(null==(a=t.userInfo)?void 0:a.type)&&"chat_message_received"!==(null==(o=t.userInfo)?void 0:o.type)||(r=!1))})),n.length&&W.default.removeDeliveredNotifications(n),r&&j.setApplicationIconBadgeNumber(0)}))};return null},_n=n(34245),Pn=n(20671);var On=["tx","text","txOptions","style","pressedStyle","textStyle","pressedTextStyle","children","RightAccessory","LeftAccessory"];function Nn(e){var t=e.tx,n=e.text,r=e.txOptions,a=e.style,o=e.pressedStyle,i=e.textStyle,s=e.pressedTextStyle,l=e.children,u=e.RightAccessory,c=e.LeftAccessory,d=(0,Bt.default)(e,On),m=e.preset&&zn[e.preset]?e.preset:"default";function A(e){var t=e.pressed;return[Hn[m],i,!!t&&[Un[m],s]]}return f.createElement(qt.default,(0,p.default)({style:function(e){var t=e.pressed;return[zn[m],a,!!t&&[Fn[m],o]]},accessibilityRole:"button"},d),(function(e){return f.createElement(f.Fragment,null,!!c&&f.createElement(c,{style:Wn,pressableState:e}),f.createElement(zt,{tx:t,text:n,txOptions:r,style:A(e)},l),!!u&&f.createElement(u,{style:jn,pressableState:e}))}))}var Mn={minHeight:56,borderRadius:4,justifyContent:"center",alignItems:"center",flexDirection:"row",paddingVertical:D.sm,paddingHorizontal:D.sm,overflow:"hidden"},Bn={fontSize:16,lineHeight:20,fontFamily:O.primary.medium,textAlign:"center",flexShrink:1,flexGrow:0,zIndex:2},jn={marginStart:D.xs,zIndex:1},Wn={marginEnd:D.xs,zIndex:1},zn={default:[Mn,{borderWidth:1,borderColor:I.border,backgroundColor:I.palette.neutral300}],filled:[Mn,{backgroundColor:I.palette.primary500}],reversed:[Mn,{backgroundColor:I.palette.neutral800}]},Hn={default:Bn,filled:[Bn,{color:I.palette.neutral100}],reversed:[Bn,{color:I.palette.neutral100}]},Fn={default:{backgroundColor:I.palette.neutral400},filled:{backgroundColor:I.palette.primary600},reversed:{backgroundColor:I.palette.neutral700}},Un={default:{opacity:.9},filled:{opacity:.9},reversed:{opacity:.9}},Vn=n(62358),Kn=n(43774),Gn=n(7419),qn=n(63946),Qn=n(22292),Yn=n(77387),Xn=n(49681),Zn=function(e){function t(t){var n;return(n=e.call(this,t)||this).animation=new Gn.default.Value(0),n.viewRef=f.createRef(),n.keyboardDidShowListener=void 0,n.keyboardDidHideListener=void 0,n.keyboardHideTimeout=void 0,n.keyboardDidShow=function(e){var t=e.endCoordinates.height;n.keyboardHideTimeout&&clearTimeout(n.keyboardHideTimeout),n.props.onKeyboardShow&&n.props.onKeyboardShow(),n.setState({keyboardVisible:!0,keyboardHeight:t})},n.keyboardDidHide=function(e){n.props.onKeyboardHide&&n.props.onKeyboardHide(),n.keyboardHideTimeout=setTimeout((function(){return n.setState({keyboardVisible:!1})}),100)},n.animateUp=function(){Gn.default.timing(n.animation,{toValue:1,duration:300,useNativeDriver:!0}).start()},n.animateDown=function(){Gn.default.timing(n.animation,{toValue:0,duration:200,useNativeDriver:!0}).start()},n.onLayout=function(){n.viewRef.current&&n.viewRef.current.measure((function(e,t,r,a,o,i){n.setState({viewHeight:a,viewPosition:i+(n.state.keyboardVisible?n.calcOverlap(n.state.keyboardHeight,n.state.viewHeight,n.state.viewPosition)-(n.props.scrollOffset||0):0)})}))},n.calcOverlap=function(e,t,r){var a=n.props.minY,o=void 0===a?0:a,i=e-(At.default.get("window").height-(t+r)+(n.props.scrollOffset||0)),s=r-i<o?r-i+o:0;return Math.max(0,i-s)},n.state={keyboardVisible:!1,keyboardHeight:0,viewHeight:0,viewPosition:0,overlap:0},n}(0,Yn.default)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e,t){(!e.enabled&&this.props.enabled&&this.state.keyboardVisible||this.props.enabled&&!t.keyboardVisible&&this.state.keyboardVisible)&&this.animateUp(),(e.enabled!==this.props.enabled&&!this.props.enabled||!this.state.keyboardVisible&&t.keyboardVisible)&&this.animateDown()},n.componentDidMount=function(){this.keyboardDidShowListener=Xn.default.addListener("ios"===x.default.OS?"keyboardWillShow":"keyboardDidShow",this.keyboardDidShow),this.keyboardDidHideListener=Xn.default.addListener("ios"===x.default.OS?"keyboardWillHide":"keyboardDidHide",this.keyboardDidHide)},n.componentWillUnmount=function(){this.keyboardDidShowListener&&this.keyboardDidShowListener.remove(),this.keyboardDidHideListener&&this.keyboardDidHideListener.remove(),this.keyboardHideTimeout&&clearTimeout(this.keyboardHideTimeout)},n.render=function(){var e=this.props.style,t=this.state,n=t.viewHeight,r=t.viewPosition,a=t.keyboardHeight,o=this.calcOverlap(a,n,r),i=this.animation.interpolate({inputRange:[0,1],outputRange:[0,-o]});return f.createElement(Gn.default.View,{ref:this.viewRef,style:[e,{transform:[{translateY:i}]}],onLayout:this.onLayout},this.props.children)},t}(f.PureComponent);Zn.defaultProps={enabled:!0,scrollOffset:0,minY:0};var $n=(0,f.forwardRef)((function(e,t){var n=e.tapToClose,r=void 0===n||n,a=e.children,o=e.onDismiss,i=e.modalStyle,s=e.contentStyle,l=(0,qn.default)().height,u=(0,f.useState)({visible:!1,hideContent:!0}),c=u[0],d=c.visible,m=c.hideContent,A=u[1],g=(0,f.useCallback)((function(){return A({visible:!0,hideContent:!1})}),[]),h=(0,f.useCallback)((function(){return A({visible:!1,hideContent:!1})}),[]);(0,f.useImperativeHandle)(t,(function(){return{open:g,close:h}}));var v=(0,f.useRef)(new Gn.default.Value(d?1:0)),C=function(){A({visible:!1,hideContent:!0}),o&&o()};ea(d,(function(e){Gn.default.timing(v.current,{toValue:e?1:0,useNativeDriver:!0,duration:200}).start(e?void 0:C)}));var y=(0,f.useMemo)((function(){return(0,p.default)({flex:1,opacity:v.current,alignItems:"center",justifyContent:"center",zIndex:99},i)}),[i]);return f.createElement(Qn.Portal,null,f.createElement(Gn.default.View,{style:y,pointerEvents:d?"auto":"none"},m&&!d?null:f.createElement(f.Fragment,null,f.createElement(er,{enabled:r,onPress:h}),f.createElement(dt.default,{style:ar.childWrapper,pointerEvents:"box-none"},f.createElement(Jn,{maxHeight:.9*l,style:s},a)))))})),Jn=function(e){var t=e.style,n=e.maxHeight,r=e.children,a=e.HeaderComponent,o=void 0===a?null:a;return f.createElement(Zn,{enabled:nr,style:[ar.childContainer,{maxHeight:n,maxWidth:Et},t],scrollOffset:rr},f.createElement(dt.default,{style:{maxHeight:n}},o,f.createElement(cn.default,{bounces:!1,keyboardShouldPersistTaps:"handled",style:ar.scrollStyle,showsVerticalScrollIndicator:!1},r)))},er=function(e){var t=e.enabled,n=e.onPress,r=e.children,a=e.style;return f.createElement(qt.default,{style:[tr.background,a],onPress:n,disabled:!t},r)},tr=ct.default.create({background:{alignItems:"center",backgroundColor:"rgba(0,0,0,0.3)",bottom:0,justifyContent:"center",left:0,padding:D.md,position:"absolute",right:0,top:0}}),nr="ios"===x.default.OS,rr=-D.md,ar=ct.default.create({childContainer:{backgroundColor:x.default.select({ios:"rgba(255,255,255,0.98)",default:"white"}),borderRadius:mt,maxWidth:Et,width:"100%"},childWrapper:{alignItems:"center",bottom:0,justifyContent:"center",left:0,padding:D.md,position:"absolute",right:0,top:0},scrollStyle:{flexGrow:0}});const or=$n;var ir=["onRequestClose","tapToDismiss"],sr=function(e){var t=e.onPress,n=e.text,r=e.cancel,a=e.loading,o=e.success,i=e.successIcon,s=r?I.error:I.text;return f.createElement(hn.default,{onPress:t},f.createElement(dt.default,{style:[Lt,Tt,{padding:15}]},f.createElement(zt,{style:{color:s,textAlign:"center",flex:1}},n),!!a&&f.createElement(Kn.default,{style:{position:"absolute",right:15},color:s}),!a&&!!o&&!!i&&f.createElement(Xt,{icon:i,size:25,color:s,containerStyle:{position:"absolute",right:15}})))},lr=[{text:"OK"}],ur=function(e){var t=e.onRequestClose,n=e.buttons,r=void 0===n?lr:n,a=e.title,o=e.message,i=e.customContentRenderer,s=e.titleIcon,l=e.renderAfterHeader;return f.createElement(dt.default,{style:{paddingHorizontal:D.xs}},"function"===typeof i?i():f.createElement(dt.default,{style:{padding:D.md,alignItems:"center"}},f.createElement(dt.default,{style:Tt},f.createElement(zt,{preset:"subheading"},a),!!s&&f.createElement(Xt,{icon:s,color:I.primary,size:25,style:{marginLeft:7}})),f.createElement(zt,{style:{marginTop:D.xxs,textAlign:"center"}},o)),l&&l(),r.map((function(e,n){return f.createElement(sr,{key:n.toString(),onPress:function(){"function"===typeof e.onPress&&e.onPress(),"function"===typeof t&&t()},text:e.text,cancel:e.cancel||"destructive"===e.style})})))},cr=(0,f.forwardRef)((function(e,t){var n=e.onRequestClose,r=e.tapToDismiss,a=(0,Bt.default)(e,ir);return f.createElement(or,{ref:t,tapToClose:r,modalStyle:dr,contentStyle:fr},f.createElement(ur,(0,p.default)({},a,{onRequestClose:n})))})),dr={zIndex:999},fr={maxWidth:Et-2*D.md};const mr=cr;var pr=(0,f.createContext)({alert:function(e,t,n,r){}}),Ar=[{text:"OK",onPress:function(){}}],gr={buttons:Ar,title:"",message:"",customContentRenderer:null,titleIcon:null,renderAfterHeader:null,tapToDismiss:!1};const hr=function(e){var t=e.children,n=(0,f.useRef)(null),r=(0,f.useState)(gr),a=r[0],o=r[1],i=(0,f.useCallback)((function(e,t,n){return void 0===n&&(n=Ar),Vn.default.alert(e,t,n)}),[]),s=(0,f.useCallback)((function(e,t,r,a){var i=r?r.reverse():[{text:"OK",onPress:function(){}}];o((0,p.default)({title:e,message:t,buttons:i},a)),setTimeout((function(){var e;return null==(e=n.current)?void 0:e.open()}),1)}),[]),l=(0,f.useMemo)((function(){return{alert:x.default.select({web:s,default:i})}}),[i,s]);return f.createElement(pr.Provider,{value:l},t,"web"===x.default.OS&&f.createElement(mr,(0,p.default)({},a,{ref:n,onRequestClose:function(){var e;null==(e=n.current)||e.close()}})))};var vr=function(){return(0,f.useContext)(pr)},Cr={color:"#fff"},yr={backgroundColor:"black",padding:15,position:"absolute",alignSelf:"center",marginRight:D.md,marginLeft:D.md,borderRadius:5,zIndex:9999};const br=function(e){var t=e.text,n=e.visible,r=e.topOffset,a=(0,m.useSafeAreaInsets)();return n?f.createElement(dt.default,{style:[yr,{bottom:r||20+a.bottom}]},f.createElement(zt,{style:Cr},t)):null};var Er=(0,f.createContext)({show:function(e,t){}}),xr={visible:!1,text:""};const wr=function(e){var t=e.children,n=e.topOffset,r=(0,f.useState)(xr),a=r[0],o=r[1],i=a.visible,s=a.text,l=(0,f.useCallback)((function(e,t){o({text:e,visible:!0}),setTimeout((function(){return o(xr)}),t||3e3)}),[]),u=(0,f.useMemo)((function(){return{show:l}}),[l]);return f.createElement(Er.Provider,{value:u},t,f.createElement(br,{visible:i,text:s,topOffset:n}))};var Sr=n(29724);(function(){var e=(0,A.default)(h().mark((function e(t){var n,r,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.toUpperCase(),e.next=3,X().collection("Users").where("usernameUpperCase","==",n).get();case 3:return r=e.sent,a=[],r.forEach((function(e){var t=e.data();t&&a.push(t)})),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))})(),n(4040);const kr=N.default.storage;var Tr=function(e,t,n,r){var a=kr().ref(e);return"web"===x.default.OS&&n?a.put(n,r?{customMetadata:r}:void 0):a.putFile(t,r?{customMetadata:r}:void 0)},Rr=x.default.select({ios:Y.PERMISSIONS.IOS.CAMERA,default:Y.PERMISSIONS.ANDROID.CAMERA}),Ir=x.default.select({ios:Y.PERMISSIONS.IOS.PHOTO_LIBRARY,default:Number(x.default.Version)>=33?Y.PERMISSIONS.ANDROID.READ_MEDIA_IMAGES:Y.PERMISSIONS.ANDROID.READ_EXTERNAL_STORAGE}),Dr=x.default.select({ios:Y.PERMISSIONS.IOS.LOCATION_WHEN_IN_USE,default:Y.PERMISSIONS.ANDROID.ACCESS_COARSE_LOCATION}),Lr=function(){var e=(0,A.default)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",we.default.setItem(t,"TRUE"));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_r=function(){var e=(0,A.default)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",we.default.getItem(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Pr=function(){var e=(0,A.default)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,Y.check)(t);case 3:return n=e.sent,e.abrupt("return",Nr(n,t,!0));case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",void 0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),Or=function(){var e=(0,A.default)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Y.request)(t);case 2:return n=e.sent,e.abrupt("return",Nr(n,t,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Nr=function(){var e=(0,A.default)(h().mark((function e(t,n,r){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next=e.t0===Y.RESULTS.UNAVAILABLE?3:e.t0===Y.RESULTS.DENIED?8:e.t0===Y.RESULTS.LIMITED?11:e.t0===Y.RESULTS.GRANTED?13:e.t0===Y.RESULTS.BLOCKED?15:17;break;case 3:if(!r){e.next=6;break}return console.log("Requesting"),e.abrupt("return",Or(n));case 6:return console.log("This feature is not available (on this device / in this context)"),e.abrupt("return",t);case 8:if(!r){e.next=10;break}return e.abrupt("return",Or(n));case 10:return e.abrupt("return",t);case 11:return console.log("The permission is limited: some actions are possible"),e.abrupt("return",t);case 13:return console.log("The permission is granted"),e.abrupt("return",t);case 15:return console.log("The permission is denied and not requestable anymore"),e.abrupt("return",t);case 17:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Mr=function(){var e=vr(),t=function(e){switch(e){case Rr:return"Missing camera permission";case Ir:return"Missing "+x.default.select({android:"storage",default:"photo gallery"})+" permission";case Dr:return"Missing location permission";default:return"Missing permission"}},n=function(e){switch(e){case Rr:return"You can enable Delivfree camera permissions in your phone's settings";case Ir:return"You can enable DelivFree "+x.default.select({android:"storage",default:"photo gallery"})+" permissions in your phone's settings.";case Dr:return"You can enable DelivFree location permissions in your phone's settings";default:return"Missing permission"}},r=function(){var r=(0,A.default)(h().mark((function r(a){var o;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Pr(a);case 2:o=r.sent,r.t0=o,r.next=r.t0===Y.RESULTS.DENIED?6:r.t0===Y.RESULTS.UNAVAILABLE?7:r.t0===Y.RESULTS.GRANTED||r.t0===Y.RESULTS.LIMITED?12:r.t0===Y.RESULTS.BLOCKED?13:27;break;case 6:return r.abrupt("return",!1);case 7:if(a!==Dr){r.next=11;break}return r.abrupt("return",e.alert("Location Services Unavailable","Ensure location services are enabled in your device settings."));case 11:return r.abrupt("return",e.alert("Feature unavailable","We could not complete your request as your device does not support this feature."));case 12:return r.abrupt("return",!0);case 13:return r.prev=13,r.next=16,_r(a);case 16:if(r.sent){r.next=20;break}return Lr(a),r.abrupt("return",!1);case 20:r.next=25;break;case 22:r.prev=22,r.t1=r.catch(13),console.log("Failed to handle stored permission denied",r.t1);case 25:return e.alert(t(a),n(a),[{text:"Later",onPress:function(){}},{text:"Enable",onPress:function(){try{H.default.openSettings()}catch(t){e.alert("There was a problem","We could not open your settings. Please navigate to your phone's setting to enable this permission for DelivFree"),console.log("Failed to open settings",t)}}}]),r.abrupt("return",!1);case 27:return r.abrupt("return",!1);case 28:case"end":return r.stop()}}),r,null,[[13,22]])})));return function(e){return r.apply(this,arguments)}}();return{canUse:r}};const Br={openPicker:function(){return null}};var jr=n(21454),Wr=n(97956),zr=function(e,t){if(!e.canceled){if(!e.assets)throw new Error("default_error");return e.assets.map((function(e){return e&&e.uri&&e.width&&e.height?{url:e.uri,width:e.width,height:e.height,type:t}:null})).filter((function(e){return null!==e}))}},Hr=function(){var e=(0,A.default)(h().mark((function e(t){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t={}),n=(0,p.default)({selectionLimit:1,allowsMultipleSelection:!1,quality:.9,mediaTypes:jr.MediaTypeOptions.Images},t),e.next=4,(0,Wr.launchImageLibraryAsync)(n);case 4:return r=e.sent,e.abrupt("return",zr(r,"image"));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Fr=(function(){var e=(0,A.default)(h().mark((function e(t,n,r){var a,o,i,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n={}),void 0===r&&(r={}),a=(0,p.default)({width:360,height:360,cropping:!0,mediaType:"photo"},n),e.prev=3,"library"!==t){e.next=22;break}return e.next=7,Hr((0,p.default)({},r,{selectionLimit:1}));case 7:if((o=e.sent)&&o.length){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,new Promise((function(e){setTimeout(e,500)}));case 12:return e.next=14,Br.openCropper((0,p.default)({},a,{path:o[0].url}));case 14:if(!(i=e.sent).path){e.next=19;break}return e.abrupt("return",i.path);case 19:case 29:throw new Error("missing_path");case 20:e.next=30;break;case 22:return e.next=24,Br.openCamera(a);case 24:if(!(s=e.sent).path){e.next=29;break}return e.abrupt("return",s.path);case 30:e.next=37;break;case 32:if(e.prev=32,e.t0=e.catch(3),!e.t0||"E_PICKER_CANCELLED"!==e.t0.code){e.next=36;break}return e.abrupt("return");case 36:throw e.t0;case 37:case"end":return e.stop()}}),e,null,[[3,32]])})))}(),function(){var e=(0,qn.default)(),t="android"===x.default.OS?56:64;if("ios"===x.default.OS){var n=e.width>e.height;t=x.default.isPad||x.default.isTV?50:n?32:44}return t}),Ur="SHOWN",Vr=n(73856);function Kr(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Gr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gr(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Gr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var qr,Qr=[{locations:[{id:K(),longitude:-122.66396940219714,latitude:49.167837600169285}],name:"Pizza Hut"},{locations:[{id:K(),longitude:-122.65882973466185,latitude:49.163912272918175}],name:"Dominos"}],Yr=(function(){var e=(0,A.default)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=X().collection("Restaurants"),n=X().collection("RestaurantLocations"),e.next=4,Promise.all(Qr.map(function(){var e=(0,A.default)(h().mark((function e(r){var a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=X().collection("Restaurants").doc().id,o=r.locations.map((function(e){var t=Vr.geohashForLocation([e.latitude,e.longitude]);return(0,p.default)({},e,{restaurantId:a,geohash:t})})),e.next=4,t.doc(a).set(r);case 4:return e.next=6,Promise.all(o.map((function(e){return n.doc(e.id).set(e)})));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,A.default)(h().mark((function e(t,n,r){var a,o,i,s,l,u,c,d,f,m,p,A,g,v,C,y,b,E,x,w,S,k,T;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(void 0===n&&(n={}),void 0===r&&(r=10),o=(a=n).cuisine,i=a.limit,s=a.keyword,l=[t.latitude,t.longitude],u=1e3*r,c=Vr.geohashQueryBounds(l,u),d=[],f=Kr(c);!(m=f()).done;)p=m.value,A=X().collection("RestaurantLocations").orderBy("geohash").startAt(p[0]).endAt(p[1]),o&&(A=A.where("cuisines","array-contains",o)),i&&(A=A.limit(i)),s&&(A=A.where("keywords","array-contains",s.toLowerCase())),d.push(A.get());return e.next=10,Promise.all(d);case 10:for(g=e.sent,v=[],C=Kr(g);!(y=C()).done;)for(b=y.value,E=Kr(b.docs);!(x=E()).done;)w=x.value,S=w.get("latitude"),k=w.get("longitude"),T=Vr.distanceBetween([S,k],l),1e3*T<=u&&v.push(w.data());return e.abrupt("return",v);case 14:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),Xr=function(){return qr||(qr=new Zr),qr},Zr=function(){var e=this;this.cache={},this.listCache={},this.updateCache=function(t,n){e.listCache[t]=n,e.cache=(0,p.default)({},e.cache,n.reduce((function(e,t){var n;return(0,p.default)({},e,((n={})[t.id]=t,n))}),{}))}},$r=n(53451),Jr=n(22607),ea=function(e,t){var n=(0,f.useRef)(e);(0,f.useEffect)((function(){n.current!==e&&"function"===typeof t&&t(e,n.current),n.current=e}),[e])};function ta(e){var t=e.backgroundColor,n=void 0===t?I.background:t,r=e.LeftActionComponent,a=e.leftIcon,o=e.leftIconColor,i=e.leftText,s=e.leftTx,l=e.leftTxOptions,u=e.onLeftPress,d=e.onRightPress,p=e.RightActionComponent,A=e.rightIcon,g=e.rightIconColor,h=e.rightText,v=e.rightTx,C=e.rightTxOptions,y=e.title,b=e.titleMode,E=void 0===b?"center":b,x=e.titleTx,w=e.titleTxOptions,S=e.titleContainerStyle,k=e.style,T=e.titleStyle,R=e.containerStyle,D=e.HeaderTitle,L=(0,m.useSafeAreaInsets)(),_=Fr(),P=x?c(x,w):y;return f.createElement(dt.default,{style:[aa,{paddingTop:L.top,backgroundColor:n},R]},f.createElement(dt.default,{style:[ra,{height:_},k]},f.createElement(na,{tx:s,text:i,icon:a,iconColor:o,onPress:u,txOptions:l,backgroundColor:n,ActionComponent:r}),(!!P||!!D)&&f.createElement(dt.default,{style:["center"===E&&ca,"flex"===E&&da,S],pointerEvents:"none"},null!=D?D:f.createElement(zt,{weight:"medium",size:"md",text:P,style:[oa,T]})),f.createElement(na,{tx:v,text:h,icon:A,iconColor:g,onPress:d,txOptions:C,backgroundColor:n,ActionComponent:p})))}function na(e){var t=e.backgroundColor,n=e.icon,r=e.text,a=e.tx,o=e.txOptions,i=e.onPress,s=e.ActionComponent,l=e.iconColor,d=a?c(a,o):r;return s||(d?f.createElement(hn.default,{style:[ia,{backgroundColor:t}],onPress:i,disabled:!i,activeOpacity:.8},f.createElement(zt,{weight:"medium",size:"md",text:d,style:sa})):n?f.createElement(Xt,{size:24,icon:n,color:l,onPress:i,containerStyle:[la,{backgroundColor:t}],style:u?{transform:[{rotate:"180deg"}]}:{}}):f.createElement(dt.default,{style:[ua,{backgroundColor:t}]}))}var ra={flexDirection:"row",alignItems:"center",justifyContent:"space-between"},aa={width:"100%",zIndex:10},oa={textAlign:"center",fontFamily:O.secondary.semiBold},ia={flexGrow:0,alignItems:"center",justifyContent:"center",height:"100%",paddingHorizontal:D.md,zIndex:2},sa={color:I.tint},la={flexGrow:0,alignItems:"center",justifyContent:"center",height:"100%",paddingHorizontal:D.md,zIndex:2},ua={width:16},ca={alignItems:"center",justifyContent:"center",height:"100%",width:"100%",position:"absolute",paddingHorizontal:D.xxl,zIndex:1},da={justifyContent:"center",flexGrow:1},fa=["bottomSeparator","children","height","LeftComponent","leftIcon","leftIconColor","RightComponent","rightIcon","rightIconColor","style","text","TextProps","topSeparator","tx","txOptions","textStyle","containerStyle"];function ma(e){var t=e.bottomSeparator,n=e.children,r=e.height,a=void 0===r?56:r,o=e.LeftComponent,i=e.leftIcon,s=e.leftIconColor,l=e.RightComponent,u=e.rightIcon,c=e.rightIconColor,d=e.style,m=e.text,A=e.TextProps,g=e.topSeparator,h=e.tx,v=e.txOptions,C=e.textStyle,y=e.containerStyle,b=(0,Bt.default)(e,fa),E=[ha,C,null==A?void 0:A.style],x=[g&&Aa,t&&ga,y],w=[va,{minHeight:a},d];return f.createElement(dt.default,{style:x},f.createElement(hn.default,(0,p.default)({},b,{style:w}),f.createElement(pa,{side:"left",size:a,icon:i,iconColor:s,Component:o}),f.createElement(zt,(0,p.default)({},A,{tx:h,text:m,txOptions:v,style:E}),n),f.createElement(pa,{side:"right",size:a,icon:u,iconColor:c,Component:l})))}function pa(e){var t=e.icon,n=e.Component,r=e.iconColor,a=e.size,o=e.side,i=[Ca];return n||(t?f.createElement(Xt,{size:24,icon:t,color:r,containerStyle:[i,"left"===o&&ya,"right"===o&&ba,{height:a}]}):null)}var Aa={borderTopWidth:1,borderTopColor:I.separator},ga={borderBottomWidth:1,borderBottomColor:I.separator},ha={paddingVertical:D.xs,alignSelf:"center",flexGrow:1,flexShrink:1},va={flexDirection:"row",alignItems:"flex-start"},Ca={justifyContent:"center",alignItems:"center",flexGrow:0},ya={marginEnd:D.md},ba={marginStart:D.md},Ea=n(70497),xa=n(81721),wa={top:"Top",bottom:"Bottom",left:"Start",right:"End",start:"Start",end:"End"},Sa={start:"left",end:"right"};var ka=n(20454),Ta=n(25300),Ra=n(28339),Ia=n(63606),Da="has-rated-async",La="defer-rating",_a=function(){var e=(0,A.default)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,we.default.getItem(Da);case 3:if(t=e.sent){e.next=10;break}return e.next=7,we.default.setItem(Da,La);case 7:case 17:return e.abrupt("return",!1);case 10:if(t!==La){e.next=17;break}return e.next=13,we.default.getItem("coins_discount_delay_async_key");case 13:return n=e.sent,e.abrupt("return",n===Ur);case 18:e.next=24;break;case 20:return e.prev=20,e.t0=e.catch(0),console.log("Failed to check has rated: ",e.t0),e.abrupt("return",!1);case 24:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(){return e.apply(this,arguments)}}(),Pa=function(){var e=(0,A.default)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,we.default.setItem(Da,"has-rated");case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("Failed to set has rated: ",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),Oa=function(e,t){void 0===e&&(e=!1);var n={AppleAppID:"6449789072",GooglePackageName:"com.magnify.trivia",preferredAndroidMarket:Ia.AndroidMarket.Google,preferInApp:e,openAppStoreIfInAppFails:!e};Ia.default.rate(n,(function(e,n){console.log(e,n),e&&Pa(),n&&console.log("Example page Rate.rate() error: "+n),t&&t(e,n)}))};const Na=Pn.default;var Ma=[{text:"Sign up as a Vendor"},{text:"Sign up as a Driver"},{text:"Rate App",include:function(){return"web"!==x.default.OS}},{text:"Settings",route:"Settings"}],Ba=[{text:"Home",route:"Home"},{text:"Orders",route:"Orders"},{text:"Locations",route:"Locations"},{text:"Drivers",route:"Drivers"},{text:"Subscription",route:"Subscription"},{text:"Profile",route:"Profile"},{text:"Rate App",include:function(){return"web"!==x.default.OS}},{text:"Settings",route:"Settings"}],ja=[{text:"Orders",route:"Orders"},{text:"Subscription",route:"Subscription"},{text:"Profile",route:"Profile"},{text:"Rate App",include:function(){return"web"!==x.default.OS}},{text:"Settings",route:"Settings"}],Wa=function(e){var t=e.navigation,r=e.onItemPress,a=(0,m.useSafeAreaInsets)(),o=Fr(),i=it((function(e){return e.appConfig.userType})),s=(0,f.useMemo)((function(){return"vendor"===i?Ba:"driver"===i?ja:Ma}),[i]),l=(0,f.useMemo)((function(){var e=t.getState();return e.routes[e.index].name}),[t]),u=(0,f.useMemo)((function(){return function(){return f.createElement(dt.default,{style:Va},f.createElement(Na,{source:n(72170),style:{height:o,width:o*za},resizeMode:"contain"}))}}),[o]),c=(0,f.useMemo)((function(){return s.filter((function(e){return!e.include||e.include()}))}),[]);return f.createElement(Ra.default,{style:Fa,contentContainerStyle:[Ua,{paddingTop:a.top,paddingLeft:a.left+D.md,paddingRight:D.md}],data:c,keyExtractor:function(e){return e.text},renderItem:function(e){var n=e.item,a=e.index;return f.createElement(Ha,{item:n,index:a,navigation:t,onItemPress:r,activeRoute:l})},showsVerticalScrollIndicator:!1,ListHeaderComponent:u})},za=1638/822,Ha=function(e){var t=e.item,n=e.index,r=e.navigation,a=e.onItemPress,o=e.activeRoute,i="Rate App"===t.text;return f.createElement(ma,{key:"section"+n+"-"+t.text,text:t.text,textStyle:"route"in t&&t.route===o?{color:I.primary}:void 0,onPress:function(){if(i)Oa(!1);else if(t.route)return a(),r.navigate(t.route,t.params)}})},Fa={flex:1},Ua={flexGrow:1},Va={alignSelf:"flex-start",justifyContent:"center",paddingTop:D.md,paddingBottom:D.md},Ka=vn.default(qt.default),Ga=(0,f.createContext)({drawerRef:{current:null},open:!1}),qa={code:"function anonymous(){const{largeScreenLayout,interpolate,openAnimation,drawerWidth}=this.__closure;return{left:!largeScreenLayout?interpolate(openAnimation.value,[0,1],[-drawerWidth,0]):0};}",location:"/Users/morgantrudeau/projects/delivfree/app/components/Drawer.web.tsx",sourceMap:'{"version":3,"names":["anonymous","largeScreenLayout","interpolate","openAnimation","drawerWidth","__closure","left","value"],"sources":["/Users/morgantrudeau/projects/delivfree/app/components/Drawer.web.tsx"],"mappings":"AA6EI,SAAAA,UAAA,QAAAC,iBAAA,CAAAC,WAAA,CAAAC,aAAA,CAAAC,WAAA,OAAAC,SAAA,OAAO,CACLC,IAAI,CAAE,CAACL,iBAAiB,CACpBC,WAAW,CAACC,aAAa,CAACI,KAAK,CAAE,CAAC,CAAC,CAAE,CAAC,CAAC,CAAE,CAAC,CAACH,WAAW,CAAE,CAAC,CAAC,CAAC,CAC3D,CACN,CAAC"}',version:"3.5.4"},Qa={code:"function anonymous(){const{openAnimation}=this.__closure;return{opacity:openAnimation.value};}",location:"/Users/morgantrudeau/projects/delivfree/app/components/Drawer.web.tsx",sourceMap:'{"version":3,"names":["anonymous","openAnimation","__closure","opacity","value"],"sources":["/Users/morgantrudeau/projects/delivfree/app/components/Drawer.web.tsx"],"mappings":"AAsFI,SAAAA,UAAA,QAAAC,aAAA,OAAAC,SAAA,OAAO,CAAEC,OAAO,CAAEF,aAAa,CAACG,KAAM,CAAC"}',version:"3.5.4"},Ya={code:'function anonymous(){const{interpolate,openAnimation}=this.__closure;return{flex:1,overflow:"hidden",transform:[{translateX:interpolate(openAnimation.value,[0,1],[0,100])}]};}',location:"/Users/morgantrudeau/projects/delivfree/app/components/Drawer.web.tsx",sourceMap:'{"version":3,"names":["anonymous","interpolate","openAnimation","__closure","flex","overflow","transform","translateX","value"],"sources":["/Users/morgantrudeau/projects/delivfree/app/components/Drawer.web.tsx"],"mappings":"AA0F6C,SAAAA,UAAA,QAAAC,WAAA,CAAAC,aAAA,OAAAC,SAAA,OAAO,CAChDC,IAAI,CAAE,CAAC,CACPC,QAAQ,CAAE,QAAQ,CAClBC,SAAS,CAAE,CACT,CAAEC,UAAU,CAAEN,WAAW,CAACC,aAAa,CAACM,KAAK,CAAE,CAAC,CAAC,CAAE,CAAC,CAAC,CAAE,CAAC,CAAC,CAAE,GAAG,CAAC,CAAE,CAAC,CAEtE,CAAC"}',version:"3.5.4"},Xa=function(e){var t=e.children,r=e.navigation,a=dn().width,o=a>gt,i=(0,f.useState)(!1),s=i[0],l=i[1],u=(0,fn.useSharedValue)(0);(0,f.useEffect)((function(){o&&s&&c()}),[s,o]);var c=function(){u.value=(0,mn.withTiming)(0),l(!1)},d=(0,f.useRef)({openDrawer:function(){u.value=(0,mn.withTiming)(1),l(!0)},closeDrawer:c}),m=Math.max(300,.2*a),p=(0,pn.useAnimatedStyle)(function(){var e=[new n.g.Error,-5,-27],t=function(){return{left:o?0:(0,An.interpolate)(u.value,[0,1],[-m,0])}};return t.__closure={largeScreenLayout:o,interpolate:An.interpolate,openAnimation:u,drawerWidth:m},t.__initData=qa,t.__workletHash=0xb74a41fa15b,t.__stackDetails=e,t}(),[u,m,o]),A=(0,pn.useAnimatedStyle)(function(){var e=[new n.g.Error,-2,-27],t=function(){return{opacity:u.value}};return t.__closure={openAnimation:u},t.__initData=Qa,t.__workletHash=0xd7b461ee8dc,t.__stackDetails=e,t}(),[u]),g=(0,pn.useAnimatedStyle)(function(){var e=[new n.g.Error,-3,-27],t=function(){return{flex:1,overflow:"hidden",transform:[{translateX:(0,An.interpolate)(u.value,[0,1],[0,100])}]}};return t.__closure={interpolate:An.interpolate,openAnimation:u},t.__initData=Ya,t.__workletHash=0xa64a53b5990,t.__stackDetails=e,t}());return f.createElement(Ga.Provider,{value:{drawerRef:d,open:s}},f.createElement(dt.default,{style:[Za,{overflow:"hidden"}]},f.createElement(gn.AnimatedView,{style:[$a,{width:m,zIndex:500,position:o?void 0:"absolute"},p]},f.createElement(dt.default,{style:[Ja,{width:m,zIndex:500}]},f.createElement(Wa,{navigation:r,onItemPress:function(){setTimeout((function(){var e;null==(e=d.current)||e.closeDrawer()}),3e3)}}),!o&&f.createElement(qt.default,{hitSlop:20,style:{position:"absolute",top:D.sm,right:D.sm},onPress:c},f.createElement(Xt,{icon:"close"})))),f.createElement(gn.AnimatedView,{style:g},t),!o&&f.createElement(Ka,{onPress:c,style:[eo,A],pointerEvents:s?"auto":"none"})))},Za={flexDirection:"row",flex:1},$a={width:350,zIndex:1e3},Ja={position:"fixed",width:"100%",height:"100vh",shadowOffset:{width:2,height:0},shadowRadius:4,shadowColor:"#000",shadowOpacity:.1,backgroundColor:I.surface,zIndex:1e3},eo=[ct.default.absoluteFill,{backgroundColor:I.palette.overlay20}],to=vn.default(qt.default),no={code:"function anonymous(){const{interpolate,progress,isRTL,inset}=this.__closure;const translateX=interpolate(progress.value,[0,1],[0,isRTL?60+inset:-(60+inset)]);return{transform:[{translateX:translateX}]};}",location:"/Users/morgantrudeau/projects/delivfree/app/components/DrawerIconButton.tsx",sourceMap:'{"version":3,"names":["anonymous","interpolate","progress","isRTL","inset","__closure","translateX","value","transform"],"sources":["/Users/morgantrudeau/projects/delivfree/app/components/DrawerIconButton.tsx"],"mappings":"AAmCmD,SAAAA,SAAMA,CAAA,QAAAC,WAAA,CAAAC,QAAA,CAAAC,KAAA,CAAAC,KAAA,OAAAC,SAAA,CACrD,KAAM,CAAAC,UAAU,CAAGL,WAAW,CAC5BC,QAAQ,CAACK,KAAK,CACd,CAAC,CAAC,CAAE,CAAC,CAAC,CACN,CAAC,CAAC,CAAEJ,KAAK,CAAG,EAAE,CAAGC,KAAK,CAAG,EAAE,EAAE,CAAGA,KAAK,CAAC,CACxC,CAAC,CAED,MAAO,CACLI,SAAS,CAAE,CAAC,CAAEF,UAAA,CAAAA,UAAW,CAAC,CAC5B,CAAC,CACH"}',version:"3.5.4"},ro={code:'function anonymous(){const{interpolateColor,progress,colors,interpolate,isRTL}=this.__closure;const backgroundColor=interpolateColor(progress.value,[0,1],[colors.text,colors.tint]);const marginStart=interpolate(progress.value,[0,1],[0,-11.5]);const rotate=interpolate(progress.value,[0,1],[0,isRTL?45:-45]);const marginBottom=interpolate(progress.value,[0,1],[0,-2]);const width=interpolate(progress.value,[0,1],[18,12]);return{backgroundColor:backgroundColor,marginStart:marginStart,marginBottom:marginBottom,width:width,transform:[{rotate:rotate+"deg"}]};}',location:"/Users/morgantrudeau/projects/delivfree/app/components/DrawerIconButton.tsx",sourceMap:'{"version":3,"names":["anonymous","interpolateColor","progress","colors","interpolate","isRTL","__closure","backgroundColor","value","text","tint","marginStart","rotate","marginBottom","width","transform"],"sources":["/Users/morgantrudeau/projects/delivfree/app/components/DrawerIconButton.tsx"],"mappings":"AA+CgD,SAAAA,SAAMA,CAAA,QAAAC,gBAAA,CAAAC,QAAA,CAAAC,MAAA,CAAAC,WAAA,CAAAC,KAAA,OAAAC,SAAA,CAClD,KAAM,CAAAC,eAAe,CAAGN,gBAAgB,CACtCC,QAAQ,CAACM,KAAK,CACd,CAAC,CAAC,CAAE,CAAC,CAAC,CACN,CAACL,MAAM,CAACM,IAAI,CAAEN,MAAM,CAACO,IAAI,CAC3B,CAAC,CACD,KAAM,CAAAC,WAAW,CAAGP,WAAW,CAACF,QAAQ,CAACM,KAAK,CAAE,CAAC,CAAC,CAAE,CAAC,CAAC,CAAE,CAAC,CAAC,CAAE,CAAC,IAAI,CAAC,CAAC,CACnE,KAAM,CAAAI,MAAM,CAAGR,WAAW,CAACF,QAAQ,CAACM,KAAK,CAAE,CAAC,CAAC,CAAE,CAAC,CAAC,CAAE,CAAC,CAAC,CAAEH,KAAK,CAAG,EAAE,CAAG,CAAC,EAAE,CAAC,CAAC,CACzE,KAAM,CAAAQ,YAAY,CAAGT,WAAW,CAACF,QAAQ,CAACM,KAAK,CAAE,CAAC,CAAC,CAAE,CAAC,CAAC,CAAE,CAAC,CAAC,CAAE,CAAC,CAAC,CAAC,CAAC,CACjE,KAAM,CAAAM,KAAK,CAAGV,WAAW,CAACF,QAAQ,CAACM,KAAK,CAAE,CAAC,CAAC,CAAE,CAAC,CAAC,CAAE,CAAC,EAAE,CAAE,EAAE,CAAC,CAAC,CAE3D,MAAO,CACLD,eAAe,CAAfA,eAAe,CACfI,WAAW,CAAXA,WAAW,CACXE,YAAY,CAAZA,YAAY,CACZC,KAAK,CAALA,KAAK,CACLC,SAAS,CAAE,CAAC,CAAEH,MAAM,CAAKA,MAAO,MAAK,CAAC,CACxC,CAAC,CACH"}',version:"3.5.4"},ao={code:"function anonymous(){const{interpolateColor,progress,colors,interpolate}=this.__closure;const backgroundColor=interpolateColor(progress.value,[0,1],[colors.text,colors.tint]);const width=interpolate(progress.value,[0,1],[18,16]);return{backgroundColor:backgroundColor,width:width};}",location:"/Users/morgantrudeau/projects/delivfree/app/components/DrawerIconButton.tsx",sourceMap:'{"version":3,"names":["anonymous","interpolateColor","progress","colors","interpolate","__closure","backgroundColor","value","text","tint","width"],"sources":["/Users/morgantrudeau/projects/delivfree/app/components/DrawerIconButton.tsx"],"mappings":"AAmEmD,SAAAA,SAAMA,CAAA,QAAAC,gBAAA,CAAAC,QAAA,CAAAC,MAAA,CAAAC,WAAA,OAAAC,SAAA,CACrD,KAAM,CAAAC,eAAe,CAAGL,gBAAgB,CACtCC,QAAQ,CAACK,KAAK,CACd,CAAC,CAAC,CAAE,CAAC,CAAC,CACN,CAACJ,MAAM,CAACK,IAAI,CAAEL,MAAM,CAACM,IAAI,CAC3B,CAAC,CACD,KAAM,CAAAC,KAAK,CAAGN,WAAW,CAACF,QAAQ,CAACK,KAAK,CAAE,CAAC,CAAC,CAAE,CAAC,CAAC,CAAE,CAAC,EAAE,CAAE,EAAE,CAAC,CAAC,CAE3D,MAAO,CACLD,eAAe,CAAfA,eAAe,CACfI,KAAA,CAAAA,KACF,CAAC,CACH"}',version:"3.5.4"},oo={code:'function anonymous(){const{interpolate,progress,interpolateColor,colors,isRTL}=this.__closure;const marginTop=interpolate(progress.value,[0,1],[4,2]);const backgroundColor=interpolateColor(progress.value,[0,1],[colors.text,colors.tint]);const marginStart=interpolate(progress.value,[0,1],[0,-11.5]);const rotate=interpolate(progress.value,[0,1],[0,isRTL?-45:45]);const width=interpolate(progress.value,[0,1],[18,12]);return{backgroundColor:backgroundColor,marginStart:marginStart,width:width,marginTop:marginTop,transform:[{rotate:rotate+"deg"}]};}',location:"/Users/morgantrudeau/projects/delivfree/app/components/DrawerIconButton.tsx",sourceMap:'{"version":3,"names":["anonymous","interpolate","progress","interpolateColor","colors","isRTL","__closure","marginTop","value","backgroundColor","text","tint","marginStart","rotate","width","transform"],"sources":["/Users/morgantrudeau/projects/delivfree/app/components/DrawerIconButton.tsx"],"mappings":"AAiFmD,SAAAA,SAAMA,CAAA,QAAAC,WAAA,CAAAC,QAAA,CAAAC,gBAAA,CAAAC,MAAA,CAAAC,KAAA,OAAAC,SAAA,CACrD,KAAM,CAAAC,SAAS,CAAGN,WAAW,CAACC,QAAQ,CAACM,KAAK,CAAE,CAAC,CAAC,CAAE,CAAC,CAAC,CAAE,CAAC,CAAC,CAAE,CAAC,CAAC,CAAC,CAC7D,KAAM,CAAAC,eAAe,CAAGN,gBAAgB,CACtCD,QAAQ,CAACM,KAAK,CACd,CAAC,CAAC,CAAE,CAAC,CAAC,CACN,CAACJ,MAAM,CAACM,IAAI,CAAEN,MAAM,CAACO,IAAI,CAC3B,CAAC,CACD,KAAM,CAAAC,WAAW,CAAGX,WAAW,CAACC,QAAQ,CAACM,KAAK,CAAE,CAAC,CAAC,CAAE,CAAC,CAAC,CAAE,CAAC,CAAC,CAAE,CAAC,IAAI,CAAC,CAAC,CACnE,KAAM,CAAAK,MAAM,CAAGZ,WAAW,CAACC,QAAQ,CAACM,KAAK,CAAE,CAAC,CAAC,CAAE,CAAC,CAAC,CAAE,CAAC,CAAC,CAAEH,KAAK,CAAG,CAAC,EAAE,CAAG,EAAE,CAAC,CAAC,CACzE,KAAM,CAAAS,KAAK,CAAGb,WAAW,CAACC,QAAQ,CAACM,KAAK,CAAE,CAAC,CAAC,CAAE,CAAC,CAAC,CAAE,CAAC,EAAE,CAAE,EAAE,CAAC,CAAC,CAE3D,MAAO,CACLC,eAAe,CAAfA,eAAe,CACfG,WAAW,CAAXA,WAAW,CACXE,KAAK,CAALA,KAAK,CACLP,SAAS,CAATA,SAAS,CACTQ,SAAS,CAAE,CAAC,CAAEF,MAAM,CAAKA,MAAO,MAAK,CAAC,CACxC,CAAC,CACH"}',version:"3.5.4"};function io(e){var t=(0,p.default)({},((0,ka.default)(e),e)),r=(0,f.useContext)(Ga),a=r.drawerRef,o=r.open,i=(0,fn.useSharedValue)(0),s=(0,m.useSafeAreaInsets)(),l=u?s.right:s.left,c=(0,pn.useAnimatedStyle)(function(){var e=[new n.g.Error,-5,-27],t=function(){return{transform:[{translateX:(0,An.interpolate)(i.value,[0,1],[0,u?60+l:-(60+l)])}]}};return t.__closure={interpolate:An.interpolate,progress:i,isRTL:u,inset:l},t.__initData=no,t.__workletHash=956057271390,t.__stackDetails=e,t}(),[l,i]),d=(0,pn.useAnimatedStyle)(function(){var e=[new n.g.Error,-6,-27],t=function(){var e=(0,Ta.interpolateColor)(i.value,[0,1],[I.text,I.tint]),t=(0,An.interpolate)(i.value,[0,1],[0,-11.5]),n=(0,An.interpolate)(i.value,[0,1],[0,u?45:-45]);return{backgroundColor:e,marginStart:t,marginBottom:(0,An.interpolate)(i.value,[0,1],[0,-2]),width:(0,An.interpolate)(i.value,[0,1],[18,12]),transform:[{rotate:n+"deg"}]}};return t.__closure={interpolateColor:Ta.interpolateColor,progress:i,colors:I,interpolate:An.interpolate,isRTL:u},t.__initData=ro,t.__workletHash=9518740823222,t.__stackDetails=e,t}(),[i]),A=(0,pn.useAnimatedStyle)(function(){var e=[new n.g.Error,-5,-27],t=function(){return{backgroundColor:(0,Ta.interpolateColor)(i.value,[0,1],[I.text,I.tint]),width:(0,An.interpolate)(i.value,[0,1],[18,16])}};return t.__closure={interpolateColor:Ta.interpolateColor,progress:i,colors:I,interpolate:An.interpolate},t.__initData=ao,t.__workletHash=5503499428104,t.__stackDetails=e,t}(),[i]),g=(0,pn.useAnimatedStyle)(function(){var e=[new n.g.Error,-6,-27],t=function(){var e=(0,An.interpolate)(i.value,[0,1],[4,2]),t=(0,Ta.interpolateColor)(i.value,[0,1],[I.text,I.tint]),n=(0,An.interpolate)(i.value,[0,1],[0,-11.5]),r=(0,An.interpolate)(i.value,[0,1],[0,u?-45:45]);return{backgroundColor:t,marginStart:n,width:(0,An.interpolate)(i.value,[0,1],[18,12]),marginTop:e,transform:[{rotate:r+"deg"}]}};return t.__closure={interpolate:An.interpolate,progress:i,interpolateColor:Ta.interpolateColor,colors:I,isRTL:u},t.__initData=oo,t.__workletHash=6012595519899,t.__stackDetails=e,t}(),[i]);return(0,f.useEffect)((function(){i.value=(0,mn.withTiming)(o?1:0)}),[o,i]),f.createElement(to,(0,p.default)({},t,{onPress:function(){var e,t;o?null==(e=a.current)||e.closeDrawer({speed:2}):null==(t=a.current)||t.openDrawer({speed:2})},style:[so,c],hitSlop:30}),f.createElement(gn.AnimatedView,{style:[lo,d]}),f.createElement(gn.AnimatedView,{style:[uo,A]}),f.createElement(gn.AnimatedView,{style:[co,g]}))}var so={alignItems:"center",justifyContent:"center",width:56},lo={height:2},uo={height:2,marginTop:D.xxs},co={height:2},fo=2320/316,mo=function(e){var t=e.style,r=e.height,a=(0,f.useMemo)((function(){var e=.45*r;return[{height:e,width:e*fo},t]}),[r,t]);return f.createElement(Na,{source:n(72043),style:a})},po=2320/316,Ao=function(e){var t=e.style,n=Fr(),r=(0,f.useMemo)((function(){var e=.4*n;return[{height:e,width:e*po},t]}),[n,t]);return f.createElement(mo,{style:r,height:n})};function go(e){var t=e.style,n=e.contentContainerStyle,r=e.children;return f.createElement(dt.default,{style:[yo,t]},f.createElement(dt.default,{style:[bo,n]},r))}function ho(e){var t=e,n=t.children,r=t.keyboardShouldPersistTaps,a=void 0===r?"handled":r,o=t.contentContainerStyle,i=t.ScrollViewProps,s=t.style,l=(0,f.useRef)(null),u=function(e){var t=e.preset,n=e.scrollEnabledToggleThreshold||{},r=n.percent,a=void 0===r?.92:r,o=n.point,i=void 0===o?0:o,s=(0,f.useRef)(null),l=(0,f.useRef)(null),u=(0,f.useState)(!0),c=u[0],d=u[1];function m(){if(null!==s.current&&null!==l.current){var e=i?l.current<s.current-i:l.current<s.current*a;c&&e&&d(!1),c||e||d(!0)}}return"auto"===t&&m(),{scrollEnabled:"auto"!==t||c,onContentSizeChange:function(e,t){l.current=t,m()},onLayout:function(e){var t=e.nativeEvent.layout.height;s.current=t,m()}}}(e),c=u.scrollEnabled,d=u.onContentSizeChange,m=u.onLayout;return(0,Ea.default)(l),f.createElement(cn.default,(0,p.default)({keyboardShouldPersistTaps:a,scrollEnabled:c,ref:l},i,{onLayout:function(e){m(e),null==i||null==i.onLayout||i.onLayout(e)},onContentSizeChange:function(e,t){d(e,t),null==i||null==i.onContentSizeChange||i.onContentSizeChange(e,t)},style:[yo,null==i?void 0:i.style,s],contentContainerStyle:[bo,null==i?void 0:i.contentContainerStyle,o],showsVerticalScrollIndicator:!1,showsHorizontalScrollIndicator:!1}),n)}function vo(e){var t,n=dn().width>gt,r=e.backgroundColor,a=void 0===r?I.background:r,o=e.safeAreaEdges,i=e.StatusBarProps,s=e.statusBarStyle,l=void 0===s?"dark":s,u=e.inDrawer,c=e.title,d=e.HeaderTitle,A=e.headerProps,g=function(e,t){void 0===e&&(e=[]),void 0===t&&(t="padding");var n=(0,m.useSafeAreaInsets)();return e.reduce((function(e,r){var a,o;return(0,p.default)({},e,((o={})[""+t+wa[r]]=n[null!=(a=Sa[r])?a:r],o))}),{})}(o);return f.createElement(dt.default,{style:[Co,{backgroundColor:a},g]},f.createElement(xa.default,(0,p.default)({style:l,backgroundColor:I.background},i)),u&&!n&&f.createElement(ta,(0,p.default)({LeftActionComponent:f.createElement(io,null),title:c,HeaderTitle:d||f.createElement(Ao,null)},A)),(t=e.preset)&&"fixed"!==t?f.createElement(ho,e):f.createElement(go,e))}var Co={flex:1},yo={flex:1},bo={justifyContent:"flex-start",alignItems:"stretch"},Eo=n(30969),xo=["onChangeText","value"];const wo=(0,f.forwardRef)((function(e,t){var n=e.onChangeText,r=e.value,a=(0,Bt.default)(e,xo),o=(0,f.useContext)(Er),i=(0,f.useCallback)((function(e){if(""!==e&&isNaN(Number(e)))return o.show("Please enter a valid number");n&&n(e)}),[n]);return f.createElement(Eo.default,(0,p.default)({ref:t,keyboardType:"number-pad",onChangeText:i,value:r},a))}));var So=["labelTx","label","labelTxOptions","placeholderTx","placeholder","placeholderTxOptions","helper","helperTx","helperTxOptions","status","RightAccessory","LeftAccessory","HelperTextProps","LabelTextProps","style","containerStyle","inputWrapperStyle","numberInput","validation"],ko=(0,f.forwardRef)((function(e,t){var n=e.labelTx,r=e.label,a=e.labelTxOptions,o=e.placeholderTx,i=e.placeholder,s=e.placeholderTxOptions,l=e.helper,d=e.helperTx,m=e.helperTxOptions,A=e.status,g=e.RightAccessory,h=e.LeftAccessory,v=e.HelperTextProps,C=e.LabelTextProps,y=e.style,b=e.containerStyle,E=e.inputWrapperStyle,x=e.numberInput,w=e.validation,S=(0,Bt.default)(e,So),k=(0,f.useRef)(null),T=(0,f.useRef)(S.value||S.defaultValue||""),R=(0,f.useState)(),D=(R[0],R[1],(0,f.useState)(!1)),L=D[0],_=D[1],P=(0,f.useCallback)((function(t){e.onFocus&&e.onFocus(t)}),[e.onFocus]),O=(0,f.useCallback)((function(t){if(e.onBlur&&e.onBlur(t),w){var n=w(T.current);_(!n)}}),[e.onBlur,w]),N=(0,f.useCallback)((function(t){e.onChangeText&&e.onChangeText(t),T.current=t}),[e.onChangeText]),M=(0,f.useMemo)((function(){return x?wo:Eo.default}),[x]),B=!1===S.editable||"disabled"===A,j=o?c(o,s):i,W=[b],z=[To,null==C?void 0:C.style],H=[Ro,L&&{borderColor:I.error},S.multiline&&{minHeight:112},h&&{paddingStart:0},g&&{paddingEnd:0},E],F=[Io,B&&{color:I.textDim},u&&{textAlign:"right"},S.multiline&&{height:"auto"},y],U=[Do,L&&{color:I.error},null==v?void 0:v.style];return(0,f.useImperativeHandle)(t,(function(){return k.current})),f.createElement(hn.default,{activeOpacity:1,style:W,onPress:function(){var e;B||null==(e=k.current)||e.focus()},accessibilityState:{disabled:B}},!(!r&&!n)&&f.createElement(zt,(0,p.default)({preset:"formLabel",text:r,tx:n,txOptions:a},C,{style:z})),f.createElement(dt.default,{style:H},!!h&&f.createElement(h,{style:_o,status:A,editable:!B,multiline:!!S.multiline}),f.createElement(M,(0,p.default)({ref:k,underlineColorAndroid:I.transparent,textAlignVertical:"top",placeholder:j,placeholderTextColor:I.textDim},S,{editable:!B,style:F,onFocus:P,onBlur:O,onChangeText:N})),!!g&&f.createElement(g,{style:Lo,status:A,editable:!B,multiline:!!S.multiline})),!(!l&&!d)&&f.createElement(zt,(0,p.default)({preset:"formHelper",text:l,tx:d,txOptions:m},v,{style:U})))})),To={marginBottom:D.xxs},Ro={flexDirection:"row",paddingHorizontal:D.xs,backgroundColor:I.palette.neutral200,borderWidth:ct.default.hairlineWidth,borderRadius:ft,minHeight:38,justifyContent:"center",borderColor:I.border},Io={flex:1,alignSelf:"stretch",color:I.text,fontSize:Ht.sm.fontSize,outlineStyle:"none"},Do={marginTop:D.xs},Lo={marginEnd:D.xs,justifyContent:"center",alignItems:"center"},_o={marginStart:D.xs,justifyContent:"center",alignItems:"center"};I.error;I.transparent,D.xs,D.md,D.md;var Po=(0,n(62852).default)();function Oo(){return Po}n(27974);const No=N.default.analytics;var Mo=function(){var e=(0,A.default)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,No().logEvent(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),Bo=["largeStyle","smallStyle"],jo=function(e){var t=e.largeStyle,n=e.smallStyle,r=(0,Bt.default)(e,Bo),a=dn().width>xt,o=(0,f.useMemo)((function(){return[a?(0,p.default)({},wt,t):(0,p.default)({width:"100%"},n),r.style]}),[r.style,a]);return f.createElement(dt.default,(0,p.default)({},r,{style:o}))},Wo=Math.min(400,.85*At.default.get("window").width),zo=Wo*(838/2200),Ho=function(e){var t=e.navigation,r=dn().width>xt;return f.createElement(vo,{backgroundColor:I.background,preset:"scroll",style:Uo,contentContainerStyle:[Vo,r&&{justifyContent:"center"}],safeAreaEdges:yt},f.createElement(jo,{smallStyle:Rt},f.createElement(dt.default,{style:Ko},f.createElement(Na,{source:n(31372),style:{height:zo,width:Wo},resizeMode:"contain"})),f.createElement(dt.default,{style:Go},f.createElement(Nn,{testID:"sign-up-button",preset:"filled",text:"Sign Up",style:Fo,onPress:function(){Mo("welcome_signup"),t.navigate("SignUp")}}),f.createElement(Nn,{testID:"log-in-button",text:"Log In",onPress:function(){Mo("welcome_login"),t.navigate("Login")}}))))},Fo={marginTop:D.xl,marginBottom:D.md},Uo={flex:1},Vo={flexGrow:1},Ko={flex:1,justifyContent:"center",alignItems:"center"},Go={borderTopLeftRadius:16,borderTopRightRadius:16,paddingHorizontal:D.md,paddingVertical:D.lg};n(28127);const qo=N.default.auth;var Qo=function(e){var t=vr(),n=(0,f.useRef)(null),r=(0,f.useState)(""),a=r[0],o=r[1],i=(0,f.useState)(""),s=i[0],l=i[1],u=(0,f.useState)(!0),c=u[0],d=u[1],m=(0,f.useState)(!1),p=m[0],g=m[1],v=function(){var e=(0,A.default)(h().mark((function e(){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=a.trim(),r=s.trim(),n&&r){e.next=5;break}return e.abrupt("return");case 5:return g(!0),e.next=8,qo().signInWithEmailAndPassword(n,r);case 8:e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),g(!1),t.alert("Login Failed",ut(e.t0));case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),C=(0,f.useMemo)((function(){return function(e){return f.createElement(Xt,{icon:c?"hidden":"view",color:I.palette.neutral800,containerStyle:e.style,size:20,onPress:function(){return d(!c)},hitSlop:20})}}),[c]),y=(0,f.useMemo)((function(){return p?function(e){var t=e.style;return f.createElement(Kn.default,{color:"#fff",style:t})}:void 0}),[p]);return f.createElement(vo,{preset:"scroll",contentContainerStyle:Yo,safeAreaEdges:Ct},f.createElement(jo,null,f.createElement(zt,{testID:"login-heading",tx:"loginScreen.signIn",preset:"heading",style:Zo}),f.createElement(ko,{value:a,onChangeText:o,containerStyle:$o,autoCapitalize:"none",autoComplete:"email",autoCorrect:!1,keyboardType:"email-address",labelTx:"loginScreen.emailFieldLabel",placeholderTx:"loginScreen.emailFieldPlaceholder",onSubmitEditing:function(){var e;return null==(e=n.current)?void 0:e.focus()}}),f.createElement(ko,{ref:n,value:s,onChangeText:l,containerStyle:$o,autoCapitalize:"none",autoComplete:"password",autoCorrect:!1,secureTextEntry:c,labelTx:"loginScreen.passwordFieldLabel",placeholderTx:"loginScreen.passwordFieldPlaceholder",onSubmitEditing:v,RightAccessory:C}),f.createElement(zt,{style:Xo,onPress:function(){return e.navigation.navigate("ForgotPassword")}},"Forgot password?"),f.createElement(Nn,{testID:"login-button",tx:"loginScreen.tapToSignIn",style:Jo,preset:"filled",onPress:v,RightAccessory:y}),f.createElement(qt.default,{onPress:function(){return e.navigation.navigate("SignUp")}},f.createElement(zt,{style:ei},"Don't have an account? ",f.createElement(zt,{style:ti},"Sign Up")))))},Yo={paddingVertical:D.md,paddingHorizontal:D.md},Xo={marginTop:D.xs,color:I.textDim},Zo={},$o={marginTop:D.lg},Jo={marginTop:D.lg},ei={marginTop:D.lg,textAlign:"center"},ti={color:I.palette.primary600},ni=function(e){var t=vr(),n=(0,f.useRef)(null),r=(0,f.useState)(""),a=r[0],o=r[1],i=(0,f.useState)(""),s=i[0],l=i[1],u=(0,f.useState)(!0),c=u[0],d=u[1],m=(0,f.useState)(!1),p=m[0],g=m[1],v=(0,f.useState)(!1),C=v[0],y=v[1],b=function(){var e=(0,A.default)(h().mark((function e(){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=a.trim(),r=s.trim(),n&&r){e.next=5;break}return e.abrupt("return");case 5:return g(!0),e.next=8,qo().createUserWithEmailAndPassword(n,r);case 8:Mo("sign_up_email"),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0),g(!1),t.alert("Sign Up Failed",ut(e.t0));case 16:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=(0,A.default)(h().mark((function e(){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(!0),e.next=4,qo().signInAnonymously();case 4:n=e.sent,console.log(n),Mo("sign_up_guest"),y(!1),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),y(!1),t.alert("Sign Up Failed",ut(e.t0));case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),x=(0,f.useMemo)((function(){return function(e){return f.createElement(Xt,{icon:c?"hidden":"view",color:I.palette.neutral800,containerStyle:e.style,size:20,onPress:function(){return d(!c)},hitSlop:20})}}),[c]),w=(0,f.useMemo)((function(){return p?function(e){var t=e.style;return f.createElement(Kn.default,{color:"#fff",style:t})}:void 0}),[p]),S=(0,f.useMemo)((function(){return C?function(e){var t=e.style;return f.createElement(Kn.default,{color:I.text,style:t})}:void 0}),[C]);return f.createElement(vo,{preset:"scroll",contentContainerStyle:ri,safeAreaEdges:Ct},f.createElement(jo,null,f.createElement(zt,{testID:"login-heading",tx:"signUpScreen.signIn",preset:"heading",style:ai}),f.createElement(ko,{value:a,onChangeText:o,containerStyle:oi,autoCapitalize:"none",autoComplete:"email",autoCorrect:!1,keyboardType:"email-address",labelTx:"signUpScreen.emailFieldLabel",placeholderTx:"signUpScreen.emailFieldPlaceholder",onSubmitEditing:function(){var e;return null==(e=n.current)?void 0:e.focus()}}),f.createElement(ko,{ref:n,value:s,onChangeText:l,containerStyle:oi,autoCapitalize:"none",autoComplete:"password",autoCorrect:!1,secureTextEntry:c,labelTx:"signUpScreen.passwordFieldLabel",placeholderTx:"signUpScreen.passwordFieldPlaceholder",onSubmitEditing:b,RightAccessory:x}),f.createElement(Nn,{testID:"login-button",tx:"signUpScreen.tapToSignIn",style:ii,preset:"filled",onPress:b,RightAccessory:w}),"CONSUMER"===F()&&f.createElement(f.Fragment,null,f.createElement(zt,{preset:"formLabel",style:si},"Don't want to create an account?"),f.createElement(Nn,{testID:"login-button",text:"Continue as guest",style:ii,preset:"default",onPress:E,RightAccessory:S}))))},ri={paddingVertical:D.md,paddingHorizontal:D.md},ai={marginBottom:D.lg},oi={marginBottom:D.lg},ii={marginTop:D.xs},si={textAlign:"center",marginTop:D.xl},li=(D.md,function(e){var t;return null==(t=ci.find((function(t){return t.cuisine===e})))?void 0:t.title}),ui=function(e){var t;return null==(t=ci.find((function(t){return t.cuisine===e})))?void 0:t.image},ci=[{cuisine:Sr.Cuisines.Burgers,image:n(95239),title:"Burgers"},{cuisine:Sr.Cuisines.Pizza,image:n(61676),title:"Pizza"},{cuisine:Sr.Cuisines.Chinese,image:n(67951),title:"Chinese"},{cuisine:Sr.Cuisines.Sushi,image:n(83324),title:"Sushi"},{cuisine:Sr.Cuisines.Vietnamese,image:n(16581),title:"Vietnamese"},{cuisine:Sr.Cuisines.Italian,image:n(13810),title:"Italian"},{cuisine:Sr.Cuisines.Indian,image:n(22277),title:"Indian"},{cuisine:Sr.Cuisines.Mexican,image:n(19917),title:"Mexican"},{cuisine:Sr.Cuisines.Mediterranean,image:n(76746),title:"Greek"},{cuisine:Sr.Cuisines.MiddleEastern,image:n(2504),title:"Middle Eastern"},{cuisine:Sr.Cuisines.Seafood,image:n(35399),title:"Seafood"},{cuisine:Sr.Cuisines.VegetarianVegan,image:n(86392),title:"Vegetarian"},{cuisine:Sr.Cuisines.BreakfastBrunch,image:n(16581),title:"Breakfast & Brunch"},{cuisine:Sr.Cuisines.CoffeeShopsCafes,image:n(87344),title:"Coffee Shops"},{cuisine:Sr.Cuisines.DessertsSweets,image:n(33096),title:"Desserts"}],di={marginTop:D.xxs};const fi=function(e){var t=e.restaurant,n=e.onPress;return f.createElement(qt.default,{onPress:function(){return null==n?void 0:n(t)}},f.createElement(dt.default,{style:Nt},f.createElement(Na,{source:{uri:t.image},style:Ot})),f.createElement(zt,{preset:"subheading",style:di},t.name))};var mi=["onCuisinePress","onRestaurantPress","contentContainerStyle","restaurants","showRestaurants"];const pi=function(e){var t=e.onCuisinePress,n=e.onRestaurantPress,r=e.contentContainerStyle,a=e.restaurants,o=e.showRestaurants,i=(0,Bt.default)(e,mi),s=(0,f.useMemo)((function(){return[vi,r]}),[r]),l=(0,f.useCallback)((function(e){var n=e.item;return f.createElement(qt.default,{onPress:function(){return t(n.cuisine)}},f.createElement(dt.default,{style:Nt},f.createElement(Na,{source:n.image,style:Ot})),f.createElement(zt,{preset:"subheading",style:Ci},n.title))}),[t]),u=(0,f.useCallback)((function(e){var t=e.item;return f.createElement(fi,{restaurant:t,onPress:n})}),[n]),c=(0,f.useCallback)((function(){return f.createElement(dt.default,{style:yi})}),[]);return f.createElement(Ra.default,(0,p.default)({data:o?a:ci,renderItem:o?u:l,style:hi,contentContainerStyle:s,ItemSeparatorComponent:c,keyExtractor:gi,showsVerticalScrollIndicator:!1},i))};var Ai,gi=function(e){return"id"in e?e.id:e.cuisine},hi={flex:1},vi={flexGrow:1},Ci={marginTop:D.xxs},yi={height:D.md},bi=(0,f.forwardRef)((function(e,t){return f.createElement(Eo.default,(0,p.default)({placeholderTextColor:I.textDim},e,{ref:t,style:[Mt,e.style],scrollEnabled:!1}))})),Ei=function(){return null},xi=function(){return Ai||(Ai=new wi),Ai},wi=function(){var e=this;this.listeners=new Map,this.dateListeners=new Map,this.errors=new Set,this.errorRetryTimeouts=new Map,this.listenerExists=function(t){return e.listeners.has(t)},this.handleSuccess=function(e,t){return function(n){console.log("Success ["+e+"]"),t(n)}},this.handleError=function(t,n,r,a){return function(o){if(console.log("Listener error ["+t+"] "+o,e.errors.has(t)),e.errors.has(t))e.cancelErrorRetryTimeout(t),a&&a(o);else{var i=setTimeout((function(){e.addListener(t,n,r,a)}),2e3);console.log(e.errors),e.errors.add(t),e.errorRetryTimeouts.set(t,i)}}},this.addListener=function(t,n,r,a){console.log("Add listener ["+t+"]"),e.listenerExists(t)&&e.removeListener(t);var o=n.onSnapshot(e.handleSuccess(t,r),e.handleError(t,n,r,a));e.listeners.set(t,o)},this.removeListener=function(t){e.cancelErrorRetryTimeout(t);var n=e.listeners.get(t);n&&(console.log("Remove listener ["+t+"]"),e.firebaseOff(n),e.listeners.delete(t))},this.cancelErrorRetryTimeout=function(t){var n=e.errorRetryTimeouts.get(t);n&&(clearTimeout(n),e.errorRetryTimeouts.delete(t))},this.removeAllListeners=function(){e.listeners.forEach((function(t,n){e.removeListener(n)}))},this.firebaseOff=function(e){e()}};n(71223);const Si=N.default.functions;var ki=(0,J.createAsyncThunk)("user/createUser",function(){var e=(0,A.default)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X().collection("Users").doc(t.id).set(t);case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ti=(function(){var e=(0,A.default)(h().mark((function e(t){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X().collection("Admin").doc("users").get();case 2:return r=e.sent,e.abrupt("return",null==(n=r.data())?void 0:n.ids.includes(t));case 4:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,A.default)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X().collection("Users").doc(t).get();case 2:return n=e.sent,e.abrupt("return",n.data());case 4:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,A.default)(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",X().collection("Users").doc(t).update(n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());!function(){var e=(0,A.default)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X().collection("Users").where("keywords","array-contains",t.toUpperCase()).get();case 2:return n=e.sent,e.abrupt("return",n.docs.map((function(e){return e.data()})));case 4:case"end":return e.stop()}}),e)})))}();function Ri(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Ii(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ii(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ii(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Di=function(e){var t=e.onRequestClose,n=(0,w.useNavigation)(),r=vr(),a=it((function(e){return e.user.user})),o=(0,f.useState)(!1),i=o[0],s=o[1],l=(0,f.useState)(!1),u=l[0],d=l[1],m=(0,f.useState)(null),p=m[0],g=m[1],v=function(){var e=vr(),t=(0,f.useRef)(),n=(0,f.useState)(!1),r=n[0],a=n[1],o=Mr().canUse,i=function(){console.log("REMOVE",t.current),t.current&&t.current.remove()};(0,f.useEffect)((function(){return function(){i()}}),[]);var s=function(){var e=(0,A.default)(h().mark((function e(n,r){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(),e.next=3,o(Dr);case 3:if(!e.sent){e.next=17;break}return e.prev=5,e.next=8,$r.watchPositionAsync({accuracy:Jr.LocationAccuracy.Highest,distanceInterval:50,timeInterval:1e4},function(){var e=(0,A.default)(h().mark((function e(t){var a,o,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{a=t.coords,o=a.latitude,i=a.longitude,n({position:{latitude:o,longitude:i}})}catch(s){r(s),u(s)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 8:t.current=e.sent,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(5),r(e.t0),u(e.t0);case 15:e.next=19;break;case 17:r("missing-permission"),d();case 19:return e.abrupt("return",i);case 20:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t,n){return e.apply(this,arguments)}}(),l=function(){var e=(0,A.default)(h().mark((function e(){var t,n,r,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(Dr);case 2:if(!e.sent){e.next=17;break}return e.prev=4,e.next=7,$r.getCurrentPositionAsync({accuracy:Jr.LocationAccuracy.Lowest});case 7:return t=e.sent,n=t.coords,r=n.latitude,a=n.longitude,e.abrupt("return",{position:{latitude:r,longitude:a}});case 12:return e.prev=12,e.t0=e.catch(4),e.abrupt("return",u(e.t0));case 15:e.next=18;break;case 17:return e.abrupt("return",null);case 18:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(){return e.apply(this,arguments)}}(),u=function(e){return console.log("Location error",e),function(e){return!!e&&"object"===typeof e&&"code"in e}(e)?"ios"===x.default.OS?1===e.code?d():m():5===e.code?c():m():m()},c=function(){return e.alert("Location Not Enabled","Please enable Location in your phone settings and try again."),a(!1),null},d=function(){return e.alert("Insufficient Permissions","Location permissions are required to find your location. Please allow DelivFree location access in your device settings."),a(!1),null},m=function(){return e.alert("Location Unavailable","Unable to retrieve location. Ensure GPS is enabled and connect to Wifi if available."),a(!1),null};return{getLocation:l,findingLocation:r,watchLocation:s}}(),C=v.watchLocation,y=function(){var e=(0,A.default)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.next=3,C(function(){var e=(0,A.default)(h().mark((function e(n){var r,a,o,i,l,u,c,d,f;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("LOCATION",n),n){e.next=4;break}return s(!1),e.abrupt("return");case 4:return t(),r=n.position,a=r.latitude,o=r.longitude,i=Vr.geohashForLocation([a,o]),e.prev=7,e.next=10,$r.reverseGeocodeAsync({latitude:a,longitude:o});case 10:for(l=e.sent,u=Ri(l);!(c=u()).done;)d=c.value,f=d.city+", "+d.isoCountryCode,g({latitude:a,longitude:o,address:f,geohash:i});s(!1),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(7),s(!1);case 18:case"end":return e.stop()}}),e,null,[[7,15]])})));return function(t){return e.apply(this,arguments)}}(),(function(){}));case 3:t=e.sent;case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=(0,A.default)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,p){e.next=3;break}throw"missing_address";case 3:return d(!0),e.next=6,Ti(a.id,{location:p});case 6:t(),g(null),d(!1),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),d(!1),r.alert(c("errors.heading"),c("errors.common"));case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),E=(0,f.useMemo)((function(){return i?function(){return f.createElement(Kn.default,{color:"#fff",style:Ni})}:void 0}),[i]),S=(0,f.useMemo)((function(){return u?function(){return f.createElement(Kn.default,{color:"#fff",style:Ni})}:void 0}),[u]);return f.createElement(dt.default,{style:Pi},f.createElement(zt,{preset:"subheading",style:Mi},"Find restaurants in your area"),null!=p&&p.address?f.createElement(f.Fragment,null,f.createElement(zt,{style:Bi},null==p?void 0:p.address),f.createElement(Nn,{text:"Confirm address",preset:"filled",style:Oi,onPress:b,RightAccessory:S})):f.createElement(Nn,{text:"Find my address",preset:"filled",style:Oi,onPress:y,RightAccessory:E}),f.createElement(Nn,{text:"Enter my address",style:Oi,onPress:function(){t(),n.navigate("AddressSearch")}}))};const Li=(0,f.forwardRef)((function(e,t){var n=e.onRequestClose,r=it((function(e){return e.user.user}));return f.createElement(Ei,{ref:t,snapPoints:["45%"],enablePanDownToClose:!!r.location},f.createElement(Di,{onRequestClose:n}))}));var _i,Pi={padding:D.md},Oi={marginTop:D.sm},Ni={marginLeft:D.sm},Mi={textAlign:"center",marginBottom:D.xs},Bi={textAlign:"center",marginBottom:D.xs},ji=function(){return _i||(_i=new Wi),_i},Wi=function(){var e=this;this.cache={},this.getAdCache=function(){return e.cache},this.setAdCache=function(t){e.cache=t}},zi=function(e){var t,n=e.type,r=e.style,a=function(){var e=(0,f.useState)(ji().getAdCache()),t=e[0],n=e[1],r=function(){var e=(0,A.default)(h().mark((function e(){var t,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X().collection("AdBanners").get();case 3:t=e.sent,r=t.docs.reduce((function(e,t){var n;return(0,p.default)({},e,((n={})[t.id]=t.data(),n))}),{}),ji().setAdCache(r),n(r),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return(0,f.useEffect)((function(){r()}),[]),t}(),o=null!=(t=a[n])&&t.image?a[n]:a.general,i=!(null==o||!o.title)||!(null==o||!o.text),s=(0,f.useMemo)((function(){return i?{width:"100%",maxWidth:500,aspectRatio:4,borderTopRightRadius:mt,borderTopLeftRadius:mt}:{width:"100%",maxWidth:500,aspectRatio:4,borderRadius:mt}}),[r,i]);return o?f.createElement(dt.default,{style:r},f.createElement(Na,{source:{uri:o.image},style:s}),(!!o.title||!!o.text)&&f.createElement(dt.default,{style:Hi},!!o.title&&f.createElement(zt,{preset:"subheading",size:"xs"},o.title),!!o.text&&f.createElement(zt,{size:"xxs"},o.text))):null},Hi={padding:D.sm,paddingVertical:D.xs,backgroundColor:I.surface,borderBottomRightRadius:mt,borderBottomLeftRadius:mt,borderWidth:ct.default.hairlineWidth,borderColor:I.border},Fi=(x.default.OS,function(e){var t,n=(0,m.useSafeAreaInsets)(),r=it((function(e){return e.user.user})),a=(0,f.useRef)(null),o=(0,f.useCallback)((function(){var e;return null==(e=a.current)?void 0:e.close()}),[]);(0,f.useEffect)((function(){var e;null!=r&&r.location?null==(e=a.current)||e.close():setTimeout((function(){var e;return null==(e=a.current)?void 0:e.snapToIndex(0)}),200)}),[null==r?void 0:r.location]);var i=(0,f.useMemo)((function(){return{paddingTop:D.sm,paddingHorizontal:D.md,paddingBottom:D.sm+n.bottom}}),[n.bottom]),s=(0,f.useCallback)((function(t){e.navigation.navigate("Restaurants",{cuisine:t})}),[e.navigation]),l=(0,f.useCallback)((function(t){return e.navigation.navigate("RestaurantDetail",{restaurantId:t.id})}),[e.navigation]),u=(0,f.useState)(""),c=u[0],d=u[1],p=(0,f.useState)(!1),g=p[0],v=p[1],C=(0,f.useState)([]),y=C[0],b=C[1],E=function(e){var t=(0,f.useRef)(0);return function(n){return function(){var r=Date.now();r-t.current<e||(t.current=r,n.apply(void 0,arguments))}}}(300),x=E(function(){var e=(0,A.default)(h().mark((function e(t){var n,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),e.next=3,Yr({latitude:null==r||null==(n=r.location)?void 0:n.latitude,longitude:null==r||null==(a=r.location)?void 0:a.longitude},{keyword:t});case 3:o=e.sent,b(o),v(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),w=function(e){d(e),e?x(e):b([])},S=(0,f.useMemo)((function(){var e,t;return f.createElement(dt.default,{style:Qi},!(null==r||null==(e=r.location)||!e.address)&&f.createElement(qt.default,{style:Vi,onPress:function(){var e;return null==(e=a.current)?void 0:e.snapToIndex(0)}},f.createElement(zt,null,null==r||null==(t=r.location)?void 0:t.address),f.createElement(Xt,{icon:"chevron-down"})),f.createElement(bi,{value:c,onChangeText:w,placeholder:"Search restaurants",style:Ui}),f.createElement(zi,{type:"general",style:qi}))}),[c,null==r||null==(t=r.location)?void 0:t.address]),k=(0,f.useMemo)((function(){return g?f.createElement(Kn.default,{size:"small",color:I.text}):f.createElement(dt.default,{style:Ki},f.createElement(Xt,{icon:"magnify",size:pt.xxl,style:Gi}),f.createElement(zt,null,'No results for "',c,'"'))}),[g,c]);return console.log("RESTAURANTS",y),f.createElement(Xa,{navigation:e.navigation},f.createElement(vo,{safeAreaEdges:bt,inDrawer:!0,contentContainerStyle:kt},f.createElement(pi,{contentContainerStyle:i,onCuisinePress:s,onRestaurantPress:l,ListHeaderComponent:S,restaurants:y,showRestaurants:!!c,ListEmptyComponent:k}),f.createElement(Li,{ref:a,onRequestClose:o})))}),Ui={marginTop:D.sm,maxWidth:700},Vi={flexDirection:"row",alignItems:"center"},Ki={alignSelf:"center",alignItems:"center"},Gi={marginBottom:D.xs},qi={marginTop:D.md},Qi={paddingBottom:D.xl};function Yi(e){return f.createElement(vo,{preset:"fixed",safeAreaEdges:Ct,contentContainerStyle:Xi},f.createElement(dt.default,{style:Zi},f.createElement(Xt,{icon:"ladybug",size:64}),f.createElement(zt,{style:$i,preset:"subheading",tx:"errorScreen.title"}),f.createElement(zt,{tx:"errorScreen.friendlySubtitle"})),!1,f.createElement(Nn,{preset:"reversed",style:Ji,onPress:e.onReset,tx:"errorScreen.reset"}))}var Xi={alignItems:"center",paddingHorizontal:D.md,paddingTop:D.xl,flex:1},Zi={alignItems:"center"},$i={color:I.error,marginBottom:D.md},Ji=(I.separator,D.md,D.md,I.error,D.md,I.textDim,{paddingHorizontal:D.xxl}),es=n(74553),ts=n.n(es),ns=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={error:null,errorInfo:null},t.resetError=function(){t.setState({error:null,errorInfo:null})},t}(0,Yn.default)(t,e);var n=t.prototype;return n.componentDidCatch=function(e,t){this.setState({error:e,errorInfo:t})},n.componentDidUpdate=function(e,t){var n=this.state,r=n.error,a=n.errorInfo;!t.error&&r&&ts().notify(r,(function(e){return a&&(e.addMetadata("react",a),a.componentStack&&(a.componentStack=rs(a.componentStack))),e.severity="error",e.unhandled=!0,!0}))},n.shouldComponentUpdate=function(e,t){return t.error!==this.state.error},n.isEnabled=function(){return"always"===this.props.catchErrors||"dev"===this.props.catchErrors&&!1||"prod"===this.props.catchErrors&&!0},n.render=function(){return this.isEnabled()&&this.state.error?f.createElement(Yi,{onReset:this.resetError,error:this.state.error,errorInfo:this.state.errorInfo}):this.props.children},t}(f.Component),rs=function(e){for(var t=e.split(/\s*\n\s*/g),n="",r=0,a=t.length;r<a;r++)t[r].length&&(n+=(n.length?"\n":"")+t[r]);return n},as=function(){var e=vr(),t=(0,f.useRef)(null),n=it((function(e){return e.auth.authToken})),r=it((function(e){return e.user.user})),a=ot(),o=(0,f.useState)((null==r?void 0:r.firstName)||""),i=o[0],s=o[1],l=(0,f.useState)((null==r?void 0:r.lastName)||""),u=l[0],c=l[1],d=(0,f.useState)(!1),m=d[0],g=d[1],v=(0,f.useCallback)((function(){var e;return null==(e=t.current)?void 0:e.focus()}),[]),C=(0,f.useCallback)((0,A.default)(h().mark((function t(){var o;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i&&u){t.next=2;break}return t.abrupt("return",e.alert("Form incomplete","Please enter your first and last name."));case 2:if(o={id:n,firstName:i,lastName:u,consumer:{}},t.prev=3,g(!0),!r){t.next=10;break}return t.next=8,Ti(o.id,o);case 8:t.next=12;break;case 10:return t.next=12,a(ki((0,p.default)({},o,{location:null})));case 12:g(!1),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(3),g(!1),e.alert("Something went wrong","Please try that again.");case 19:case"end":return t.stop()}}),t,null,[[3,15]])}))),[i,u,n,a,e]),y=(0,f.useMemo)((function(){return m?function(e){var t=e.style;return f.createElement(Kn.default,{color:"#fff",style:t})}:void 0}),[m]);return f.createElement(vo,{preset:"scroll",contentContainerStyle:os},f.createElement(jo,null,f.createElement(zt,{style:is,preset:"heading",weight:"bold"},"What's your name?"),f.createElement(bi,{onChangeText:s,placeholder:"First Name",style:ss,value:i,returnKeyType:"next",onSubmitEditing:v}),f.createElement(bi,{ref:t,onChangeText:c,placeholder:"Last Name",value:u,onSubmitEditing:C}),f.createElement(Nn,{preset:"filled",style:ls,text:"Continue",onPress:C,RightAccessory:y})))},os={padding:D.md},is={marginBottom:D.lg,alignSelf:"center"},ss={marginBottom:D.md},ls={marginTop:D.lg},us=function(e){var t=e.navigation,n=vr(),r=function(){var e=(0,A.default)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new Promise((function(e,t){return n.alert("Log Out","Do you want to log out of your account?",[{text:"No",onPress:t},{text:"Yes",onPress:e}])}));case 3:return e.next=5,qo().signOut();case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Log out cancelled");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),a=function(){var e=(0,A.default)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H.default.openURL("mailto:smarticusapp@gmail.com");case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),n.alert("That didn't work","Failed to open your email app. Please email us at smarticusapp@gmail.com.");case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return f.createElement(vo,{preset:"scroll",contentContainerStyle:cs,safeAreaEdges:Ct},f.createElement(ma,{onPress:a,text:"Contact Us",leftIcon:"email-fast-outline",style:_t}),f.createElement(ma,{onPress:function(){t.navigate("About")},text:"About",leftIcon:"information-outline",style:_t}),f.createElement(ma,{onPress:function(){t.navigate("DeleteAccount")},text:"Delete Account",leftIcon:"delete-forever-outline",style:_t}),f.createElement(ma,{onPress:r,text:"Logout",style:_t,leftIcon:"logout-variant"}))},cs={paddingHorizontal:D.md};const ds=JSON.parse('{"name":"delivfree","displayName":"delivfree","version":"1.0.0","buildNumber":1,"expo":{"name":"delivfree","slug":"delivfree","scheme":"delivfree","version":"1.0.0","orientation":"portrait","icon":"./assets/images/app-icon-all.png","splash":{"image":"./assets/images/splash-logo-all.png","resizeMode":"contain","backgroundColor":"#191015"},"updates":{"fallbackToCacheTimeout":0},"jsEngine":"hermes","assetBundlePatterns":["**/*"],"android":{"icon":"./assets/images/app-icon-android-legacy.png","package":"com.delivfree.app","adaptiveIcon":{"foregroundImage":"./assets/images/app-icon-android-adaptive-foreground.png","backgroundImage":"./assets/images/app-icon-android-adaptive-background.png"},"splash":{"image":"./assets/images/splash-logo-android-universal.png","resizeMode":"contain","backgroundColor":"#191015"}},"ios":{"icon":"./assets/images/app-icon-ios.png","supportsTablet":true,"bundleIdentifier":"com.delivfree.app","splash":{"image":"./assets/images/splash-logo-ios-mobile.png","tabletImage":"./assets/images/splash-logo-ios-tablet.png","resizeMode":"contain","backgroundColor":"#191015"}},"web":{"favicon":"./assets/images/app-icon-web-favicon.png","splash":{"image":"./assets/images/splash-logo-web.png","resizeMode":"contain","backgroundColor":"#191015"}},"plugins":["expo-localization"]},"react-native-google-mobile-ads":{"android_app_id":"ca-app-pub-6154128464262377~1929916653","ios_app_id":"ca-app-pub-6154128464262377~3879925599","user_tracking_usage_description":"This allows personalized ads to be delivered to you.","delay_app_measurement_init":true,"sk_ad_network_items":["cstr6suwn9.skadnetwork","4fzdc2evr5.skadnetwork","4pfyvq9l8r.skadnetwork","2fnua5tdw4.skadnetwork","ydx93a7ass.skadnetwork","5a6flpkh64.skadnetwork","p78axxw29g.skadnetwork","v72qych5uu.skadnetwork","ludvb6z3bs.skadnetwork","cp8zw746q7.skadnetwork","c6k4g5qg8m.skadnetwork","s39g8k73mm.skadnetwork","3qy4746246.skadnetwork","3sh42y64q3.skadnetwork","f38h382jlk.skadnetwork","hs6bdukanm.skadnetwork","prcb7njmu6.skadnetwork","v4nxqhlyqp.skadnetwork","wzmmz9fp6w.skadnetwork","yclnxrl5pm.skadnetwork","t38b2kh725.skadnetwork","7ug5zh24hu.skadnetwork","9rd848q2bz.skadnetwork","y5ghdn5j9k.skadnetwork","n6fk4nfna4.skadnetwork","v9wttpbfk9.skadnetwork","n38lu8286q.skadnetwork","47vhws6wlr.skadnetwork","kbd757ywx3.skadnetwork","9t245vhmpl.skadnetwork","a2p9lx4jpn.skadnetwork","22mmun2rn5.skadnetwork","4468km3ulz.skadnetwork","2u9pt9hc89.skadnetwork","8s468mfl3y.skadnetwork","av6w8kgt66.skadnetwork","klf5c3l5u5.skadnetwork","ppxm28t8ap.skadnetwork","424m5254lk.skadnetwork","ecpz2srf59.skadnetwork","uw77j35x4d.skadnetwork","mlmmfzh3r3.skadnetwork","578prtvx9j.skadnetwork","4dzt52r2t5.skadnetwork","gta9lk7p23.skadnetwork","e5fvkxwrpn.skadnetwork","8c4e2ghe7u.skadnetwork","zq492l623r.skadnetwork","3rd42ekr43.skadnetwork","3qcr597p9d.skadnetwork"]}}');var fs=function(){return f.createElement(vo,{preset:"scroll",contentContainerStyle:ms,safeAreaEdges:Ct},f.createElement(ma,{text:"Version",RightComponent:f.createElement(zt,{weight:"semiBold"},ds.version),style:[_t,Tt]}),f.createElement(ma,{text:"Build Number",RightComponent:f.createElement(zt,{weight:"semiBold"},ds.buildNumber),style:[_t,Tt]}),f.createElement(ma,{text:"Env",RightComponent:f.createElement(zt,{weight:"semiBold"},F()),style:[_t,Tt]}))},ms={paddingHorizontal:D.md},ps=function(){var e=(0,f.useState)(!1),t=e[0],n=e[1],r=ot();(0,f.useEffect)((function(){return function(){r(pe(!1))}}),[]);var a=function(){var e=(0,A.default)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new Promise((function(e){Vn.default.alert("Delete your account?","Are you sure you want to continue? This operation cannot be reversed.",[{text:"No",onPress:function(){return e(!1)}},{text:"Yes",onPress:function(){return e(!0)},style:"destructive"}])}));case 3:if(!e.sent){e.next=11;break}return n(!0),r(pe(!0)),e.next=9,Si().httpsCallable("deleteAccount")();case 9:return e.next=11,qo().signOut();case 11:e.next=19;break;case 13:e.prev=13,e.t0=e.catch(0),n(!1),r(pe(!1)),console.log(e.t0),Vn.default.alert("That didn't work","You account could not be deleted. You can try again.");case 19:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),o=(0,f.useMemo)((function(){return t?function(e){var t=e.style;return f.createElement(Kn.default,{color:I.error,style:t})}:void 0}),[t]),i=(0,f.useMemo)((function(){return function(e){var t=e.style;return f.createElement(Xt,{icon:"alert-box-outline",color:I.error,style:t})}}),[]);return f.createElement(vo,{safeAreaEdges:Ct,preset:"scroll",contentContainerStyle:As},f.createElement(jo,null,f.createElement(zt,{preset:"subheading",style:gs},"Deleting your account"),f.createElement(zt,null,"This will erase all your data and delete your account. You will no longer be able to login and access your account. This cannot be reversed."),f.createElement(Nn,{text:"Delete account",style:hs,textStyle:vs,onPress:a,LeftAccessory:i,RightAccessory:o})))},As={padding:D.md},gs={marginBottom:D.xs},hs={marginTop:D.md},vs={color:I.error},Cs=n(90160),ys=n(849),bs=function(e){var t=e.title;return f.createElement(zt,{preset:"bold",style:Es},t)},Es={margin:D.md,textAlign:"center",alignSelf:"center"},xs=["restaurants","loadMore","refreshing","onPress"],ws={flex:1},Ss={flexGrow:1},ks={height:D.md};const Ts=function(e){var t=e.restaurants,n=e.loadMore,r=e.refreshing,a=e.onPress,o=(0,Bt.default)(e,xs),i=(0,f.useCallback)((function(e){var t=e.item;return f.createElement(fi,{restaurant:t,onPress:a})}),[a]),s=(0,f.useCallback)((function(){return f.createElement(dt.default,{style:ks})}),[]),l=(0,f.useMemo)((function(){return f.createElement(Cs.default,{onRefresh:n,refreshing:!!r})}),[n]),u=(0,f.useMemo)((function(){return f.createElement(bs,{title:"No restaurant locations found"})}),[]);return f.createElement(ys.ReanimatedFlatList,(0,p.default)({data:t,renderItem:i,style:ws,contentContainerStyle:Ss,ItemSeparatorComponent:s,onEndReached:n,onEndReachedThreshold:.5,refreshControl:l,ListEmptyComponent:u},o))};var Rs=n(22605),Is={code:"function anonymous(event){const{scrollY}=this.__closure;scrollY.value=event.contentOffset.y;}",location:"/Users/morgantrudeau/projects/delivfree/app/screens/RestaurantsScreen.tsx",sourceMap:'{"version":3,"names":["anonymous","event","scrollY","__closure","value","contentOffset","y"],"sources":["/Users/morgantrudeau/projects/delivfree/app/screens/RestaurantsScreen.tsx"],"mappings":"AAuCiD,SAAAA,SAAUA,CAAAC,KAAA,QAAAC,OAAA,OAAAC,SAAA,CACvDD,OAAO,CAACE,KAAK,CAAGH,KAAK,CAACI,aAAa,CAACC,CAAC,CACvC"}',version:"3.5.4"},Ds=function(e){var t=e.navigation,r=e.route,a=r.params.cuisine,o=(0,m.useSafeAreaInsets)(),i=function(e){var t=(0,f.useRef)(Xr()),n=it((function(e){return e.user.user})),r=(0,f.useState)(t.current.listCache[e]),a=r[0],o=r[1],i=(0,f.useRef)(0),s=(0,f.useCallback)((0,A.default)(h().mark((function r(){var a,s,l,u;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i.current=i.current+1,l=15*i.current,r.next=4,Yr({latitude:null==n||null==(a=n.location)?void 0:a.latitude,longitude:null==n||null==(s=n.location)?void 0:s.longitude},{cuisine:e,limit:l});case 4:u=r.sent,o(u),t.current.updateCache(e,u);case 7:case"end":return r.stop()}}),r)}))),[e]);return(0,f.useEffect)((function(){o(t.current.listCache[e]),s()}),[s,e]),{restaurants:a,loadRestaurants:s}}(r.params.cuisine),s=i.restaurants,l=i.loadRestaurants,u=(0,fn.useSharedValue)(0),c=(0,Rs.useAnimatedScrollHandler)(function(){var e=[new n.g.Error,-2,-27],t=function(e){u.value=e.contentOffset.y};return t.__closure={scrollY:u},t.__initData=Is,t.__workletHash=0xb2ad377d913,t.__stackDetails=e,t}()),d=(0,f.useMemo)((function(){return{paddingBottom:D.sm+o.bottom,paddingHorizontal:D.md}}),[o.bottom]),p=(0,f.useCallback)((function(e){return t.navigate("RestaurantDetail",{restaurantId:e.id})}),[t]),g=(0,f.useMemo)((function(){return f.createElement(dt.default,{style:_s},f.createElement(zt,{preset:"heading",style:Ls},li(a)),f.createElement(zi,{type:a,style:Os}))}),[a]),v=(0,f.useMemo)((function(){return f.createElement(dt.default,{style:{maxWidth:400}},f.createElement(dt.default,{style:Nt},f.createElement(Na,{source:ui(a),style:Ot})),f.createElement(zt,{preset:"subheading",style:Ps},"Coming Soon in your area!"))}),[]);return f.createElement(vo,{safeAreaEdges:bt,contentContainerStyle:kt},f.createElement(Ts,{restaurants:s,loadMore:l,ListHeaderComponent:g,contentContainerStyle:d,onScroll:c,scrollEventThrottle:16,refreshing:!1,onPress:p,ListEmptyComponent:v}))},Ls={},_s={paddingBottom:D.md},Ps={marginTop:D.sm,textAlign:"center"},Os={marginTop:D.sm,marginBottom:D.md},Ns=(0,f.forwardRef)((function(e,t){(0,ka.default)(e);var n=(0,f.useRef)(null),r=(0,f.useState)(""),a=r[0],o=r[1],i=function(e){var t;o(e),null==(t=n.current)||t.open()},s=function(){var e;return null==(e=n.current)?void 0:e.close()};return(0,f.useImperativeHandle)(t,(function(){return{open:i,close:s}}),[]),f.createElement(or,{ref:n,tapToClose:!0},f.createElement(dt.default,{style:Ms},f.createElement(Ao,{style:js}),f.createElement(zt,{size:"sm",weight:"semiBold"},"FREE DELIVERY & ZERO ADDED FEES"),f.createElement(zt,{size:"xs"},"You are saving money on this order via DelivFree. The menu price is all you pay!"),f.createElement(Nn,{text:"Continue",preset:"filled",onPress:function(){H.default.openURL(a),s()},style:Bs})))})),Ms={padding:D.md,alignItems:"center"},Bs={alignSelf:"stretch",marginTop:D.md},js={marginBottom:D.md},Ws=n(27248),zs=function(e){var t=e.route.params.restaurantId,n=(0,f.useRef)(Xr().cache[t]).current,r=(0,f.useRef)(null),a=(0,m.useSafeAreaInsets)(),o=(0,f.useMemo)((function(){return{height:a.top,position:"absolute",top:0,right:0,left:0}}),[a.top]);return f.createElement(f.Fragment,null,f.createElement(vo,{style:kt,preset:"scroll"},f.createElement(dt.default,{style:Us},f.createElement(Na,{source:{uri:n.image},style:ct.default.absoluteFillObject})),f.createElement(zt,{preset:"subheading",style:Vs,size:"xl"},n.name),f.createElement(zi,{type:"checkout",style:Qs}),f.createElement(dt.default,{style:Ks},!!n.menuLink&&f.createElement(Hs,{text:"View menu",icon:"food-fork-drink",onPress:function(){var e;null==(e=r.current)||e.open(n.menuLink)}}),!!n.orderLink&&f.createElement(Hs,{text:"Order online",icon:"web",onPress:function(){var e;null==(e=r.current)||e.open(n.orderLink)}}),!!n.phoneNumber&&f.createElement(Hs,{text:"Order by phone",icon:"phone",onPress:function(){var e;null==(e=r.current)||e.open("tel:"+n.phoneNumber)}}),!!n.address&&f.createElement(Hs,{text:n.address,icon:"pin",onPress:function(){var e=x.default.select({ios:"maps://0,0?q=",android:"geo:0,0?q="}),t=n.latitude+","+n.longitude,r="Custom Label",a=x.default.select({ios:""+e+r+"@"+t,android:""+e+t+"("+r+")",default:"https://www.google.com/maps/place/"+n.address+"/"});H.default.openURL(a)}}))),"ios"===x.default.OS&&a.top>0&&f.createElement(Ws.default,{colors:Fs,style:o}),f.createElement(xa.default,{style:"light"}),f.createElement(Ns,{ref:r}))},Hs=function(e){var t=e.icon,n=e.text,r=e.onPress;return f.createElement(qt.default,{style:Gs,onPress:r},f.createElement(Xt,{icon:t,style:qs}),f.createElement(zt,{style:Rt},n))},Fs=["rgba(0,0,0,0.5)","rgba(0,0,0,0)"],Us={width:"100%",aspectRatio:2.8},Vs={textAlign:"center",marginTop:D.sm},Ks={padding:D.md},Gs={flexDirection:"row",alignItems:"center",paddingVertical:D.sm,borderBottomWidth:ct.default.hairlineWidth,borderBottomColor:I.border},qs={marginRight:D.sm},Qs=(D.md,D.sm,D.md,D.md,I.palette.neutral200,ct.default.hairlineWidth,I.border,{paddingHorizontal:D.md,marginTop:D.md}),Ys=function(){var e=vr(),t=(0,f.useState)(""),n=t[0],r=t[1],a=(0,f.useState)(!1),o=a[0],i=a[1],s=function(e){return/^[_a-zA-Z0-9-+]+(\.[_a-zA-Z0-9-]+)*@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*(\.[a-zA-Z]{2,4})$/.test(e)}(n),l=function(){var t=(0,A.default)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s){t.next=2;break}return t.abrupt("return",e.alert("Invalid Email","Please enter a valid email"));case 2:return t.prev=2,i(!0),t.next=6,qo().sendPasswordResetEmail(n);case 6:return i(!1),t.abrupt("return",e.alert("Check your email","We have sent you a password reset link to your email. Click the link to reset your password."));case 10:return t.prev=10,t.t0=t.catch(2),i(!1),t.abrupt("return",e.alert(c("errors.heading"),c("errors.common")));case 14:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(){return t.apply(this,arguments)}}(),u=(0,f.useMemo)((function(){return o?function(e){var t=e.style;return f.createElement(Kn.default,{color:I.text,style:t})}:void 0}),[o]);return f.createElement(vo,{preset:"scroll",style:Xs},f.createElement(jo,null,f.createElement(zt,{preset:"heading",style:Zs},"Reset your password"),f.createElement(zt,null,"Enter your email and we will send you a password reset link."),f.createElement(bi,{value:n,onChangeText:r,placeholder:"Enter your email",style:$s}),f.createElement(Nn,{text:"Reset Password",onPress:l,style:Js,preset:"filled",RightAccessory:u})))},Xs={padding:D.md},Zs={marginBottom:D.xs},$s={marginTop:D.md},Js={marginTop:D.lg},el=n(7101),tl={useOnPlatform:"all",url:"https://us-central1-delivfree-app.cloudfunctions.net/googlePlaces"},nl={key:"AIzaSyD0evHPMfgWWvkNA2E7ssT_zWFNZMnhp_M",language:"en"},rl={textInput:Mt};const al=function(e){var t=e.onPress;return f.createElement(el.GooglePlacesAutocomplete,{placeholder:"Search",onPress:t,query:nl,requestUrl:tl,styles:rl,fetchDetails:!0,textInputProps:{placeholderTextColor:I.textDim}})};var ol,il=function(e){var t=e.navigation,n=vr(),r=it((function(e){return e.auth.authToken})),a=(0,f.useState)(!1),o=a[0],i=a[1],s=(0,f.useState)(),l=s[0],u=s[1],d=(0,f.useCallback)((0,A.default)(h().mark((function e(){var a,o,s,u,d,f,m,p,A,g;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,l){e.next=3;break}throw"missing_address";case 3:return s=null==(a=l.address_components.find((function(e){return e.types.includes("locality")||e.types.includes("administrative_area_level_3")})))?void 0:a.long_name,u=null==(o=l.address_components.find((function(e){return e.types.includes("country")})))?void 0:o.short_name,console.log(l.address_components),d=s+", "+u,f=l.geometry.location,m=f.lat,p=f.lng,A=Vr.geohashForLocation([m,p]),g={latitude:l.geometry.location.lat,longitude:l.geometry.location.lng,address:d,geohash:A},i(!0),e.next=13,Ti(r,{location:g});case 13:t.goBack(),i(!1),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(0),i(!1),n.alert(c("errors.heading"),c("errors.common"));case 21:case"end":return e.stop()}}),e,null,[[0,17]])}))),[l]);return(0,f.useEffect)((function(){t.setOptions({headerRight:function(){return l||o?o?f.createElement(Kn.default,{color:I.primary}):f.createElement(qt.default,{onPress:d},f.createElement(Xt,{icon:"check-circle",color:I.primary})):null}})}),[d,l,o]),f.createElement(vo,{preset:"fixed",style:kt,contentContainerStyle:St},f.createElement(al,{onPress:function(e,t){console.log(t.address_components),u(t)}}))},sl=function(){return f.createElement(dt.default,{style:ll},f.createElement(mo,{height:60}),f.createElement(Kn.default,{size:"large",color:I.primary,style:ul}))},ll={flex:1,alignItems:"center",justifyContent:"center"},ul={marginTop:D.md},cl=n(37974),dl=["label","containerStyle","onChangeCallingCode","onChangeCountry","callingCountry"],fl=(0,f.forwardRef)((function(e,t){var n=e.label,r=e.containerStyle,a=e.onChangeCallingCode,o=e.onChangeCountry,i=e.callingCountry,s=(0,Bt.default)(e,dl);return f.createElement(dt.default,{style:r},!!n&&f.createElement(zt,{preset:"formLabel",text:n,style:ml}),f.createElement(cl.default,(0,p.default)({ref:t,textInputStyle:Mt,textInputProps:(0,p.default)({placeholderTextColor:I.textDim},s.textInputProps),containerStyle:{width:void 0,backgroundColor:I.background,padding:0,paddingHorizontal:0,paddingVertical:0},textContainerStyle:{backgroundColor:I.background,padding:0,paddingHorizontal:0,paddingVertical:0},flagButtonStyle:(0,p.default)({backgroundColor:I.background,justifyContent:"center",alignItems:"center"},Mt,{flexDirection:"row",minHeight:0,paddingVertical:0,padding:0,marginRight:D.sm}),flagSize:25,codeTextStyle:{marginRight:0,marginLeft:D.xxs,color:I.text},disableArrowIcon:!0,defaultCode:i||"CA",onChangeCountry:function(e){o&&o(e),a&&a("+"+e.callingCode[0],e.cca2)}},s)))})),ml={marginBottom:D.xxs},pl=(0,J.createAsyncThunk)("driver/createDriver",function(){var e=(0,A.default)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X().collection("Drivers").doc(t.id).set(t);case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Al=(0,J.createAsyncThunk)("driver/listenToDriver",(function(e,t){var n=t.dispatch;return X().collection("Drivers").doc(e).onSnapshot((function(e){return n(qe((null==e?void 0:e.data())||null))}))})),gl=(0,J.createAsyncThunk)("driver/listenToVendorDrivers",(function(e,t){var n=t.dispatch;return X().collection("Drivers").where("vendors","array-contains",e).onSnapshot((function(e){var t=e?e.docs.reduce((function(e,t){var n;return(0,p.default)({},e,((n={})[t.id]=t.data(),n))}),{}):{};n(Ze(t))}))})),hl=function(){var e=vr(),t=(0,f.useRef)(null),n=(0,f.useRef)(null),r=it((function(e){return e.auth.authToken})),a=it((function(e){return e.user.user})),o=it((function(e){return e.driver.data})),i=ot(),s=(0,f.useState)(!1),l=s[0],u=s[1],c=(0,f.useState)({id:K(),firstName:(null==o?void 0:o.firstName)||"",lastName:(null==o?void 0:o.lastName)||"",callingCountry:(null==o?void 0:o.callingCountry)||"CA",callingCode:(null==o?void 0:o.callingCode)||"+1",phoneNumber:(null==o?void 0:o.phoneNumber)||"",registration:{status:"pending"},vendors:[],parentDrivers:{},user:r}),d=c[0],m=c[1],g=function(e){return function(t){m((function(n){var r;return(0,p.default)({},n,((r={})[e]=t,r))}))}},v=d.firstName&&d.lastName&&d.phoneNumber,C=(0,f.useCallback)((0,A.default)(h().mark((function t(){var n;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(v){t.next=2;break}return t.abrupt("return",e.alert("Form incomplete","Please complete all fields before continuing."));case 2:if(n={id:r,firstName:d.firstName,lastName:d.lastName,driver:{id:d.id}},t.prev=3,u(!0),!a){t.next=10;break}return t.next=8,Ti(n.id,n);case 8:t.next=12;break;case 10:return t.next=12,i(ki((0,p.default)({},n,{location:null})));case 12:return t.next=14,i(pl(d));case 14:u(!1),t.next=21;break;case 17:t.prev=17,t.t0=t.catch(3),u(!1),e.alert("Something went wrong","Please try that again.");case 21:case"end":return t.stop()}}),t,null,[[3,17]])}))),[d,r,i,e]),y=(0,f.useMemo)((function(){return l?function(e){var t=e.style;return f.createElement(Kn.default,{color:"#fff",style:t})}:void 0}),[l]);return f.createElement(vo,{preset:"scroll",contentContainerStyle:Cl},f.createElement(jo,null,f.createElement(zt,{style:yl,preset:"heading",weight:"bold"},"Driver profile"),f.createElement(ko,{onChangeText:g("firstName"),placeholder:"First name",label:"First name",containerStyle:bl,value:d.firstName,returnKeyType:"next",onSubmitEditing:function(){var e;return null==(e=t.current)?void 0:e.focus()}}),f.createElement(ko,{ref:t,onChangeText:g("lastName"),placeholder:"Last name",label:"Last name",value:d.lastName,containerStyle:bl,onSubmitEditing:function(){var e;return null==(e=n.current)?void 0:e.focus()}}),f.createElement(fl,{ref:n,onChangeText:g("phoneNumber"),onChangeCallingCode:function(e,t){m((function(n){return(0,p.default)({},n,{callingCode:e,callingCountry:t})}))},placeholder:"Phone number",label:"Phone number",value:d.phoneNumber,containerStyle:bl,callingCountry:d.callingCountry}),null!=o&&o.registration?f.createElement(dt.default,{style:[Pt,{marginTop:D.lg}]},f.createElement(zt,null,f.createElement(zt,{preset:"subheading"},"Registration Status: "),f.createElement(zt,{size:"lg"},vl(o.registration.status))),o.registration.message?f.createElement(dt.default,{style:Tt},f.createElement(Xt,{icon:"information",color:I.error,size:pt.md}),f.createElement(zt,{style:{marginLeft:D.xs}},o.registration.message)):f.createElement(zt,null,"Please wait while we review your registration submission. This will take 5-7 business days.")):f.createElement(Nn,{preset:v?"filled":"default",style:El,text:"Continue",onPress:C,RightAccessory:y})))},vl=function(e){switch(e){case"approved":return"Approved";case"declined":return"Declined";case"pending":return"Pending"}},Cl={padding:D.md},yl={marginBottom:D.lg,alignSelf:"center"},bl={marginTop:D.sm},El={marginTop:D.lg},xl=function(){var e=vr(),t=(0,f.useRef)(null),n=(0,f.useRef)(null),r=(0,f.useRef)(null),a=it((function(e){return e.auth.authToken})),o=it((function(e){return e.user.user})),i=it((function(e){return e.vendor.data})),s=ot(),l=(0,f.useState)(!1),u=l[0],c=l[1],d=(0,f.useState)({id:(null==i?void 0:i.id)||K(),firstName:(null==i?void 0:i.firstName)||(null==o?void 0:o.firstName)||"",lastName:(null==i?void 0:i.lastName)||(null==o?void 0:o.lastName)||"",businessName:(null==i?void 0:i.businessName)||"",callingCode:(null==i?void 0:i.callingCode)||"+1",callingCountry:(null==i?void 0:i.callingCountry)||"CA",phoneNumber:(null==i?void 0:i.phoneNumber)||"",registration:{status:"pending"},users:[a]}),m=d[0],g=d[1],v=(0,f.useMemo)((function(){return Object.values(m).every((function(e){return!!e}))}),[m]),C=function(){var t=(0,A.default)(h().mark((function t(){var n;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(v){t.next=2;break}return t.abrupt("return",e.alert("Missing fields","Please fill out all fields before continuing."));case 2:if(n={id:a,firstName:m.firstName,lastName:m.lastName,vendor:{ids:[m.id]}},t.prev=3,c(!0),!o){t.next=12;break}return t.next=8,Ti(n.id,{vendor:{ids:[m.id]}});case 8:return t.next=10,s(Se(m));case 10:t.next=16;break;case 12:return t.next=14,s(ki((0,p.default)({},n,{location:null})));case 14:return t.next=16,s(Se(m));case 16:c(!1),t.next=23;break;case 19:t.prev=19,t.t0=t.catch(3),c(!1),e.alert("Something went wrong","Please try that again.");case 23:case"end":return t.stop()}}),t,null,[[3,19]])})));return function(){return t.apply(this,arguments)}}(),y=(0,f.useMemo)((function(){return u?function(e){var t=e.style;return f.createElement(Kn.default,{color:"#fff",style:t})}:void 0}),[u]);return f.createElement(vo,{preset:"scroll",contentContainerStyle:Sl},f.createElement(jo,null,f.createElement(zt,{style:kl,preset:"heading",weight:"bold"},"Vendor profile"),f.createElement(ko,{placeholder:"First name",label:"First name",validation:Il,onChangeText:function(e){return g((function(t){return(0,p.default)({},t,{firstName:e})}))},containerStyle:Rl,value:m.firstName,onSubmitEditing:function(){var e;return null==(e=t.current)?void 0:e.focus()}}),f.createElement(ko,{placeholder:"Last name",label:"Last name",onChangeText:function(e){return g((function(t){return(0,p.default)({},t,{lastName:e})}))},containerStyle:Rl,ref:t,value:m.lastName,onSubmitEditing:function(){var e;return null==(e=n.current)?void 0:e.focus()}}),f.createElement(ko,{placeholder:"Business name",label:"Business name",onChangeText:function(e){return g((function(t){return(0,p.default)({},t,{businessName:e})}))},containerStyle:Rl,ref:n,value:m.businessName,onSubmitEditing:function(){var e;return null==(e=r.current)?void 0:e.focus()}}),f.createElement(fl,{placeholder:"Phone number",label:"Phone number",containerStyle:Rl,value:m.phoneNumber,onChangeText:function(e){return g((function(t){return(0,p.default)({},t,{phoneNumber:e})}))},onChangeCallingCode:function(e,t){g((function(n){return(0,p.default)({},n,{callingCode:e,callingCountry:t})}))},callingCountry:m.callingCountry}),null!=i&&i.registration?f.createElement(dt.default,{style:[Pt,{marginTop:D.lg}]},f.createElement(zt,null,f.createElement(zt,{preset:"subheading"},"Registration Status: "),f.createElement(zt,{size:"lg"},wl(i.registration.status))),i.registration.message?f.createElement(dt.default,{style:Tt},f.createElement(Xt,{icon:"information",color:I.error,size:pt.md}),f.createElement(zt,{style:{marginLeft:D.xs}},i.registration.message)):f.createElement(zt,null,"Please wait while we review your registration submission. This will take 5-7 business days.")):f.createElement(Nn,{preset:v?"filled":"default",style:Tl,text:"Continue",onPress:C,RightAccessory:y})))},wl=function(e){switch(e){case"approved":return"Approved";case"declined":return"Declined";case"pending":return"Pending"}},Sl={padding:D.md},kl={marginBottom:D.lg,alignSelf:"center"},Tl={marginTop:D.lg},Rl={marginTop:D.sm},Il=function(e){return!!e},Dl=function(e){var t=function(t){return function(){"driver"===t?e.navigation.navigate("EditDriverProfile"):e.navigation.navigate("EditVendorProfile")}};return f.createElement(vo,{preset:"scroll",contentContainerStyle:St},f.createElement(jo,null,f.createElement(zt,{preset:"heading"},"What is your role?"),f.createElement(zt,{style:Ll},"Choose whether you are registering as a Restaurant or a Driver."),f.createElement(Nn,{text:"Vendor",onPress:t("vendor"),style:_l}),f.createElement(Nn,{text:"Driver",onPress:t("driver"),style:_l})))},Ll={marginBottom:D.sm},_l={marginTop:D.sm},Pl=n(1828),Ol={backgroundColor:"#ffffff",backgroundGradientFrom:"#fff",backgroundGradientTo:"#fff",decimalPlaces:2,color:function(e){return void 0===e&&(e=1),"rgba(0, 0, 0, "+e+")"},labelColor:function(e){return void 0===e&&(e=1),"rgba(0, 0, 0, "+e+")"},style:{backgroundColor:"#ffffff"},propsForDots:{r:"5"},propsForLabels:{fontFamily:O.primary.normal}},Nl=function(e){return f.createElement(Pl.LineChart,(0,p.default)({yAxisLabel:"$",yAxisInterval:1,chartConfig:Ol,withHorizontalLines:!1,bezier:!0,fromZero:!0,withShadow:!1,style:{paddingVertical:D.sm,marginVertical:8,borderRadius:16}},e))},Ml=n(95093),Bl=n.n(Ml),jl=[500*Math.random(),500*Math.random(),500*Math.random(),500*Math.random(),500*Math.random(),500*Math.random()],Wl=new Array(7).fill(0).map((function(){return 5e3*Math.random()})),zl=[{name:"James",spend:"$590.99",phone:"778-898-0345"},{name:"Sarah",spend:"$338.99",phone:"604-772-2292"},{name:"Lina",spend:"$150.99",phone:"778-251-9828"},{name:"Rod",spend:"$128.50",phone:"778-555-9521"},{name:"Gary",spend:"$89.99",phone:"778-877-2212"}],Hl="MMM Do",Fl=function(e){var t=(0,m.useSafeAreaInsets)(),n=(0,qn.default)().width,r=n>gt,a=(0,f.useMemo)((function(){return q(jl.reduce((function(e,t){return e+t}),0),"USD")}),[]),o=(0,f.useMemo)((function(){return q(Wl.reduce((function(e,t){return e+t}),0),"USD")}),[]),i=(0,f.useMemo)((function(){var e=Bl()().subtract(8,"days"),t=Bl()().subtract(1,"days"),n=t.diff(e,"days"),r=new Array(n).fill("");return r[0]=e.format(Hl),r[r.length-1]=t.format(Hl),r}),[]);return f.createElement(Xa,{navigation:e.navigation},f.createElement(vo,{preset:"scroll",style:kt,contentContainerStyle:[St,{paddingBottom:t.bottom+D.sm}],inDrawer:!0},f.createElement(zt,{preset:"heading"},"Today"),f.createElement(dt.default,{style:{paddingVertical:D.md}},f.createElement(zt,null,"Gross volume"),f.createElement(zt,{preset:"subheading"},a),f.createElement(Nl,{width:Math.min(1e3,n*(r?.8:1)),height:300,data:{labels:["12:00am","","","","","11.59pm"],datasets:[{data:jl,color:function(){return I.primary}}]}})),f.createElement(zt,{preset:"heading"},"Your Overview"),f.createElement(dt.default,{style:[Tt,{borderWidth:1,borderRadius:mt,borderColor:I.border,alignSelf:"flex-start",marginTop:D.xs}]},f.createElement(dt.default,{style:{borderRightWidth:1,borderRightColor:I.border,flex:1,paddingHorizontal:D.xs,paddingVertical:D.xxs}},f.createElement(zt,null,"Last 7 days")),f.createElement(dt.default,{style:[Tt,{paddingHorizontal:D.xs,paddingVertical:D.xxs}]},f.createElement(Xt,{icon:"calendar",style:{marginRight:D.xs},size:pt.md}),f.createElement(zt,null,Bl()().subtract(8,"days").format("MMM Do")," -"," ",Bl()().subtract(1,"days").format("MMM Do")))),f.createElement(dt.default,{style:{paddingVertical:D.md,flexDirection:r?"row":void 0,flexWrap:r?"wrap":void 0,gap:r?D.xl:void 0}},f.createElement(dt.default,null,f.createElement(zt,null,"Gross volume"),f.createElement(zt,{preset:"subheading"},o),f.createElement(Nl,{width:Math.min(450,n*(r?.35:1)),height:300,data:{labels:i,datasets:[{data:Wl,color:function(){return I.primary}}]}})),f.createElement(dt.default,null,f.createElement(zt,null,"Top customers by spend"),f.createElement(dt.default,{style:{paddingVertical:D.sm,width:r?Math.min(450,.35*n):void 0,height:300}},zl.map((function(e){var t=e.name,n=e.spend,r=e.phone;return f.createElement(dt.default,{key:t,style:[Tt,{paddingVertical:D.xxs,borderBottomWidth:1,borderBottomColor:I.border}]},f.createElement(dt.default,{style:Rt},f.createElement(zt,null,t),f.createElement(zt,{size:"xs",style:{color:I.textDim}},r)),f.createElement(zt,null,n))})))))))},Ul=function(e,t,n,r){return X().collection("Orders").orderBy("date","desc").where("vendor","==",e).where("restaurantLocation","==",t).limit(n).onSnapshot((function(e){r(e?e.docs.map((function(e){return e.data()})):[])}))},Vl=function(e,t){return X().collection("Orders").doc(e).update(t)},Kl=function(e){var t=e.onLocationSelected,n=e.shortenAddress;return f.createElement(al,{onPress:function(e,r){var a=r.formatted_address;if(n){var o,i,s=null==(o=r.address_components.find((function(e){return e.types.includes("locality")||e.types.includes("administrative_area_level_3")})))?void 0:o.long_name,l=null==(i=r.address_components.find((function(e){return e.types.includes("country")})))?void 0:i.short_name;console.log(r.address_components),a=s+", "+l}var u=r.geometry.location,c=u.lat,d=u.lng,f=Vr.geohashForLocation([c,d]),m={latitude:r.geometry.location.lat,longitude:r.geometry.location.lng,address:a,geohash:f};t(m)}})},Gl=(0,f.forwardRef)((function(e,t){var n=e.onLocationSelected,r=e.shortenAddress;return f.createElement(or,{ref:t,contentStyle:{maxWidth:Et-2*D.md}},f.createElement(dt.default,{style:{height:400,padding:D.md}},f.createElement(zt,{preset:"subheading",style:{marginBottom:D.sm}},"Address Search"),f.createElement(Kl,{onLocationSelected:n,shortenAddress:r})))})),ql=function(e){var t=e.location,n=e.onLocationSelect,r=(0,f.useRef)(null);return f.createElement(f.Fragment,null,f.createElement(zt,{preset:"formLabel",style:{marginBottom:D.xs,marginTop:D.sm}},"Address"),f.createElement(qt.default,{onPress:function(){var e;return null==(e=r.current)?void 0:e.open()},style:Mt},f.createElement(zt,{style:t.address?void 0:{color:I.textDim}},t.address?t.address:"Search Address")),f.createElement(Gl,{ref:r,onLocationSelected:function(e){var t;null==(t=r.current)||t.close(),n({address:e.address,latitude:e.latitude,longitude:e.longitude,geohash:e.geohash})},shortenAddress:!1}))},Ql=function(e){var t=e.initialPhoneNumber,n=e.onCustomerSelect,r=e.style,a=e.restaurantLocation,o=vr(),i=((0,f.useRef)(null),(0,f.useState)(0)),s=i[0],l=i[1],u=(0,f.useRef)(null),c=it((function(e){return e.vendor.data})),d=(0,f.useState)({customers:[],loading:!1,callingCountry:"CA",callingCode:"+1",phoneNumber:t||"",searching:!t}),m=d[0],g=m.customers,v=m.loading,C=m.callingCountry,y=m.callingCode,b=m.phoneNumber,E=m.searching,x=d[1],w=(0,f.useState)(!1),S=w[0],k=w[1],T=(0,f.useState)({id:K(),name:"",location:{address:"",latitude:0,longitude:0,geohash:""},callingCountry:"CA",callingCode:"+1",phoneNumber:"",vendor:(null==c?void 0:c.id)||"",restaurantLocation:a}),R=T[0],L=T[1],_=R.location.address&&R.phoneNumber&&R.name,P=function(){var e=(0,A.default)(h().mark((function e(t){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x((function(e){return(0,p.default)({},e,{phoneNumber:t,loading:!0,customers:[],searching:!0})})),e.next=3,X().collection("Customers").where("restaurantLocation","==",a).where("phoneNumber",">=",y+t).where("phoneNumber","<",y+t+"\uf8ff").get();case 3:n=e.sent,r=n.docs.map((function(e){return e.data()})),x((function(e){return(0,p.default)({},e,{phoneNumber:t,loading:!1,customers:r,searching:!0})}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=(0,A.default)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,_){e.next=3;break}return e.abrupt("return",o.alert("Missing Fields","Please fill out the required fields."));case 3:return k(!0),e.next=6,X().collection("Customers").doc(R.id).set(R);case 6:n(R),null==(t=u.current)||t.close(),k(!1),x({callingCode:R.callingCode,phoneNumber:R.phoneNumber,callingCountry:R.callingCountry,loading:!1,customers:g,searching:!1}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),k(!1),o.alert("Something went wrong","Failed to add customer. Please try again.");case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),N=(0,f.useMemo)((function(){return S?function(e){var t=e.style;return f.createElement(Kn.default,{style:t,color:"#fff"})}:void 0}),[S]);return f.createElement(dt.default,{style:[Yl,r],onLayout:function(e){var t=e.nativeEvent.layout.height;l(t)}},f.createElement(fl,{label:"Customer phone number",placeholder:"Customer phone number",onChangeText:P,onChangeCallingCode:function(e,t){x((function(n){return(0,p.default)({},n,{callingCode:e,callingCountry:t})}))},value:b,callingCountry:C}),!!b&&E&&f.createElement(dt.default,{style:[Xl,{top:s+D.sm}]},v&&f.createElement(Kn.default,null),g.length?g.map((function(e,t){return f.createElement(qt.default,{key:e.phoneNumber+"-"+t,onPress:function(){x({callingCode:e.callingCode,phoneNumber:e.phoneNumber,callingCountry:e.callingCountry,loading:!1,customers:g,searching:!1}),n(e)}},f.createElement(zt,null,e.name),f.createElement(zt,{size:"xs",style:{color:I.textDim}},e.location.address))})):v?null:f.createElement(zt,{style:{marginBottom:D.xs}},"No customers found"),!v&&!g.length&&f.createElement(Jt,{text:"Add Customer",onPress:function(){L((function(e){return(0,p.default)({},e,{callingCode:y,callingCountry:C,phoneNumber:b})})),setTimeout((function(){var e;null==(e=u.current)||e.open()}),200)}})),f.createElement(or,{ref:u},f.createElement(dt.default,{style:Zl},f.createElement(zt,{preset:"subheading"},"Add customer"),f.createElement(fl,{placeholder:"Phone number",label:"Phone number",value:R.phoneNumber,containerStyle:$l,onChangeText:function(e){return L((function(t){return(0,p.default)({},t,{phoneNumber:e})}))},onChangeCallingCode:function(e,t){L((function(n){return(0,p.default)({},n,{callingCode:e,callingCountry:t})}))},callingCountry:R.callingCountry}),f.createElement(ko,{placeholder:"Name",label:"Name",containerStyle:$l,value:R.name,onChangeText:function(e){return L((function(t){return(0,p.default)({},t,{name:e})}))}}),f.createElement(ql,{location:R.location,onLocationSelect:function(e){return L((function(t){return(0,p.default)({},t,{location:e})}))}}),f.createElement(Nn,{text:"Add customer",onPress:O,style:Jl,preset:_?"filled":"default",RightAccessory:N}))))},Yl={zIndex:999},Xl=[{padding:D.sm,borderRadius:mt,position:"absolute",top:45,backgroundColor:I.background,borderWidth:ct.default.hairlineWidth,borderColor:I.border,zIndex:999},It],Zl={backgroundColor:I.background,padding:D.md},$l={marginTop:D.sm},Jl={marginTop:D.md},eu=["onDismiss"],tu=function(e){var t=e.onClose,n=e.editOrder,r=e.restaurantLocationId,a=vr(),o=(0,f.useRef)(null),i=(0,f.useRef)(null),s=it((function(e){var t;return{customers:e.customers.data,vendorId:null==(t=e.vendor.data)?void 0:t.id}})),l=s.customers,u=s.vendorId,c=(0,f.useState)(!1),d=c[0],m=c[1],g=(0,f.useState)(!1),v=g[0],C=g[1],y=(0,f.useState)(n||{id:K(),description:"",amount:"",tip:"",customer:"",date:Bl()().valueOf(),status:"in-progress",vendor:u,restaurantLocation:r,driver:null}),b=y[0],E=y[1],x=b.amount&&b.tip&&b.customer,w=l[b.customer],S=function(){var e=(0,A.default)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,b.customer){e.next=3;break}return e.abrupt("return",a.alert("Missing Customer","Please select a customer"));case 3:if(b.amount){e.next=5;break}return e.abrupt("return",a.alert("Missing Amount","Please enter an amount"));case 5:return m(!0),e.next=8,X().collection("Orders").doc(b.id).set((0,p.default)({},b,{amount:b.amount.replace("$",""),tip:b.tip.replace("$","")}));case 8:m(!1),t(),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),m(!1),console.log("Create order order",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=(0,A.default)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new Promise((function(e){a.alert("Delete Order","Are you sure you want to delete this order?",[{text:"Cancel",onPress:function(){return e(!1)}},{text:"Delete",onPress:function(){return e(!0)}}])}));case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:return C(!0),e.next=9,X().collection("Orders").doc(b.id).delete();case 9:C(!1),t(),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),C(!1),console.log("Delete order order",e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),T=(0,f.useMemo)((function(){return d?function(e){var t=e.style;return f.createElement(Kn.default,{style:t,color:"#fff"})}:void 0}),[d]);return f.createElement(dt.default,{style:au},f.createElement(dt.default,{style:Tt},f.createElement(zt,{preset:"subheading",style:{flex:1}},"Create Order"),n&&f.createElement(dt.default,{style:Tt},f.createElement(qt.default,{onPress:k},f.createElement(zt,{style:{color:I.error}},"Delete")),v&&f.createElement(Kn.default,{color:I.error,style:{marginLeft:D.xs}}))),!!w&&f.createElement(dt.default,{style:{marginTop:D.sm}},f.createElement(zt,{size:"xs"},"Customer"),f.createElement(zt,{preset:"semibold"},w.name)),f.createElement(Ql,{onCustomerSelect:function(e){return E((function(t){return(0,p.default)({},t,{customer:e.id})}))},initialPhoneNumber:null==w?void 0:w.phoneNumber,style:ou,validation:ru,restaurantLocation:r}),f.createElement(ko,{label:"Description",placeholder:"Description",containerStyle:ou,value:b.description,onChangeText:function(e){return E((function(t){return(0,p.default)({},t,{description:e})}))},onSubmitEditing:function(){var e;return null==(e=o.current)?void 0:e.focus()}}),f.createElement(ko,{label:"Order amount",placeholder:"Order amount",containerStyle:ou,onBlur:function(){E((function(e){return(0,p.default)({},e,{amount:q(Number(e.amount),"USD")})}))},value:b.amount,onChangeText:function(e){return E((function(t){return(0,p.default)({},t,{amount:e})}))},ref:o,onSubmitEditing:function(){var e;return null==(e=i.current)?void 0:e.focus()},onFocus:function(){var e=b.amount.replace("$","");Number(e)||(e=""),E((function(t){return(0,p.default)({},t,{amount:e})}))},numberInput:!0,validation:ru}),f.createElement(ko,{label:"Tip amount",placeholder:"Tip amount",containerStyle:ou,onBlur:function(){E((function(e){return(0,p.default)({},e,{tip:q(Number(e.tip),"USD")})}))},value:b.tip,onChangeText:function(e){return E((function(t){return(0,p.default)({},t,{tip:e})}))},onFocus:function(){var e=b.tip.replace("$","");Number(e)||(e=""),E((function(t){return(0,p.default)({},t,{tip:e})}))},ref:i,numberInput:!0}),f.createElement(Nn,{onPress:S,text:n?"Update Order":"Create Order",style:iu,preset:x?"filled":"default",RightAccessory:T}))},nu=(0,f.forwardRef)((function(e,t){var n=e.onDismiss,r=(0,Bt.default)(e,eu);return f.createElement(or,{ref:t,onDismiss:n},f.createElement(tu,r))})),ru=function(e){return!!e},au={padding:D.md},ou={marginTop:D.sm},iu={marginTop:D.md},su=function(e){var t=e.order,n=e.userType,r=e.onOrderPress,a=e.customer,o=e.claimOrder,i=e.driverId,s=e.changeOrderStatus,l=e.driverName,u=e.onViewCustomer,c="driver"===n&&!t.driver,d=t.driver===i&&!["complete","incomplete","canceled"].includes(t.status);return React.createElement(qt.default,{style:cu,onPress:function(){return r(t)}},React.createElement(zt,{numberOfLines:1,ellipsizeMode:"tail",style:Rt,preset:"subheading",size:"sm"},t.description),React.createElement(dt.default,{style:Tt},React.createElement(zt,{style:{marginRight:D.md},size:"xs"},"Order value: ",q(Number(t.amount),"USD")),React.createElement(zt,{size:"xs"},"Tip: ",q(Number(t.tip),"USD"))),React.createElement(dt.default,{style:[Tt,{marginTop:D.xxs}]},React.createElement(dt.default,{style:[Tt,Rt]},React.createElement(dt.default,{style:[du,{backgroundColor:lu(t.status)}]}),React.createElement(zt,{size:"xs"},uu(t.status))),React.createElement(zt,{numberOfLines:1,ellipsizeMode:"tail",size:"xs",style:{color:I.textDim}},Bl()(t.date).format("MMM Do, h:mma"))),React.createElement(dt.default,{style:[Tt,Pt,{marginTop:D.sm}]},React.createElement(dt.default,{style:Rt},React.createElement(zt,{size:"xxs",style:{color:I.textDim}},"Customer"),React.createElement(zt,{style:Rt},a.name)),React.createElement(Jt,{text:"View Customer",onPress:function(){return u(a)}})),i&&t.driver&&t.driver!==i&&React.createElement(zt,{style:{marginTop:D.xs}},"Driver: ",l),(c||d)&&React.createElement(dt.default,{style:[Tt,{marginTop:D.sm}]},c&&React.createElement(Jt,{text:"Claim order",onPress:function(){return o(t.id)}}),d&&React.createElement(React.Fragment,null,React.createElement(Jt,{text:"Arrived",style:{marginRight:D.sm},onPress:function(){return s(t.id,"arrived")},RightAccessory:"arrived"===t.status?function(e){var t=e.style;return React.createElement(Xt,{icon:"check-circle",color:I.primary,style:t})}:void 0,disabled:"arrived"===t.status}),React.createElement(Jt,{text:"Complete",onPress:function(){return s(t.id,"complete")}}))))},lu=function(e){switch(e){case"incomplete":return I.error;case"canceled":return I.palette.shade500;case"complete":return I.success;case"arrived":case"in-progress":return I.palette.accent500}},uu=function(e){switch(e){case"incomplete":return"Incomplete";case"canceled":return"Cancelled";case"complete":return"Complete";case"arrived":return"Arrived";case"in-progress":return"In progress"}},cu={paddingVertical:D.sm,borderBottomWidth:1,borderBottomColor:I.borderLight},du={height:15,width:15,borderRadius:7.5,marginRight:D.xs},fu=["Amount","Tip","Description","Customer","Date","Driver","Status"],mu=function(e){switch(e){case"incomplete":return I.error;case"canceled":return I.palette.shade500;case"complete":return I.success;case"arrived":case"in-progress":return I.palette.accent500}},pu=function(e){var t=e.data,n=e.dataCells,r=e.onPress;return f.createElement(qt.default,{style:Au,onPress:r?function(){return r(t)}:void 0},n.map((function(e,t){return f.createElement(dt.default,{key:("renderData"in e?"data":e.text)+"-"+t,style:[gu,{maxWidth:e.maxWidth}]},"renderData"in e?e.renderData():f.createElement(zt,{preset:"subheading",size:"sm",numberOfLines:1,ellipsizeMode:"tail"},e.text))})))},Au={flexDirection:"row",alignItems:"center",paddingVertical:D.xs,borderBottomWidth:1,borderBottomColor:I.borderLight},gu={flex:1,paddingEnd:D.md,flexDirection:"row",alignItems:"center"},hu=(D.xs,f.memo((function(e){var t=e.order,n=e.onOrderPress,r=e.customer,a=e.driverName,o=(0,f.useMemo)((function(){return[{text:q(Number(t.amount),"USD"),maxWidth:void 0},{text:q(Number(t.tip),"USD"),maxWidth:void 0},{text:t.description,maxWidth:void 0},{text:r.name,maxWidth:void 0},{text:Bl()(t.date).format("MMM Do, h:mma"),maxWidth:void 0},{text:t.driver?a:"Unassigned",maxWidth:void 0},{renderData:function(){return f.createElement(f.Fragment,null,f.createElement(dt.default,{style:[vu,{backgroundColor:mu(t.status)}]}),f.createElement(zt,{preset:"subheading",size:"sm",numberOfLines:1,ellipsizeMode:"tail"},function(e){switch(e){case"incomplete":return"Incomplete";case"canceled":return"Cancelled";case"complete":return"Complete";case"arrived":return"Arrived";case"in-progress":return"In progress"}}(t.status)))},maxWidth:void 0}]}),[t,r.name]);return f.createElement(pu,{data:t,dataCells:o,onPress:n})}))),vu={height:15,width:15,borderRadius:7.5,marginRight:D.xs},Cu=["onDismiss"],yu=function(e){var t=e.customer;return f.createElement(dt.default,{style:Eu},f.createElement(zt,{preset:"subheading"},"Customer Details"),f.createElement(zt,{preset:"formLabel",style:xu},"Name"),f.createElement(zt,null,null==t?void 0:t.name),f.createElement(zt,{preset:"formLabel",style:xu},"Phone number"),f.createElement(zt,null,null==t?void 0:t.phoneNumber),f.createElement(zt,{preset:"formLabel",style:xu},"Address"),f.createElement(zt,null,null==t?void 0:t.location.address),f.createElement(Jt,{style:{alignSelf:"flex-start",marginTop:D.xs},text:"Navigate",onPress:function(){t&&function(e,t,n){var r=x.default.select({ios:"maps://0,0?q=",android:"geo:0,0?q="}),a=e+","+t,o="Custom Label",i=x.default.select({ios:""+r+o+"@"+a,android:""+r+a+"("+o+")",default:"https://www.google.com/maps/place/"+n+"/"});H.default.openURL(i)}(t.location.latitude,t.location.longitude,t.location.address)}}))},bu=(0,f.forwardRef)((function(e,t){var n=e.onDismiss,r=(0,Bt.default)(e,Cu);return f.createElement(or,{ref:t,onDismiss:n},f.createElement(yu,r))})),Eu={padding:D.md},xu={marginTop:D.sm},wu=function(e){var t=e.orders,n=e.loadOrders,r=e.onOrderPress,a=(0,m.useSafeAreaInsets)(),o=dn().width>gt,i=it((function(e){return e.appConfig.userType}));(0,f.useEffect)((function(){n()}),[]);var s=(0,f.useRef)(null),l=it((function(e){return e.customers.data})),u=it((function(e){return e.driver.data})),c=it((function(e){return e.vendorDrivers.data})),d=null==u?void 0:u.id,p=(0,f.useState)(""),g=p[0],v=p[1],C=(0,f.useState)(),y=C[0],b=C[1],E=(0,f.useCallback)(function(){var e=(0,A.default)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,d){e.next=3;break}throw"missing driver";case 3:return v(t),e.next=6,Vl(t,{driver:d});case 6:v(""),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),v(""),console.log("Failed to claim order",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),[d]),x=(0,f.useCallback)(function(){var e=(0,A.default)(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Vl(t,{status:n});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("Failed to change status",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,n){return e.apply(this,arguments)}}(),[]),w=(0,f.useCallback)((function(e){var t,n,a=e.item,u={order:a,claimLoading:g===a.id,userType:i,onOrderPress:r,customer:l[a.customer],claimOrder:E,driverId:d,changeOrderStatus:x,driverName:a.driver?(null==(t=c[a.driver])?void 0:t.firstName)+" "+(null==(n=c[a.driver])?void 0:n.lastName):"Unassigned",onViewCustomer:function(e){var t;b(e),null==(t=s.current)||t.open()}};return o?f.createElement(hu,u):f.createElement(su,u)}),[g,i,r,E,o]),S=(0,f.useCallback)((function(){return f.createElement(bs,{title:"No orders for this location"})}),[]);return f.createElement(f.Fragment,null,o?f.createElement(dt.default,{style:Su},fu.map((function(e){return f.createElement(dt.default,{key:e,style:[ku,{maxWidth:void 0}]},f.createElement(zt,{preset:"subheading",size:"xs"},e))}))):null,f.createElement(Ra.default,{data:t,renderItem:w,onEndReached:n,ListEmptyComponent:S,contentContainerStyle:[Tu,{paddingBottom:a.bottom}],style:Rt}),f.createElement(bu,{ref:s,customer:y,onDismiss:function(){b(void 0)}}))},Su={paddingVertical:D.xs,flexDirection:"row",alignItems:"center",borderTopWidth:1,borderTopColor:I.border,borderBottomWidth:1,borderBottomColor:I.borderLight},ku={flex:1,paddingEnd:D.md},Tu={flexGrow:1},Ru={code:"function anonymous(){const{openAnimation,interpolate}=this.__closure;return{opacity:openAnimation.value,transform:[{translateY:interpolate(openAnimation.value,[0,1],[10,0])}]};}",location:"/Users/morgantrudeau/projects/delivfree/app/components/RestaurantLocation/RestaurantLocationSelect.tsx",sourceMap:'{"version":3,"names":["anonymous","openAnimation","interpolate","__closure","opacity","value","transform","translateY"],"sources":["/Users/morgantrudeau/projects/delivfree/app/components/RestaurantLocation/RestaurantLocationSelect.tsx"],"mappings":"AAiEI,SAAAA,UAAA,QAAAC,aAAA,CAAAC,WAAA,OAAAC,SAAA,OAAO,CACLC,OAAO,CAAEH,aAAa,CAACI,KAAK,CAC5BC,SAAS,CAAE,CACT,CAAEC,UAAU,CAAEL,WAAW,CAACD,aAAa,CAACI,KAAK,CAAE,CAAC,CAAC,CAAE,CAAC,CAAC,CAAE,CAAC,EAAE,CAAE,CAAC,CAAC,CAAE,CAAC,CAErE,CAAC"}',version:"3.5.4"},Iu=function(e){var t=e.selectedLocationId,r=e.onSelect,a=e.style,o=it((function(e){return e.restaurantLocations.data})),i=(0,f.useMemo)((function(){return Object.values(o)}),[o]),s=(0,f.useRef)(null),l=(0,f.useState)(),u=l[0],c=l[1],d=(0,fn.useSharedValue)(0),m=(0,f.useState)(!1),g=m[0],v=m[1],C=function(){(i.length||g)&&(d.value=(0,mn.withTiming)(g?0:1),v(!g))},y=(0,pn.useAnimatedStyle)(function(){var e=[new n.g.Error,-3,-27],t=function(){return{opacity:d.value,transform:[{translateY:(0,An.interpolate)(d.value,[0,1],[10,0])}]}};return t.__closure={openAnimation:d,interpolate:An.interpolate},t.__initData=Ru,t.__workletHash=0xe2918a0ec79,t.__stackDetails=e,t}(),[d]),b=function(){var e=(0,A.default)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lu();case 2:(t=e.sent)&&o[t]&&r(o[t]);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,f.useEffect)((function(){b()}),[]);var E=o[t];return f.createElement(dt.default,{style:[{zIndex:999},a]},f.createElement(qt.default,{onPress:C,style:Pu,onLayout:function(e){var t,n=e.nativeEvent.layout;null==(t=s.current)||t.measure((function(e,t,r,a,o,i){c((0,p.default)({},n,{top:i,left:o}))}))},ref:s,collapsable:!1},E?f.createElement(f.Fragment,null,f.createElement(zt,{preset:"semibold"},E.name),f.createElement(zt,{size:"xs"},E.address)):f.createElement(zt,null,i.length?"Select a location":"No locations")),!!i.length&&f.createElement(Qn.Portal,null,f.createElement(qt.default,{style:ct.default.absoluteFill,onPress:C,pointerEvents:g?"auto":"none"}),f.createElement(gn.AnimatedView,{style:[It,Ou,y,{top:((null==u?void 0:u.top)||0)+((null==u?void 0:u.height)||0)+D.sm,left:(null==u?void 0:u.left)||0}],pointerEvents:g?"auto":"none"},i.map((function(e,t,n){return f.createElement(qt.default,{key:e.id,style:[Nu,t===n.length-1&&{borderBottomWidth:0}],onPress:function(){r(e),_u(e.id),C()}},f.createElement(zt,{preset:"semibold"},e.name),f.createElement(zt,{size:"xs"},e.address))})))))},Du="LAST_SELECTED_RESTAURANT_LOCATION",Lu=function(){var e=(0,A.default)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,we.default.getItem(Du);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),console.log("Failed to get last selected restaurant location",e.t0),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),_u=function(){var e=(0,A.default)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,we.default.setItem(Du,t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("Failed to save last selected restaurant location",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),Pu={paddingHorizontal:D.sm,paddingVertical:D.xs,borderRadius:mt,borderWidth:ct.default.hairlineWidth,borderColor:I.border,backgroundColor:I.surface},Ou={padding:D.xxs,position:"absolute",backgroundColor:I.background,borderRadius:mt,borderWidth:ct.default.hairlineWidth,borderColor:I.border},Nu={paddingHorizontal:D.sm,paddingVertical:D.xs,borderBottomWidth:ct.default.hairlineWidth,borderBottomColor:I.border},Mu=function(e){var t=e.title,n=e.buttonTitle,r=e.onButtonPress,a=(0,f.useMemo)((function(){return function(e){var t=e.style;return f.createElement(Xt,{icon:"plus",color:"#fff",style:t})}}),[]);return f.createElement(dt.default,{style:Bu},f.createElement(zt,{preset:"heading"},t),!(!n||!r)&&f.createElement(Jt,{LeftAccessory:a,text:n,preset:"filled",onPress:r}))},Bu=[Tt,{justifyContent:"space-between",paddingBottom:D.md}],ju=function(e,t){var n=(0,f.useRef)(Wu()),r=(0,f.useState)(n.current.listCache[t]),a=r[0],o=r[1],i=(0,f.useRef)(0),s=(0,f.useRef)((function(){})),l=(0,f.useCallback)((0,A.default)(h().mark((function r(){var a;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:i.current=i.current+1,a=15*i.current,s.current=e(a,(function(e){o(e),n.current.updateCache(t,e)}));case 3:case"end":return r.stop()}}),r)}))),[e,t]);return(0,f.useEffect)((function(){o(n.current.listCache[t]),l()}),[l,t]),{data:a,loadData:l}},Wu=function(){return ol||(ol=new zu),ol},zu=function(){var e=this;this.cache={},this.listCache={},this.updateCache=function(t,n){e.listCache[t]=n,e.cache=(0,p.default)({},e.cache,n.reduce((function(e,t){var n;return(0,p.default)({},e,((n={})[t.id]=t,n))}),{}))}},Hu=function(e){var t=vr(),n=it((function(e){var t;return null==(t=e.vendor.data)?void 0:t.id})),r=(0,f.useState)(),a=r[0],o=r[1],i=(0,f.useState)(""),s=i[0],l=i[1];console.log({vendorId:n,restaurantLocationId:s});var u=(0,f.useCallback)((function(e,t){return n&&s?Ul(n,s,e,t):function(){}}),[n,s]),c=ju(u,s),d=c.data,m=c.loadData,p=(0,f.useRef)(null);return f.createElement(Xa,{navigation:e.navigation},f.createElement(vo,{preset:"fixed",style:kt,contentContainerStyle:St,inDrawer:!0},f.createElement(Mu,{buttonTitle:"Create Order",onButtonPress:function(){var e;if(!s)return t.alert("Select a location","Please select a restaurant location for your order.");null==(e=p.current)||e.open()},title:"Orders"}),f.createElement(Iu,{selectedLocationId:s,onSelect:function(e){return l(e.id)},style:Fu}),f.createElement(wu,{orders:d,loadOrders:m,onOrderPress:function(e){var t;o(e),null==(t=p.current)||t.open()}}),f.createElement(nu,{ref:p,onClose:function(){var e;null==(e=p.current)||e.close()},editOrder:a,onDismiss:function(){o(void 0)},restaurantLocationId:s})))},Fu={alignSelf:"flex-start",marginBottom:D.sm},Uu=function(e){var t=e.fullTimeProduct,n=e.surgeProduct,r=e.subscription,a=e.referenceSubscription,o=vr(),i=(0,f.useRef)(null),s=it((function(e){return e.vendor.data})),l=it((function(e){return e.driver.data})),u=it((function(e){return e.appConfig.userType})),c=it((function(e){return e.auth.user})),d=(0,f.useMemo)((function(){var e;return null==(e=a||r)?void 0:e.items.data.find((function(e){return"prod_PvqVStGqKEDOhB"===e.price.product}))}),[a,r]),m=(0,f.useMemo)((function(){var e;return null==(e=a||r)?void 0:e.items.data.find((function(e){return"prod_PwIMdMjpdkX6BU"===e.price.product}))}),[r]),p=(0,f.useState)(!1),g=p[0],v=p[1],C=(0,f.useState)(At.default.get("window").width),y=C[0],b=C[1],E=(0,f.useState)(d&&d.quantity||1),x=E[0],w=E[1],S=(0,f.useState)(m&&m.quantity||0),k=S[0],T=S[1],R=k!==(null==m?void 0:m.quantity)||x!==(null==d?void 0:d.quantity);(0,f.useEffect)((function(){var e=At.default.addEventListener("change",(function(e){var t=e.window;b(t.width)}));return function(){return e.remove()}}),[]);var L=function(){var e=(0,A.default)(h().mark((function e(){var a,f,p,A,g,C,y,b;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a={},"driver"!==u||null==l||!l.id){e.next=6;break}a.driver=l.id,e.next=11;break;case 6:if("vendor"!==u||null==s||!s.id){e.next=10;break}a.vendor=s.id,e.next=11;break;case 10:throw"missing required parameter";case 11:if(v(!0),!r||"canceled"===r.status){e.next=21;break}return p=[{price:t.default_price.id,quantity:x,id:null==d?void 0:d.id}],(k||m)&&(A={price:n.default_price.id,quantity:k},m&&(A.id=m.id),p.push(A)),g={items:p,cancel_at_period_end:!1,proration_behavior:"create_prorations",cancellation_details:{},metadata:a},e.next=18,Si().httpsCallable("updateSubscription")({id:r.id,params:g});case 18:null==(f=i.current)||f.open(),e.next=29;break;case 21:return C=[{price:t.default_price.id,quantity:x}],k>0&&C.push({price:n.default_price.id,quantity:k}),y={line_items:C,subscription_data:{metadata:a},success_url:"http://localhost:8080",mode:"subscription",customer_email:null==c?void 0:c.email},e.next=26,Si().httpsCallable("createCheckoutSession")({params:y});case 26:b=e.sent,H.default.openURL(b.data.url),console.log(b.data);case 29:v(!1),e.next=37;break;case 32:e.prev=32,e.t0=e.catch(0),v(!1),console.log("Failed to create payment link",e.t0),o.alert("Something went wrong","Please try that again.");case 37:case"end":return e.stop()}}),e,null,[[0,32]])})));return function(){return e.apply(this,arguments)}}();if(!t||!n)return null;var _=function(){return f.createElement(zt,{preset:"subheading",style:{marginTop:y<=800?D.sm:0}},"(Qty ",x,")"," ",q(t.default_price.unit_amount*x/100,"USD"),"/Month")},P=function(){return f.createElement(zt,{preset:"subheading",style:{marginTop:y<=800?D.sm:0}},"(Qty ",k,")"," ",q(n.default_price.unit_amount*k/100,"USD"),"/Month")},O=(0,f.useMemo)((function(){return g?function(e){var t=e.style;return f.createElement(Kn.default,{style:t,color:"#fff"})}:void 0}),[g]);return f.createElement(dt.default,null,f.createElement(dt.default,{style:Ku},f.createElement(dt.default,{style:Tt},f.createElement(Xt,{icon:"food",size:pt.xl,color:I.primary,style:{marginRight:D.sm}}),f.createElement(dt.default,{style:{flex:1}},f.createElement(zt,{preset:"subheading"},t.name),f.createElement(zt,null,t.description)),y>800&&_()),y<=800&&_(),f.createElement(zt,{preset:"bold",size:"lg",style:{marginTop:D.sm}},24*x," Orders a day &"," ",x," Driver",1!==x?"s":""),!a&&f.createElement(Vu,{disableDecrease:1===x,changeQuantity:function(e){return w((function(t){return t+e}))},style:{marginTop:D.xs}})),f.createElement(dt.default,{style:[Ku,{marginTop:D.md}]},f.createElement(dt.default,{style:Tt},f.createElement(Xt,{icon:"lightning-bolt",size:pt.xl,color:I.primary,style:{marginRight:D.sm}}),f.createElement(dt.default,{style:{flex:1}},f.createElement(zt,{preset:"subheading"},n.name),f.createElement(zt,null,n.description)),y>800&&P()),y<=800&&P(),f.createElement(zt,{preset:"bold",size:"lg",style:{marginTop:D.sm}},12*k," Extra orders"),!a&&f.createElement(Vu,{disableDecrease:0===k,changeQuantity:function(e){return T((function(t){return t+e}))},style:{marginTop:D.xs}})),(!a||!r)&&f.createElement(Nn,{preset:R?"filled":"default",text:r&&"canceled"!==r.status?"Update Subscription":a?"Subscribe":"Confirm Orders",style:Qu,onPress:L,RightAccessory:O}),f.createElement(or,{ref:i},f.createElement(dt.default,{style:{padding:D.md,alignItems:"center"}},f.createElement(mo,{height:40,style:{marginBottom:D.sm}}),f.createElement(zt,{preset:"heading"},"Subscription Updated"),f.createElement(zt,null,"Your changes go into effect immediately."),f.createElement(Nn,{style:{alignSelf:"stretch",marginTop:D.md},preset:"filled",onPress:function(){var e;return null==(e=i.current)?void 0:e.close()},text:"Continue"}))))},Vu=function(e){var t=e.changeQuantity,n=e.disableDecrease,r=e.style;return f.createElement(dt.default,{style:[Tt,r]},f.createElement(qt.default,{disabled:n,style:[qu,{marginRight:D.xs,opacity:n?.5:1}],onPress:function(){return t(-1)}},f.createElement(Xt,{icon:"minus"}),f.createElement(zt,{selectable:!1,style:Gu},"Decrease")),f.createElement(qt.default,{style:qu,onPress:function(){return t(1)}},f.createElement(zt,{selectable:!1,style:Gu},"Increase"),f.createElement(Xt,{icon:"plus"})))},Ku={borderWidth:1,borderColor:I.border,borderRadius:mt,paddingHorizontal:D.md,paddingVertical:D.md,width:"100%"},Gu={marginHorizontal:D.xxs},qu={borderRadius:mt,flexDirection:"row",alignItems:"center",backgroundColor:I.surface,borderWidth:ct.default.hairlineWidth,borderColor:I.border,paddingHorizontal:D.xs,paddingVertical:D.xs},Qu={marginTop:D.lg},Yu=function(e){var t=e.subscription,n=e.referenceSubscription,r=(0,f.useState)({loading:!1,error:!1}),a=r[0],o=a.loading,i=a.error,s=r[1],l=(0,f.useState)({fullTimeProduct:void 0,surgeProduct:void 0}),u=l[0],c=u.fullTimeProduct,d=u.surgeProduct,m=l[1],p=function(){var e=(0,A.default)(h().mark((function e(){var t,n,r,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s({loading:!0,error:!1}),e.next=4,Si().httpsCallable("fetchProducts")({params:{expand:["data.default_price"]}});case 4:t=e.sent,n=t.data,r=n.data.sort((function(e,t){return t.default_price.unit_amount-e.default_price.unit_amount})),a=n.data.find((function(e){return"full-time"===e.metadata.type})),o=n.data.find((function(e){return"surge"===e.metadata.type})),m({fullTimeProduct:a,surgeProduct:o}),s({loading:!1,error:!1}),console.log(r),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),s({loading:!1,error:!0}),console.log("Failed to load subscriptions",e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();return(0,f.useEffect)((function(){p()}),[]),f.createElement(f.Fragment,null,o&&f.createElement(Kn.default,{color:I.primary}),i&&f.createElement(f.Fragment,null,f.createElement(zt,null,"There was a problem loading plans. Please try again."),f.createElement(Nn,{preset:"filled",text:"Load Plans"})),c&&d&&f.createElement(Uu,{fullTimeProduct:c,surgeProduct:d,subscription:t,referenceSubscription:n}))},Xu=function(e){var t=e.style,n=vr(),r=function(){var e=(0,A.default)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new Promise((function(e,t){return n.alert("Log Out","Do you want to log out of your account?",[{text:"Cancel",onPress:t},{text:"Log out",onPress:e}])}));case 3:return e.next=5,qo().signOut();case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Log out cancelled");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return f.createElement(qt.default,{onPress:r,style:t},f.createElement(zt,{style:{color:I.textDim}},"Logout"))},Zu=function(e){var t,n=e.route,r=e.navigation,a=it((function(e){return e.subscription.vendorSubscription}));return null!=(t=n.params)&&t.locked?f.createElement(vo,{preset:"scroll",style:{flex:1,maxWidth:void 0},contentContainerStyle:St},f.createElement(jo,null,f.createElement(mo,{style:{marginBottom:D.lg},height:50}),f.createElement(zt,{preset:"heading",style:{marginBottom:D.md}},"Set your orders"),f.createElement(Yu,{subscription:a})),f.createElement(Xu,{style:{alignSelf:"center",marginTop:D.md}})):f.createElement(Xa,{navigation:r},f.createElement(vo,{preset:"fixed",style:kt,contentContainerStyle:St,inDrawer:!0},f.createElement(zt,{preset:"heading"},"Subscription"),f.createElement(jo,{style:{marginTop:D.md,alignSelf:"flex-start"}},f.createElement(Yu,{subscription:a}))))},$u=function(e){var t=it((function(e){return e.vendor.data})),n=(0,f.useState)({updates:{},isSaved:!0}),r=n[0],a=r.updates,o=r.isSaved,i=n[1],s=(0,f.useState)(!1),l=s[0],u=s[1],c=function(e){return function(t){i((function(n){var r;return{isSaved:!1,updates:(0,p.default)({},n.updates,(r={},r[e]=t,r))}}))}},d=function(e){return e in a?a[e]:t[e]},m=(0,f.useCallback)((0,A.default)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{u(!0),n=t.id,r=a,X().collection("Vendors").doc(n).update(r),i((function(e){return(0,p.default)({},e,{isSaved:!0})})),u(!1)}catch(o){u(!1),console.log("Update vendor error",o)}case 1:case"end":return e.stop()}var n,r}),e)}))),[a,null==t?void 0:t.id]),g=(0,f.useMemo)((function(){return{RightActionComponent:l?f.createElement(Kn.default,{color:I.primary}):o?void 0:f.createElement(qt.default,{onPress:m},f.createElement(Xt,{icon:"check-circle",color:I.primary}))}}),[o,m]);return f.createElement(Xa,{navigation:e.navigation},f.createElement(vo,{preset:"fixed",style:kt,contentContainerStyle:St,headerProps:g,inDrawer:!0},f.createElement(dt.default,{style:Tt},f.createElement(zt,{preset:"heading",style:Rt},"Profile"),"web"===x.default.OS&&!o&&(l?f.createElement(Kn.default,{color:I.primary}):f.createElement(qt.default,{onPress:m,style:Tt},f.createElement(zt,null,"Save"),f.createElement(Xt,{icon:"check-circle",color:I.primary,style:{marginLeft:D.xxs}})))),f.createElement(ko,{placeholder:"First name",label:"First name",containerStyle:Ju,value:d("firstName"),onChangeText:c("firstName")}),f.createElement(ko,{placeholder:"Last name",label:"Last name",containerStyle:Ju,value:d("lastName"),onChangeText:c("lastName")}),f.createElement(ko,{placeholder:"Business name",label:"Business name",containerStyle:Ju,value:d("businessName"),onChangeText:c("businessName")}),f.createElement(ko,{placeholder:"Phone number",label:"Phone number",containerStyle:Ju,value:d("phoneNumber"),onChangeText:c("phoneNumber")})))},Ju={marginTop:D.sm},ec=vn.default(qt.default),tc={code:"function anonymous(){const{openAnimation,interpolate}=this.__closure;return{opacity:openAnimation.value,transform:[{translateY:interpolate(openAnimation.value,[0,1],[10,0])}]};}",location:"/Users/morgantrudeau/projects/delivfree/app/components/DropDownPicker.tsx",sourceMap:'{"version":3,"names":["anonymous","openAnimation","interpolate","__closure","opacity","value","transform","translateY"],"sources":["/Users/morgantrudeau/projects/delivfree/app/components/DropDownPicker.tsx"],"mappings":"AA2EI,SAAAA,UAAA,QAAAC,aAAA,CAAAC,WAAA,OAAAC,SAAA,OAAO,CACLC,OAAO,CAAEH,aAAa,CAACI,KAAK,CAC5BC,SAAS,CAAE,CACT,CAAEC,UAAU,CAAEL,WAAW,CAACD,aAAa,CAACI,KAAK,CAAE,CAAC,CAAC,CAAE,CAAC,CAAC,CAAE,CAAC,EAAE,CAAE,CAAC,CAAC,CAAE,CAAC,CAErE,CAAC"}',version:"3.5.4"},nc={code:"function anonymous(){const{openAnimation}=this.__closure;return{opacity:openAnimation.value};}",location:"/Users/morgantrudeau/projects/delivfree/app/components/DropDownPicker.tsx",sourceMap:'{"version":3,"names":["anonymous","openAnimation","__closure","opacity","value"],"sources":["/Users/morgantrudeau/projects/delivfree/app/components/DropDownPicker.tsx"],"mappings":"AAqFI,SAAAA,UAAA,QAAAC,aAAA,OAAAC,SAAA,OAAO,CAAEC,OAAO,CAAEF,aAAa,CAACG,KAAM,CAAC"}',version:"3.5.4"},rc=function(e){var t=e.items,r=e.onSelect,a=e.selectedValues,o=e.placeholder,i=void 0===o?"Select":o,s=(0,f.useRef)(null),l=(0,f.useState)({open:!1,top:0,left:0}),u=l[0],c=u.open,d=u.top,m=u.left,A=l[1],g=(0,fn.useSharedValue)(0),h=function(){var e;c?(A((function(e){return(0,p.default)({},e,{open:!1})})),g.value=(0,mn.withTiming)(0)):null==(e=s.current)||e.measure((function(e,t,n,r,a,o){console.log(e,t,n,r,a,o),A({left:a,top:o,open:!0}),g.value=(0,mn.withTiming)(1)}))},v=(0,f.useMemo)((function(){return a.length?a.map((function(e){var n;return null==(n=t.find((function(t){return t.value===e})))?void 0:n.label})).join(", "):i}),[t,a,i]),C=(0,pn.useAnimatedStyle)(function(){var e=[new n.g.Error,-3,-27],t=function(){return{opacity:g.value,transform:[{translateY:(0,An.interpolate)(g.value,[0,1],[10,0])}]}};return t.__closure={openAnimation:g,interpolate:An.interpolate},t.__initData=tc,t.__workletHash=0xe2918a0ec79,t.__stackDetails=e,t}(),[g]),y=(0,pn.useAnimatedStyle)(function(){var e=[new n.g.Error,-2,-27],t=function(){return{opacity:g.value}};return t.__closure={openAnimation:g},t.__initData=nc,t.__workletHash=0xd7b461ee8dc,t.__stackDetails=e,t}(),[g]),b=(0,f.useState)(),E=b[0],x=b[1];return f.createElement(dt.default,{style:{flex:1}},f.createElement(qt.default,{ref:s,onPress:h,style:[Mt,Tt],onLayout:function(e){console.log(e.nativeEvent.layout),x(e.nativeEvent.layout)}},f.createElement(zt,{style:{flex:1,color:0===a.length?I.textDim:void 0}},v),f.createElement(Xt,{icon:"chevron-down"})),f.createElement(Qn.Portal,null,f.createElement(ec,{style:[ac,y],onPress:h,pointerEvents:c?"auto":"none"}),f.createElement(gn.AnimatedView,{pointerEvents:c?"auto":"none",style:[It,oc,C,{width:null==E?void 0:E.width,maxHeight:200,position:"absolute",top:d+((null==E?void 0:E.height)||0)+D.sm,left:m}]},f.createElement(cn.default,{style:{maxHeight:200}},t.map((function(e,t,n){return f.createElement(qt.default,{key:e.value,style:[ic,t!==n.length-1&&_t],onPress:function(){return t=e.value,void(a.includes(t)?r(a.filter((function(e){return e!==t}))):r([].concat(a,[t])));var t}},f.createElement(zt,{style:Rt},e.label),a.includes(e.value)&&f.createElement(Xt,{icon:"check-circle",color:I.primary,size:pt.md}))}))))))},ac=(0,p.default)({},ct.default.absoluteFillObject,{backgroundColor:I.palette.overlay20}),oc={backgroundColor:I.background,borderRadius:mt},ic={paddingHorizontal:D.sm,paddingVertical:D.xs,flexDirection:"row",alignItems:"center"},sc=n(91012),lc=["onDismiss"],uc=function(e){var t=e.vendor,n=e.editLocation,r=e.onClose,a=(0,f.useRef)(null),o=(0,f.useRef)(null),i=(0,f.useRef)(null),s=(0,f.useRef)(null),l=vr(),u=function(){var e=(0,f.useState)(null),t=e[0],n=e[1],r=(0,f.useState)(0),a=r[0],o=r[1];(0,f.useEffect)((function(){t&&t.on("state_changed",(function(e){o(e.bytesTransferred/e.totalBytes*100)}))}),[t]);var i=function(){var e=(0,A.default)(h().mark((function e(t,r,a){var i,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("web"!==x.default.OS){e.next=4;break}return e.next=3,fetch(t).then((function(e){return e.blob()}));case 3:i=e.sent;case 4:return s=Tr(r,t,i,a),n(s),e.abrupt("return",new Promise((function(e,t){s.then(function(){var r=(0,A.default)(h().mark((function r(a){var i;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,"success"!==a.state||!s.snapshot||!s.snapshot.ref){r.next=10;break}return r.next=4,s.snapshot.ref.getDownloadURL();case 4:i=r.sent,e(i),n(null),o(0),r.next=11;break;case 10:throw new Error("missing_image");case 11:r.next=18;break;case 13:r.prev=13,r.t0=r.catch(0),t(r.t0),n(null),o(0);case 18:case"end":return r.stop()}}),r,null,[[0,13]])})));return function(e){return r.apply(this,arguments)}}())})));case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();return{uploadImage:i,uploadTask:t,progress:a}}(),c=u.uploadImage,d=u.progress,m=u.uploadTask,g=(0,f.useState)(n?(0,p.default)({},n):{id:K(),address:"",latitude:0,longitude:0,geohash:"",cuisines:[],keywords:[],vendor:t,callingCountry:"CA",callingCode:"+1",phoneNumber:"",name:"",menuLink:"",orderLink:"",image:""}),v=g[0],C=g[1],y=(0,f.useState)(!1),b=y[0],E=y[1],w=(0,f.useState)(!1),S=w[0],k=w[1],T=(0,f.useMemo)((function(){return v.address&&v.latitude&&v.longitude&&v.geohash&&v.cuisines.length&&(v.phoneNumber||v.menuLink||v.orderLink)&&v.name&&v.image}),[v]),R=function(e){return function(t){C((function(n){var r;return(0,p.default)({},n,((r={})[e]=t,r))}))}},L=function(){var e=(0,A.default)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hr();case 2:null!=(n=e.sent)&&null!=(t=n[0])&&t.url&&C((function(e){return(0,p.default)({},e,{image:null==n?void 0:n[0].url})}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=(0,f.useMemo)((function(){return Object.values(Sr.Cuisines).map((function(e){return{label:li(e),value:e}}))}),[]),P=function(){var e=(0,A.default)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,new Promise((function(e){l.alert("Delete Location","Are you sure you want to delete this location?",[{text:"Cancel",onPress:function(){return e(!1)}},{text:"Delete",onPress:function(){return e(!0)}}])}));case 5:if(e.sent){e.next=8;break}return e.abrupt("return");case 8:return E(!0),e.next=11,X().collection("RestaurantLocations").doc(n.id).delete();case 11:E(!1),r(),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(0),E(!1),console.log("Delete order order",e.t0),l.alert("Something went wrong","Please try again");case 20:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=(0,A.default)(h().mark((function e(){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,T){e.next=3;break}return e.abrupt("return",l.alert("Fields imcomplete","Please fill out all fields before continuing."));case 3:return k(!0),e.next=6,c(v.image,"RestuarantLocationImages/"+K(),{location:v.id,vendor:t});case 6:return n=e.sent,e.next=9,a=(0,p.default)({},v,{image:n}),X().collection("RestaurantLocations").doc(a.id).set(a);case 9:k(!1),r(),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(0),k(!1),console.log("Failed to add location",e.t0),l.alert("Something went wrong","Please try again");case 18:case"end":return e.stop()}var a}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),N=(0,f.useMemo)((function(){return S?function(e){var t=e.style;return f.createElement(Kn.default,{color:"#fff",style:t})}:void 0}),[S]);return f.createElement(dt.default,null,f.createElement(dt.default,{style:Tt},f.createElement(zt,{preset:"subheading",style:{flex:1}},n?"Manage Location":"Add Location"),n&&f.createElement(dt.default,{style:Tt},f.createElement(qt.default,{onPress:P},f.createElement(zt,{style:{color:I.error}},"Delete")),b&&f.createElement(Kn.default,{color:I.error,style:{marginLeft:D.xs}}))),f.createElement(ko,{label:"Name",placeholder:"Name",onChangeText:R("name"),containerStyle:dc,value:v.name,onSubmitEditing:function(){var e;return null==(e=o.current)?void 0:e.focus()}}),f.createElement(fl,{ref:o,label:"Phone number",placeholder:"Phone number",onChangeText:R("phoneNumber"),onChangeCallingCode:function(e,t){C((function(n){return(0,p.default)({},n,{callingCode:e,callingCountry:t})}))},containerStyle:dc,value:v.phoneNumber,callingCountry:v.callingCountry}),f.createElement(zt,{preset:"formLabel",style:{marginBottom:D.xs,marginTop:D.sm}},"Cuisines"),f.createElement(rc,{items:_,onSelect:R("cuisines"),selectedValues:v.cuisines,placeholder:"Select cuisines"}),f.createElement(ko,{ref:i,label:"Menu link",placeholder:"Menu link",onChangeText:R("menuLink"),containerStyle:dc,value:v.menuLink,onSubmitEditing:function(){var e;return null==(e=s.current)?void 0:e.focus()}}),f.createElement(ko,{ref:s,label:"Online order link",placeholder:"Online order link",onChangeText:R("orderLink"),containerStyle:dc,value:v.orderLink,onSubmitEditing:function(){var e;return null==(e=a.current)?void 0:e.open()}}),f.createElement(zt,{preset:"formLabel",style:{marginBottom:D.xs,marginTop:D.sm}},"Address"),f.createElement(qt.default,{onPress:function(){var e;return null==(e=a.current)?void 0:e.open()},style:Mt},f.createElement(zt,{style:v.address?void 0:{color:I.textDim}},v.address?v.address:"Search Address")),f.createElement(Gl,{ref:a,onLocationSelected:function(e){var t;null==(t=a.current)||t.close(),C((function(t){return(0,p.default)({},t,{address:e.address,latitude:e.latitude,longitude:e.longitude,geohash:e.geohash})}))},shortenAddress:!1}),f.createElement(zt,{preset:"formLabel",style:{marginBottom:D.xs,marginTop:D.sm}},"Banner image"),!!v.image&&f.createElement(dt.default,{style:[Nt,{marginBottom:D.sm}]},f.createElement(Na,{source:{uri:v.image},style:Ot})),f.createElement(qt.default,{onPress:L,style:[Pt,Tt,{alignSelf:"flex-start"}]},f.createElement(Xt,{icon:"upload",style:{marginRight:D.xs}}),f.createElement(zt,null,"Upload banner image")),f.createElement(Nn,{preset:T?"filled":"default",text:n?"Edit Location":"Add Location",style:fc,onPress:O,RightAccessory:N}),m&&f.createElement(dt.default,{style:[ct.default.absoluteFill,{justifyContent:"center",alignItems:"center",backgroundColor:"rgba(255,255,255,0.3)"}]},f.createElement(sc.AnimatedCircularProgress,{size:136,width:8,backgroundWidth:8,fill:d,tintColor:I.palette.primary600,backgroundColor:I.palette.primary100})))},cc=(0,f.forwardRef)((function(e,t){var n=e.onDismiss,r=(0,Bt.default)(e,lc);return f.createElement(or,{ref:t,onDismiss:n},f.createElement(dt.default,{style:{padding:D.md}},f.createElement(uc,r)))})),dc={marginTop:D.sm},fc={marginTop:D.lg},mc=function(e){var t=(0,f.useRef)(null),n=it((function(e){var t;return null==(t=e.vendor.data)?void 0:t.id})),r=it((function(e){return e.restaurantLocations.data})),a=(0,f.useMemo)((function(){return Object.values(r)}),[r]),o=(0,f.useState)(),i=o[0],s=o[1];(0,f.useMemo)((function(){return function(e){var t=e.style;return f.createElement(Xt,{icon:"plus",color:"#fff",style:t})}}),[]);return f.createElement(Xa,{navigation:e.navigation},f.createElement(vo,{preset:"fixed",style:kt,contentContainerStyle:St,inDrawer:!0},f.createElement(Mu,{buttonTitle:"Add Location",onButtonPress:function(){var e;null==(e=t.current)||e.open()},title:"Locations"}),f.createElement(Ts,{restaurants:a,style:pc,contentContainerStyle:Ac,onPress:function(e){var n;s(e),null==(n=t.current)||n.open()}}),!!n&&f.createElement(cc,{ref:t,vendor:n,onClose:function(){var e;null==(e=t.current)||e.close()},onDismiss:function(){s(void 0)},editLocation:i})))},pc={marginHorizontal:-D.md},Ac={paddingTop:D.sm,paddingBottom:D.md,paddingHorizontal:x.default.select({web:2*D.md,default:D.md})},gc=function(e){var t=e.onClose,n=vr(),r=it((function(e){return{userType:e.appConfig.userType,driver:e.driver.data,vendor:e.vendor.data}}),ee.shallowEqual),a=r.userType,o=r.driver,i=r.vendor,s=(0,f.useState)(""),l=s[0],u=s[1],c=(0,f.useState)(!1),d=c[0],m=c[1],p=(0,f.useState)(!1),g=p[0],v=p[1],C=function(){var e=(0,A.default)(h().mark((function e(){var t,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,l){e.next=3;break}return e.abrupt("return");case 3:return v(!0),e.next=6,X().collection("DriverCodes").where("code","==",l).get();case 6:if(t=e.sent,r=t.docs[0]){e.next=12;break}n.alert("Invalid Code","We could not find a driver with that code. Please try again."),e.next=16;break;case 12:return s=r.id,e.next=15,Si().httpsCallable("addDriver")({vendor:i.id,driver:s,parentDriver:"driver"===a?null==o?void 0:o.id:void 0});case 15:m(!0);case 16:v(!1),e.next=24;break;case 19:e.prev=19,e.t0=e.catch(0),v(!1),console.log("Failed to add driver",e.t0),n.alert("Something went wrong","Please try that again.");case 24:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(){return e.apply(this,arguments)}}(),y=(0,f.useMemo)((function(){return g?function(e){var t=e.style;return f.createElement(Kn.default,{style:t,color:"#fff"})}:void 0}),[g]);return d?f.createElement(dt.default,{style:[vc,{alignItems:"center"}]},f.createElement(Xt,{icon:"check-circle",color:I.primary,size:60}),f.createElement(zt,{preset:"subheading",style:{marginTop:D.xs}},"Driver added successfully!"),f.createElement(Nn,{style:{marginTop:D.md,alignSelf:"stretch"},text:"Close",preset:"filled",onPress:t})):f.createElement(dt.default,{style:vc},f.createElement(zt,{preset:"subheading"},"Add Driver"),f.createElement(zt,{style:Cc},"Ask your driver for their Driver Code and enter it here to link them to your company."),f.createElement(ko,{placeholder:"Driver code",label:"Driver code",containerStyle:yc,onChangeText:u}),f.createElement(Nn,{text:"Add Driver",preset:l?"filled":"default",style:bc,RightAccessory:y,onPress:C}))},hc=(0,f.forwardRef)((function(e,t){return f.createElement(or,{ref:t},f.createElement(gc,e))})),vc={padding:D.md},Cc={marginTop:D.sm},yc={marginTop:D.sm},bc={marginTop:D.lg},Ec=function(e){var t=e.headers;return f.createElement(dt.default,{style:xc},t.map((function(e){var t=e.title,n=e.maxWidth;return f.createElement(dt.default,{key:t,style:[wc,{maxWidth:n}]},f.createElement(zt,{preset:"subheading",size:"xs"},t))})))},xc={paddingVertical:D.xs,flexDirection:"row",alignItems:"center",borderTopWidth:1,borderTopColor:I.border,borderBottomWidth:1,borderBottomColor:I.borderLight},wc={flex:1,paddingEnd:D.md},Sc=function(e){var t=e.driver;return f.createElement(dt.default,{style:kc},f.createElement(zt,{style:Rt},t.firstName," ",t.lastName),f.createElement(zt,null,t.phoneNumber))},kc=[Tt,_t,{paddingVertical:D.sm}],Tc=function(e){var t=e.driver,n=e.onPress,r=(0,f.useMemo)((function(){return[{text:t.firstName+" "+t.lastName},{text:t.phoneNumber}]}),[t]);return f.createElement(pu,{data:t,dataCells:r,onPress:n})},Rc=["drivers"],Ic=function(e){var t=e.drivers,n=(0,Bt.default)(e,Rc),r=(0,m.useSafeAreaInsets)(),a=dn().width>gt,o=(0,f.useCallback)((function(e){var t={driver:e.item};return a?f.createElement(Tc,t):f.createElement(Sc,t)}),[a]),i=(0,f.useCallback)((function(){return f.createElement(bs,{title:"You have not hired any drivers"})}),[]);return f.createElement(f.Fragment,null,a&&f.createElement(Ec,{headers:Dc}),f.createElement(Ra.default,(0,p.default)({data:t,renderItem:o,style:Rt,contentContainerStyle:[Lc,{paddingBottom:r.bottom}],ListEmptyComponent:i},n)))},Dc=[{title:"Name"},{title:"Phone Number"}],Lc={flexGrow:1},_c=function(e){var t=(0,f.useRef)(null),n=it((function(e){return e.vendorDrivers.data})),r=(0,f.useMemo)((function(){return Object.values(n)}),[n]);return f.createElement(Xa,{navigation:e.navigation},f.createElement(vo,{preset:"fixed",style:kt,contentContainerStyle:St,inDrawer:!0},f.createElement(Mu,{title:"Drivers",buttonTitle:"Add Driver",onButtonPress:function(){var e;null==(e=t.current)||e.open()}}),f.createElement(Ic,{drivers:r}),f.createElement(hc,{ref:t,onClose:function(){var e;null==(e=t.current)||e.close()}})))},Pc=function(){var e=(0,m.useSafeAreaInsets)(),t=it((function(e){return e.driver.data})),n=(0,f.useState)(),r=n[0],a=n[1],o=function(){var e=(0,A.default)(h().mark((function e(n){var r,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n=0),e.prev=1,r=G(6+n),a=X().collection("DriverCodes"),e.next=6,a.where("code","==",r).get();case 6:if(e.sent.empty){e.next=9;break}return e.abrupt("return",o(n+1));case 9:return e.next=11,a.doc(t.id).set({code:r});case 11:return e.abrupt("return",r);case 14:e.prev=14,e.t0=e.catch(1),console.log("Failed to create code",e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=(0,A.default)(h().mark((function e(){var n,r,i,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=X().collection("DriverCodes"),e.next=4,n.doc(t.id).get();case 4:if(r=e.sent,!(i=r.data())||!i.code){e.next=10;break}a(i.code),e.next=14;break;case 10:return e.next=12,o();case 12:s=e.sent,a(s);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.log("Failed to load code",e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}();return(0,f.useEffect)((function(){i()}),[]),f.createElement(vo,{contentContainerStyle:St},f.createElement(dt.default,{style:Rt},f.createElement(jo,null,f.createElement(mo,{style:{marginBottom:D.lg,alignSelf:"center"},height:50}),f.createElement(zt,{preset:"heading",style:{marginBottom:D.sm}},"Get Hired"),f.createElement(dt.default,{style:[Pt,{backgroundColor:I.background}]},f.createElement(zt,{preset:"subheading",style:{marginBottom:D.xs}},"Instructions"),f.createElement(zt,{preset:"formLabel"},"Being hired by a vendor?"),f.createElement(zt,null,"Provide your Driver Code to the vendor hiring you."),f.createElement(zt,{preset:"formLabel",style:{marginTop:D.sm}},"Being hired by a driver?"),f.createElement(zt,null,"Provide your Driver Code to the driver hiring you.")),f.createElement(dt.default,{style:[Pt,{alignItems:"flex-start",alignSelf:"flex-start",marginTop:D.lg}]},f.createElement(dt.default,{style:Tt},f.createElement(zt,{preset:"subheading"},"Driver Code"),!r&&f.createElement(Kn.default,{color:I.primary,style:{marginLeft:D.xs}})),!!r&&f.createElement(zt,{preset:"heading",allowFontScaling:!1,style:{fontSize:50,marginTop:D.xxs,lineHeight:60}},r)))),f.createElement(Xu,{style:{alignSelf:"center",marginTop:D.md,marginBottom:e.bottom}}))},Oc=function(e){var t,n=e.route,r=e.navigation,a=it((function(e){return e.subscription.vendorSubscription})),o=it((function(e){return e.subscription.driverSubscription}));return null!=(t=n.params)&&t.locked?f.createElement(vo,{preset:"scroll",style:{flex:1,maxWidth:void 0},contentContainerStyle:St},f.createElement(jo,null,f.createElement(mo,{style:{marginBottom:D.lg},height:50}),f.createElement(zt,{preset:"heading",style:{marginBottom:D.md}},"Subscription"),f.createElement(Yu,{subscription:o,referenceSubscription:a})),f.createElement(Xu,{style:{alignSelf:"center",marginTop:D.md}})):f.createElement(Xa,{navigation:r},f.createElement(vo,{preset:"fixed",style:kt,contentContainerStyle:St,inDrawer:!0},f.createElement(zt,{preset:"heading"},"Subscription"),f.createElement(jo,{style:{marginTop:D.md,alignSelf:"flex-start"}},f.createElement(Yu,{subscription:o,referenceSubscription:a}))))},Nc=function(e){var t=it((function(e){return e.driver.data})),n=(0,f.useState)({updates:{},isSaved:!0}),r=n[0],a=r.updates,o=r.isSaved,i=n[1],s=(0,f.useState)(!1),l=s[0],u=s[1],c=function(e){return function(t){i((function(n){var r;return{isSaved:!1,updates:(0,p.default)({},n.updates,(r={},r[e]=t,r))}}))}},d=function(e){return e in a?a[e]:t[e]},m=(0,f.useCallback)((0,A.default)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{u(!0),n=t.id,r=a,X().collection("Drivers").doc(n).update(r),i((function(e){return(0,p.default)({},e,{isSaved:!0})})),u(!1)}catch(o){u(!1),console.log("Update vendor error",o)}case 1:case"end":return e.stop()}var n,r}),e)}))),[a,null==t?void 0:t.id]),g=(0,f.useMemo)((function(){return{RightActionComponent:l?f.createElement(Kn.default,{color:I.primary}):o?void 0:f.createElement(qt.default,{onPress:m},f.createElement(Xt,{icon:"check-circle",color:I.primary}))}}),[o,m]);return f.createElement(Xa,{navigation:e.navigation},f.createElement(vo,{preset:"fixed",style:kt,contentContainerStyle:St,headerProps:g},f.createElement(dt.default,{style:Tt},f.createElement(zt,{preset:"heading",style:Rt},"Profile"),"web"===x.default.OS&&!o&&(l?f.createElement(Kn.default,{color:I.primary}):f.createElement(qt.default,{onPress:m,style:Tt},f.createElement(zt,null,"Save"),f.createElement(Xt,{icon:"check-circle",color:I.primary,style:{marginLeft:D.xxs}})))),f.createElement(ko,{placeholder:"First name",label:"First name",containerStyle:Mc,value:d("firstName"),onChangeText:c("firstName")}),f.createElement(ko,{placeholder:"Last name",label:"Last name",containerStyle:Mc,value:d("lastName"),onChangeText:c("lastName")}),f.createElement(ko,{placeholder:"Phone number",label:"Phone number",containerStyle:Mc,value:d("phoneNumber"),onChangeText:c("phoneNumber")})))},Mc={marginTop:D.sm},Bc=function(e){var t=it((function(e){var t;return null==(t=e.vendor.data)?void 0:t.id})),n=(0,f.useState)(),r=(n[0],n[1]),a=(0,f.useState)(""),o=a[0],i=a[1],s=(0,f.useCallback)((function(e,n){return t&&o?Ul(t,o,e,n):function(){}}),[t,o]),l=ju(s,o),u=l.data,c=l.loadData,d=(0,f.useRef)(null);return f.createElement(Xa,{navigation:e.navigation},f.createElement(vo,{preset:"fixed",style:kt,contentContainerStyle:St,inDrawer:!0},f.createElement(Mu,{title:"Orders"}),f.createElement(Iu,{selectedLocationId:o,onSelect:function(e){return i(e.id)},style:jc}),f.createElement(wu,{orders:u,loadOrders:c,onOrderPress:function(e){var t;r(e),null==(t=d.current)||t.open()}})))},jc={alignSelf:"flex-start",marginBottom:D.sm},Wc=Oo(),zc=Oo(),Hc=Oo(),Fc=(Oo(),Oo()),Uc=function(e){var t=e.vendorSubscription,n=e.driverSubscription,r=e.userType,a=e.driver,o=e.vendor,i=F();return"VENDOR"===i?"driver"===r?function(e){e.vendorSubscription;var t,n=e.driverSubscription,r=e.driver;return e.vendor,r?null!=(t=r.vendors)&&t.length?("approved"!==r.registration.status&&React.createElement(Fc.Screen,{name:"DriverRegistration",component:hl,options:{headerShown:!0,headerTransparent:!1}}),n&&["active","incomplete"].includes(n.status)?React.createElement(React.Fragment,null,React.createElement(Fc.Screen,{name:"Orders",component:Bc}),React.createElement(Fc.Screen,{name:"Profile",component:Nc}),React.createElement(Fc.Screen,{name:"Subscription",component:Oc}),React.createElement(Fc.Screen,{name:"Settings",component:us,options:{headerShown:!0,headerTransparent:!1,headerTitle:"Settings"}}),React.createElement(Fc.Screen,{name:"About",component:fs,options:{headerShown:!0,headerTransparent:!1,headerTitle:"About"}}),React.createElement(Fc.Screen,{name:"DeleteAccount",component:ps,options:{headerShown:!0,headerTransparent:!1}})):React.createElement(Fc.Screen,{name:"StartSubscription",component:Oc,initialParams:{locked:!0}})):React.createElement(Fc.Screen,{name:"DriverCode",component:Pc}):React.createElement(Fc.Screen,{name:"Loading",component:sl})}({vendorSubscription:t,driverSubscription:n,driver:a,vendor:o}):function(e){var t,n=e.vendorSubscription,r=e.vendor;return void 0===n?f.createElement(Hc.Screen,{name:"Loading",component:sl}):"approved"!==(null==r||null==(t=r.registration)?void 0:t.status)?f.createElement(Hc.Screen,{name:"VendorRegistration",component:xl,options:{headerShown:!0,headerTransparent:!1}}):n&&["active","incomplete"].includes(n.status)?f.createElement(f.Fragment,null,f.createElement(Hc.Screen,{name:"Home",component:Fl}),f.createElement(Hc.Screen,{name:"Orders",component:Hu}),f.createElement(Hc.Screen,{name:"Profile",component:$u}),f.createElement(Hc.Screen,{name:"Locations",component:mc}),f.createElement(Hc.Screen,{name:"Drivers",component:_c}),f.createElement(Hc.Screen,{name:"Subscription",component:Zu}),f.createElement(Hc.Screen,{name:"Settings",component:us,options:{headerShown:!0,headerTransparent:!1,headerTitle:"Settings"}}),f.createElement(Hc.Screen,{name:"About",component:fs,options:{headerShown:!0,headerTransparent:!1,headerTitle:"About"}}),f.createElement(Hc.Screen,{name:"DeleteAccount",component:ps,options:{headerShown:!0,headerTransparent:!1}})):f.createElement(Hc.Screen,{name:"StartSubscription",component:Zu,initialParams:{locked:!0}})}({vendorSubscription:t,vendor:o}):"ADMIN"===i?React.createElement(React.Fragment,null):function(){var e=(0,w.useNavigation)();return React.createElement(React.Fragment,null,React.createElement(zc.Screen,{name:"Home",component:Fi,options:{headerTitle:Ao}}),React.createElement(zc.Screen,{name:"AddressSearch",component:il,options:{headerTitle:"Address Search",headerShown:!0,headerTransparent:!1}}),React.createElement(zc.Screen,{name:"Restaurants",component:Ds,options:{headerShown:!0,headerTransparent:!1,headerTitle:Ao}}),React.createElement(zc.Screen,{name:"RestaurantDetail",component:zs,options:{headerShown:!0,headerTransparent:!0,headerStyle:{backgroundColor:"transparent"},headerLeft:function(t){return t.canGoBack?React.createElement(qt.default,{style:{backgroundColor:"rgba(0,0,0,0.5)",borderRadius:100,padding:D.xxs},onPress:function(){return e.goBack()}},React.createElement(Xt,{icon:"arrow-left",color:"#fff"})):null}}}),React.createElement(zc.Screen,{name:"Settings",component:us,options:{headerShown:!0,headerTransparent:!1,headerTitle:"Settings"}}),React.createElement(zc.Screen,{name:"About",component:fs,options:{headerShown:!0,headerTransparent:!1,headerTitle:"About"}}),React.createElement(zc.Screen,{name:"DeleteAccount",component:ps,options:{headerShown:!0,headerTransparent:!1}}))}()},Vc=Oo(),Kc=Oo(),Gc=Oo(),qc=function(e){var t=e.user;return"VENDOR"===z.REACT_NATIVE_APP?function(e){var t=e.user,n=!(null==t||!t.vendor)||!(null==t||!t.driver);return React.createElement(React.Fragment,null,!n&&React.createElement(Vc.Screen,{name:"VendorDriverSelect",component:Dl,options:{headerShown:!0,headerTransparent:!1}}),(!n||(null==t?void 0:t.vendor))&&React.createElement(Vc.Screen,{name:"EditVendorProfile",component:xl,options:{headerShown:!0,headerTransparent:!1}}),(!n||(null==t?void 0:t.driver))&&React.createElement(Vc.Screen,{name:"EditDriverProfile",component:hl,options:{headerShown:!0,headerTransparent:!1}}))}({user:t}):"ADMIN"===z.REACT_NATIVE_APP?React.createElement(React.Fragment,null,React.createElement(Kc.Screen,{name:"EditProfile",component:as,options:{headerShown:!0,headerRight:function(){return null},headerTransparent:!1}})):f.createElement(f.Fragment,null,f.createElement(Gc.Screen,{name:"EditProfile",component:as,options:{headerShown:!0,headerRight:function(){return null},headerTransparent:!1}}))},Qc=n(53093),Yc=(function(){var e=(0,A.default)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Qc.getColors)(t,{fallback:I.palette.neutral300});case 2:return n=e.sent,console.log(n),e.abrupt("return","android"===n.platform?n.vibrant:"ios"===n.platform?n.background:"");case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=it((function(e){return{user:e.user.user,userType:e.appConfig.userType}}),ee.shallowEqual),t=e.user,n=e.userType,r=ot();return(0,f.useEffect)((function(){var e,a=F();"CONSUMER"===a?e="consumer":"ADMIN"===a?e="admin":"VENDOR"===a&&(null!=t&&t.driver?e="driver":null!=t&&t.vendor&&(e="vendor")),e&&e!==n&&r(ye(e))}),[t,n]),null}),Xc=(0,J.createAsyncThunk)("customers/listenToCustomers",(function(e,t){var n=t.getState,r=t.dispatch;n().user.user;return function(e,t){return X().collection("Customers").where("vendor","==",e).onSnapshot((function(e){var n=e.docs.reduce((function(e,t){var n;return(0,p.default)({},e,((n={})[t.id]=t.data(),n))}),{});t(n)}))}(e,(function(e){r(Pe(e))}))})),Zc=(0,J.createAsyncThunk)("vendors/listenToVendor",(function(e,t){var n=t.dispatch;return X().collection("RestaurantLocations").where("vendor","==",e).onSnapshot((function(e){n(Be(e?e.docs.reduce((function(e,t){var n;return(0,p.default)({},e,((n={})[t.id]=t.data(),n))}),{}):{}))}))})),$c=(0,J.createAsyncThunk)("subscription/listenToVendorSubscription",(function(e,t){var n=t.dispatch;return X().collection("Subscriptions").doc(e).onSnapshot((function(e){var t;return n(Fe((null==(t=e.data())?void 0:t.subscription)||null))}))})),Jc=(0,J.createAsyncThunk)("subscription/listenToDriverSubscription",(function(e,t){var n=t.dispatch;return X().collection("Subscriptions").doc(e).onSnapshot((function(e){var t;return n(Ue((null==(t=e.data())?void 0:t.subscription)||null))}))})),ed=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).driverListeners=new Set,t.vendorListeners=new Set,t.driverSelected=function(e){var t,n;return null==(t=e.user)||null==(n=t.driver)?void 0:n.id},t.vendorSelected=function(e){var t,n;return null==(t=e.driver)||null==(n=t.vendors)?void 0:n[0]},t.unsubscribeListeners=function(e){e.forEach((function(e){return e()}))},t.listenToDriverData=(0,A.default)(h().mark((function e(){var n,r,a,o,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null==(n=t.props.user)||null==(r=n.driver)?void 0:r.id){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,t.props.listenToDriver(a).then(J.unwrapResult);case 5:return o=e.sent,e.next=8,t.props.listenToDriverSubscription(a).then(J.unwrapResult);case 8:i=e.sent,t.driverListeners.add(o),t.driverListeners.add(i);case 11:case"end":return e.stop()}}),e)}))),t.listenToVendorData=(0,A.default)(h().mark((function e(){var n,r,a,o,i,s,l,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null==(n=t.props.driver)||null==(r=n.vendors)?void 0:r[0],console.log("LOAD VENDOR DATA",a),a){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,t.props.listenToVendor(a).then(J.unwrapResult);case 6:return o=e.sent,e.next=9,t.props.listenToVendorSubscription(a).then(J.unwrapResult);case 9:return i=e.sent,e.next=12,t.props.listenToRestuarantLocations(a).then(J.unwrapResult);case 12:return s=e.sent,e.next=15,t.props.listenToCustomers(a).then(J.unwrapResult);case 15:return l=e.sent,e.next=18,t.props.listenToVendorDrivers(a).then(J.unwrapResult);case 18:u=e.sent,t.vendorListeners.add(o),t.vendorListeners.add(i),t.vendorListeners.add(s),t.vendorListeners.add(l),t.vendorListeners.add(u);case 24:case"end":return e.stop()}}),e)}))),t}(0,Yn.default)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.driverSelected(this.props)&&this.listenToDriverData(),this.vendorSelected(this.props)&&this.listenToVendorData()},n.componentDidUpdate=function(e){!this.driverSelected(e)&&this.driverSelected(this.props)?this.listenToDriverData():this.driverSelected(e)&&!this.driverSelected(this.props)&&this.unsubscribeListeners(this.driverListeners),!this.vendorSelected(e)&&this.vendorSelected(this.props)?this.listenToVendorData():this.vendorSelected(e)&&!this.vendorSelected(this.props)&&this.unsubscribeListeners(this.vendorListeners)},n.render=function(){return null},t}(f.Component),td={listenToVendor:ke,listenToDriver:Al,listenToVendorSubscription:$c,listenToDriverSubscription:Jc,listenToRestuarantLocations:Zc,listenToCustomers:Xc,listenToVendorDrivers:gl};const nd=(0,ee.connect)((function(e){return{user:e.user.user,driver:e.driver.data}}),td)(ed);var rd=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).unsubscribeVendorListener=function(){},t.vendorDataListeners=new Set,t.vendorSelected=function(e){var t,n,r;return null==(t=e.user)||null==(n=t.vendor)||null==(r=n.ids)?void 0:r[0]},t.vendorLoaded=function(e){return e.vendor},t.unsubscribeListeners=function(e){e.forEach((function(e){return e()}))},t.listenToVendor=(0,A.default)(h().mark((function e(){var n,r,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=null==(n=t.props.user)||null==(r=n.vendor)||null==(a=r.ids)?void 0:a[0]){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,t.props.listenToVendor(o).then(J.unwrapResult);case 5:t.unsubscribeVendorListener=e.sent;case 6:case"end":return e.stop()}}),e)}))),t.listenToVendorData=(0,A.default)(h().mark((function e(){var n,r,a,o,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.props.vendor){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,t.props.listenToCustomers(n.id).then(J.unwrapResult);case 5:return r=e.sent,e.next=8,t.props.listenToRestuarantLocations(n.id).then(J.unwrapResult);case 8:return a=e.sent,e.next=11,t.props.listenToVendorSubscription(n.id).then(J.unwrapResult);case 11:return o=e.sent,e.next=14,t.props.listenToVendorDrivers(n.id).then(J.unwrapResult);case 14:i=e.sent,t.vendorDataListeners.add(r),t.vendorDataListeners.add(a),t.vendorDataListeners.add(o),t.vendorDataListeners.add(i);case 19:case"end":return e.stop()}}),e)}))),t}(0,Yn.default)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.vendorLoaded(this.props)&&this.listenToVendorData(),this.vendorSelected(this.props)&&this.listenToVendor()},n.componentWillUnmount=function(){this.unsubscribeVendorListener(),this.unsubscribeListeners(this.vendorDataListeners)},n.componentDidUpdate=function(e){!this.vendorSelected(e)&&this.vendorSelected(this.props)?this.listenToVendor():this.vendorSelected(e)&&!this.vendorSelected(this.props)&&this.unsubscribeVendorListener(),!this.vendorLoaded(e)&&this.vendorLoaded(this.props)?this.listenToVendorData():this.vendorLoaded(e)&&!this.vendorLoaded(this.props)&&this.unsubscribeListeners(this.vendorDataListeners)},n.render=function(){return null},t}(f.Component),ad={listenToVendor:ke,listenToVendorSubscription:$c,listenToRestuarantLocations:Zc,listenToCustomers:Xc,listenToVendorDrivers:gl};const od=(0,ee.connect)((function(e){return{vendor:e.vendor.data,user:e.user.user,driver:e.driver.data}}),ad)(rd);var id=function(e){function t(){return e.apply(this,arguments)||this}return(0,Yn.default)(t,e),t.prototype.render=function(){return null},t}(f.Component),sd=function(e){function t(){return e.apply(this,arguments)||this}return(0,Yn.default)(t,e),t.prototype.render=function(){return null},t}(f.Component),ld=function(){var e=it((function(e){return e.appConfig.userType}));return"driver"===e?f.createElement(nd,null):"vendor"===e?f.createElement(od,null):"consumer"===e?f.createElement(id,null):"admin"===e?f.createElement(sd,null):null};console.log("APP_TYPE",F());var ud=b.exitRoutes,cd=Oo(),dd={headerBackTitleVisible:!1,headerShown:!1,headerTintColor:I.primary,headerTitleStyle:[{fontFamily:O.secondary.semiBold,color:I.text},Ht.lg],navigationBarColor:I.background,headerTitle:"",headerTransparent:!0,headerStyle:{backgroundColor:I.background},headerShadowVisible:!1,animation:x.default.select({android:"fade_from_bottom",default:"default"}),animationDuration:100},fd=function(){var e=it((function(e){return{user:e.user.user,userLoaded:e.user.loaded,authToken:e.auth.authToken,deleteAccountLoading:e.user.deleteAccountLoading,vendor:e.vendor.data,driver:e.driver.data,vendorSubscription:e.subscription.vendorSubscription,driverSubscription:e.subscription.driverSubscription,userType:e.appConfig.userType}})),t=e.user,n=e.vendor,r=e.driver,a=e.authToken,o=e.userLoaded,i=e.deleteAccountLoading,s=e.vendorSubscription,l=e.driverSubscription,u=e.userType,c=function(e){return!!(e&&e.firstName&&e.lastName)&&("ADMIN"===z.REACT_NATIVE_APP?!!e.admin:"VENDOR"===z.REACT_NATIVE_APP?!(null==(t=e.vendor)||!t.ids)||!(null==(n=e.driver)||!n.id):!!e.consumer);var t,n}(t),d=a?o?"Home":"EditProfile":"Welcome";return f.createElement(cd.Navigator,{screenOptions:dd,initialRouteName:d},a&&o?c||i?Uc({vendorSubscription:s,driverSubscription:l,userType:u,driver:r,vendor:n}):qc({user:t}):f.createElement(f.Fragment,null,f.createElement(Wc.Screen,{name:"Welcome",component:Ho}),f.createElement(Wc.Screen,{name:"SignUp",component:ni,options:{headerShown:!0,headerRight:function(){return null},headerTransparent:!1}}),f.createElement(Wc.Screen,{name:"Login",component:Qo,options:{headerShown:!0,headerRight:function(){return null},headerTransparent:!1}}),f.createElement(Wc.Screen,{name:"ForgotPassword",component:Ys,options:{headerShown:!0,headerTransparent:!1}})))},md=x.default.select({web:undefined,default:function(){return setTimeout((function(){return _n.default.hide({fade:!0})}),10)}}),pd=function(e){return T((function(e){return ud.includes(e)})),(0,f.useEffect)((function(){var e=function(){var e=(0,A.default)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_a();case 2:e.sent&&Oa(!0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),f.createElement(v.default,(0,p.default)({ref:S,theme:Ad,onReady:md},e),f.createElement(Qn.Host,null,f.createElement(wr,null,f.createElement(hr,null,f.createElement(Qn.Host,null,f.createElement(fd,null))))),f.createElement(Ln,null),f.createElement(Yc,null),f.createElement(ld,null))},Ad={dark:!0,colors:{primary:I.primary,background:I.background,card:I.background,text:I.text,border:I.border,notification:I.primary}};const gd=function(){return{setAttribute:function(){},setUserId:function(){}}};var hd=function(){var e=(0,f.useRef)(),t=ot(),n=function(){var e=(0,A.default)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,gd().setUserId(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("Failed to login crashlytics: ",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}();return(0,f.useEffect)((function(){var r=qo().onAuthStateChanged((function(r){console.log("Firebase auth user: ",r),r?e.current!==r.uid&&(e.current=r.uid,n(r.uid),t(ae(r.uid)),t(ie({email:r.email,uid:r.uid,emailVerified:r.emailVerified})),t(oe(r.isAnonymous)),function(e,t){var n=X().collection("Users").doc(e),r=function(){var e=(0,A.default)(h().mark((function e(n){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.data(),t(r);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();xi().addListener("user",n,r)}(r.uid,(function(e){t(me(e)),"VENDOR"===F()&&(null!=e&&e.vendor||t(Ie(null)),null!=e&&e.driver||t(qe(null)))})),Mo("signin")):(e.current=void 0,xi().removeAllListeners(),t(ae(void 0)),setTimeout((function(){return t(le())}),200))}));return function(){r()}}),[]),null},vd=n(68131);hn.default.defaultProps={activeOpacity:.9},console.log(!1),console.log("VENDOR");const Cd=function(){var e=(0,d.useFonts)(_)[0];return f.createElement(ee.Provider,{store:rt},f.createElement(vd.PersistGate,{loading:null,persistor:at},e&&f.createElement(r.GestureHandlerRootView,{style:Rt},f.createElement(m.SafeAreaProvider,null,f.createElement(ns,{catchErrors:b.catchErrors},f.createElement(wr,null,f.createElement(In,null,f.createElement(pd,null),f.createElement(hd,null))))))))};var yd={apiKey:"AIzaSyDDKuob3VoBk8B6YVcZL0Z_HuCrZ0saODY",authDomain:"delivfree-app.firebaseapp.com",projectId:"delivfree-app",storageBucket:"delivfree-app.appspot.com",messagingSenderId:"406179880402",appId:"1:406179880402:web:8ca561290bd87b61297c0b",measurementId:"G-C1X5PN737R"};(0,n(80295).default)(Cd),N.default.initializeApp(yd);const bd=Cd},35358:(e,t,n)=>{var r={"./af":25177,"./af.js":25177,"./ar":61509,"./ar-dz":41488,"./ar-dz.js":41488,"./ar-kw":58676,"./ar-kw.js":58676,"./ar-ly":42353,"./ar-ly.js":42353,"./ar-ma":24496,"./ar-ma.js":24496,"./ar-ps":6947,"./ar-ps.js":6947,"./ar-sa":82682,"./ar-sa.js":82682,"./ar-tn":89756,"./ar-tn.js":89756,"./ar.js":61509,"./az":95533,"./az.js":95533,"./be":28959,"./be.js":28959,"./bg":47777,"./bg.js":47777,"./bm":54903,"./bm.js":54903,"./bn":61290,"./bn-bd":17357,"./bn-bd.js":17357,"./bn.js":61290,"./bo":31545,"./bo.js":31545,"./br":11470,"./br.js":11470,"./bs":44429,"./bs.js":44429,"./ca":7306,"./ca.js":7306,"./cs":56464,"./cs.js":56464,"./cv":73635,"./cv.js":73635,"./cy":64226,"./cy.js":64226,"./da":93601,"./da.js":93601,"./de":77853,"./de-at":26111,"./de-at.js":26111,"./de-ch":54697,"./de-ch.js":54697,"./de.js":77853,"./dv":60708,"./dv.js":60708,"./el":54691,"./el.js":54691,"./en-au":53872,"./en-au.js":53872,"./en-ca":28298,"./en-ca.js":28298,"./en-gb":56195,"./en-gb.js":56195,"./en-ie":66584,"./en-ie.js":66584,"./en-il":65543,"./en-il.js":65543,"./en-in":9033,"./en-in.js":9033,"./en-nz":79402,"./en-nz.js":79402,"./en-sg":43004,"./en-sg.js":43004,"./eo":32934,"./eo.js":32934,"./es":97650,"./es-do":20838,"./es-do.js":20838,"./es-mx":17730,"./es-mx.js":17730,"./es-us":56575,"./es-us.js":56575,"./es.js":97650,"./et":3035,"./et.js":3035,"./eu":3508,"./eu.js":3508,"./fa":119,"./fa.js":119,"./fi":90527,"./fi.js":90527,"./fil":95995,"./fil.js":95995,"./fo":52477,"./fo.js":52477,"./fr":85498,"./fr-ca":26435,"./fr-ca.js":26435,"./fr-ch":37892,"./fr-ch.js":37892,"./fr.js":85498,"./fy":37071,"./fy.js":37071,"./ga":41734,"./ga.js":41734,"./gd":70217,"./gd.js":70217,"./gl":77329,"./gl.js":77329,"./gom-deva":32124,"./gom-deva.js":32124,"./gom-latn":93383,"./gom-latn.js":93383,"./gu":95050,"./gu.js":95050,"./he":11713,"./he.js":11713,"./hi":43861,"./hi.js":43861,"./hr":26308,"./hr.js":26308,"./hu":90609,"./hu.js":90609,"./hy-am":17160,"./hy-am.js":17160,"./id":74063,"./id.js":74063,"./is":89374,"./is.js":89374,"./it":88383,"./it-ch":21827,"./it-ch.js":21827,"./it.js":88383,"./ja":23827,"./ja.js":23827,"./jv":89722,"./jv.js":89722,"./ka":41794,"./ka.js":41794,"./kk":27088,"./kk.js":27088,"./km":96870,"./km.js":96870,"./kn":84451,"./kn.js":84451,"./ko":63164,"./ko.js":63164,"./ku":98174,"./ku-kmr":6181,"./ku-kmr.js":6181,"./ku.js":98174,"./ky":78474,"./ky.js":78474,"./lb":79680,"./lb.js":79680,"./lo":15867,"./lo.js":15867,"./lt":45766,"./lt.js":45766,"./lv":69532,"./lv.js":69532,"./me":58076,"./me.js":58076,"./mi":41848,"./mi.js":41848,"./mk":30306,"./mk.js":30306,"./ml":73739,"./ml.js":73739,"./mn":99053,"./mn.js":99053,"./mr":86169,"./mr.js":86169,"./ms":73386,"./ms-my":92297,"./ms-my.js":92297,"./ms.js":73386,"./mt":77075,"./mt.js":77075,"./my":72264,"./my.js":72264,"./nb":22274,"./nb.js":22274,"./ne":8235,"./ne.js":8235,"./nl":92572,"./nl-be":43784,"./nl-be.js":43784,"./nl.js":92572,"./nn":54566,"./nn.js":54566,"./oc-lnc":69330,"./oc-lnc.js":69330,"./pa-in":29849,"./pa-in.js":29849,"./pl":94418,"./pl.js":94418,"./pt":79834,"./pt-br":48303,"./pt-br.js":48303,"./pt.js":79834,"./ro":24457,"./ro.js":24457,"./ru":82271,"./ru.js":82271,"./sd":1221,"./sd.js":1221,"./se":33478,"./se.js":33478,"./si":17538,"./si.js":17538,"./sk":5784,"./sk.js":5784,"./sl":46637,"./sl.js":46637,"./sq":86794,"./sq.js":86794,"./sr":45719,"./sr-cyrl":3322,"./sr-cyrl.js":3322,"./sr.js":45719,"./ss":56e3,"./ss.js":56e3,"./sv":41011,"./sv.js":41011,"./sw":40748,"./sw.js":40748,"./ta":11025,"./ta.js":11025,"./te":11885,"./te.js":11885,"./tet":28861,"./tet.js":28861,"./tg":86571,"./tg.js":86571,"./th":55802,"./th.js":55802,"./tk":59527,"./tk.js":59527,"./tl-ph":29231,"./tl-ph.js":29231,"./tlh":31052,"./tlh.js":31052,"./tr":85096,"./tr.js":85096,"./tzl":79846,"./tzl.js":79846,"./tzm":81765,"./tzm-latn":97711,"./tzm-latn.js":97711,"./tzm.js":81765,"./ug-cn":48414,"./ug-cn.js":48414,"./uk":16618,"./uk.js":16618,"./ur":57777,"./ur.js":57777,"./uz":57609,"./uz-latn":72475,"./uz-latn.js":72475,"./uz.js":57609,"./vi":21135,"./vi.js":21135,"./x-pseudo":64051,"./x-pseudo.js":64051,"./yo":82218,"./yo.js":82218,"./zh-cn":52648,"./zh-cn.js":52648,"./zh-hk":1632,"./zh-hk.js":1632,"./zh-mo":31541,"./zh-mo.js":31541,"./zh-tw":50304,"./zh-tw.js":50304};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id=35358},72043:(e,t,n)=>{"use strict";e.exports=n.p+"2eb3b12e5c67117a34a3.png"},31372:(e,t,n)=>{"use strict";e.exports=n.p+"234124343c428af223ba.png"},16581:(e,t,n)=>{"use strict";e.exports=n.p+"f0ce9fe7f763e05b880f.jpg"},95239:(e,t,n)=>{"use strict";e.exports=n.p+"1e59cae631e8096ad019.jpg"},67951:(e,t,n)=>{"use strict";e.exports=n.p+"08987ec42269ec6f642c.jpg"},87344:(e,t,n)=>{"use strict";e.exports=n.p+"c4078f0e804eeaa3146c.jpg"},33096:(e,t,n)=>{"use strict";e.exports=n.p+"ea2fac3d08746f31dca3.jpg"},76746:(e,t,n)=>{"use strict";e.exports=n.p+"382eff5c89dcff9a15b7.jpg"},22277:(e,t,n)=>{"use strict";e.exports=n.p+"da431734113b55db1343.jpg"},13810:(e,t,n)=>{"use strict";e.exports=n.p+"92198d781b51a79d92b7.jpg"},19917:(e,t,n)=>{"use strict";e.exports=n.p+"44c45e4e42573256984b.jpg"},2504:(e,t,n)=>{"use strict";e.exports=n.p+"e7bb3eb052528f66b86c.jpg"},61676:(e,t,n)=>{"use strict";e.exports=n.p+"097729fcae7e049f327e.jpg"},35399:(e,t,n)=>{"use strict";e.exports=n.p+"4172b8e2a4dac958c972.jpg"},83324:(e,t,n)=>{"use strict";e.exports=n.p+"059666be1816495d79de.jpg"},86392:(e,t,n)=>{"use strict";e.exports=n.p+"42455adf6168beffbd3a.jpg"},72170:(e,t,n)=>{"use strict";e.exports=n.p+"b5ae7e7569f98114f9f6.png"},42634:()=>{}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=e,(()=>{var e=[];n.O=(t,r,a,o)=>{if(!r){var i=1/0;for(c=0;c<e.length;c++){for(var[r,a,o]=e[c],s=!0,l=0;l<r.length;l++)(!1&o||i>=o)&&Object.keys(n.O).every((e=>n.O[e](r[l])))?r.splice(l--,1):(s=!1,o<i&&(i=o));if(s){e.splice(c--,1);var u=a();void 0!==u&&(t=u)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[r,a,o]}})(),n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,a){if(1&a&&(r=this(r)),8&a)return r;if("object"===typeof r&&r){if(4&a&&r.__esModule)return r;if(16&a&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var i={};e=e||[null,t({}),t([]),t(t)];for(var s=2&a&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>i[e]=()=>r[e]));return i.default=()=>r,n.d(o,i),o}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="/",(()=>{var e={792:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var a,o,[i,s,l]=r,u=0;if(i.some((t=>0!==e[t]))){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(l)var c=l(n)}for(t&&t(r);u<i.length;u++)o=i[u],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(c)},r=self.webpackChunkdelivfreeapp=self.webpackChunkdelivfreeapp||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),n.O(void 0,[243],(()=>n(39653)));var r=n.O(void 0,[243],(()=>n(48102)));r=n.O(r)})();