importScripts("https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"),importScripts("https://www.gstatic.com/firebasejs/8.10.0/firebase-messaging.js"),firebase.initializeApp({apiKey:"AIzaSyAKOSDmdUpVxNpBbkdgfIJ3TxTF9RD4Gbw",authDomain:"trivia-b4527.firebaseapp.com",projectId:"trivia-b4527",storageBucket:"trivia-b4527.appspot.com",messagingSenderId:"305022913578",appId:"1:305022913578:web:26da94d29a1f2a8a0ac753",measurementId:"G-D64YYQBEVH"});const FCM_MSG="FCM_MSG",MessageType={PUSH_RECEIVED:"push-received",NOTIFICATION_CLICKED:"notification-clicked"};function sleep(i){return new Promise((e=>{setTimeout(e,i)}))}function claimClients(){return self.clients.claim()}function getClientList(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function getWindowClient(i,e){for(const t of i){const i=new URL(t.url,self.location.href);if(e.host===i.host)return t}return null}function getLink(i){var e,t,n;return(null!==(t=null===(e=i.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==t?t:null===(n=i.notification)||void 0===n?void 0:n.click_action)||null}function interalizePayload(i){let e,t;return(null===(e=null===(t=i.notification)||void 0===t?void 0:t.data)||void 0===e?void 0:e[FCM_MSG])||null}self.addEventListener("notificationclick",(i=>{i.waitUntil(getClientList().then((e=>{const t=interalizePayload(i);if(!t)return;const n=getLink(t);if(!n)return;const s=getWindowClient(e,new URL(n));return s?sleep(500).then((()=>{t.messageType=MessageType.PUSH_RECEIVED,s.postMessage(t)})):void 0})))}));const initMessaging=async function(){if(await firebase.messaging.isSupported()){firebase.messaging()}};initMessaging();